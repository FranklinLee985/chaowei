"use strict";!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LC=e()}window&&(!window.LC||window.LC&&!window.LC.shapeToJSON)&&(window.LC=e())}(function(){return function a(r,s,l){function d(o,e){if(!s[o]){if(!r[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(c)return c(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[o]={exports:{}};r[o][0].call(i.exports,function(e){var t=r[o][1][e];return d(t||e)},i,i.exports,a,r,s,l)}return s[o].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(e,t,o){var h,u,m,a,n,i,s,r,l,d,c,f=[].slice,p=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1};function g(e,t){var o,n;this.setImageSize=function(e,t){return function(){return e.apply(t,arguments)}}(this.setImageSize,this),o=n=null,n=e instanceof HTMLElement?(o=e,t):e,this.opts=n||{},this.config={zoomMin:n.zoomMin||.2,zoomMax:n.zoomMax||4,zoomStep:n.zoomStep||.2},this.colors={primary:n.primaryColor||"#000",secondary:n.secondaryColor||"#fff",background:n.backgroundColor||"transparent"},this.watermarkImage=n.watermarkImage,this.watermarkScale=n.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCanvas.className="background-canvas",this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=c.getBackingScale(this.ctx),this.backgroundShapes=n.backgroundShapes||[],this._shapesInProgress=[],this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.isDrawAble=!0,this.isTmpDrawAble=!0,this.rotateDeg=0,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.width=n.imageSize.width||h,this.height=n.imageSize.height||h,this.setZoom(this.scale),n.snapshot&&this.loadSnapshot(n.snapshot),this.isBound=!1,o&&this.bindToElement(o)}m=e("./actions"),a=e("./bindEvents"),n=e("./math"),(i=e("./shapes")).createShape,d=i.shapeToJSON,u=i.JSONToShape,s=e("./canvasRenderer").renderShapeToContext,e("./svgRenderer").renderShapeToSVG,r=e("./renderSnapshotToImage"),l=e("./renderSnapshotToSVG"),e("../tools/Pencil"),c=e("./util"),h="infinite",t.exports=(g.prototype.setWatermarkImageToLcBackground=function(e){this.watermarkImageToLcBackground=e,this.containerEl.setAttribute("watermarkImageToLcBackground",this.watermarkImageToLcBackground)},g.prototype.bindToElement=function(e){var t,o,n,i;if(!this.containerEl)return this.containerEl=e,this._unsubscribeEvents=a(this,this.containerEl,this.opts.keyboardShortcuts),this.containerEl.style["background-color"]=this.colors.background,this.containerEl.appendChild(this.backgroundCanvas),this.containerEl.appendChild(this.canvas),this.isBound=!0,o=function(){return n.keepPanInImageBounds(),n.repaintAllLayers()},(n=this).respondToSizeChange=c.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,o),this.watermarkImage&&(this.watermarkImage.onload=(i=this,function(){return i.repaintLayer("background")})),null!=(t=this.tool)&&t.didBecomeActive(this),o();console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported.")},g.prototype._teardown=function(){var e;return null!=(e=this.tool)&&e.willBecomeInactive(this),"function"==typeof this._unsubscribeEvents&&this._unsubscribeEvents(),this.tool=null,this.containerEl=null,this.isBound=!1},g.prototype.trigger=function(e,t){return this.canvas.dispatchEvent(new CustomEvent(e,{detail:t})),null},g.prototype.on=function(e,t){var o,n;return o=function(e){return t(e.detail)},this.canvas.addEventListener(e,o),n=this,function(){return n.canvas.removeEventListener(e,o)}},g.prototype.getRenderScale=function(){return this.scale*this.backingScale},g.prototype.clientCoordsToDrawingCoords=function(e,t){var o,n,i=this.canvas.width,a=this.canvas.height;switch(this.rotateDeg){case 0:o=e,n=t;break;case 90:o=t,n=a-e;break;case 180:o=i-e,n=a-t;break;case 270:o=i-t,n=e;break;default:o=e,n=t}return{x:(o*this.backingScale-this.position.x)/this.getRenderScale(),y:(n*this.backingScale-this.position.y)/this.getRenderScale()}},g.prototype.drawingCoordsToClientCoords=function(e,t){return{x:e*this.getRenderScale()+this.position.x,y:t*this.getRenderScale()+this.position.y}},g.prototype.setImageSize=function(e,t){return this.width=e||h,this.height=t||h,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},g.prototype.setTool=function(e){var t;if(this.isBound&&null!=(t=this.tool)&&t.willBecomeInactive(this),this.tool=e,this.trigger("toolChange",{tool:e}),this.isBound)return this.tool.didBecomeActive(this)},g.prototype.setShapesInProgress=function(e){return this._shapesInProgress=e},g.prototype.pointerDown=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?(this.tool.begin(o.x,o.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},g.prototype.pointerMove=function(o,n){return c.requestAnimationFrame((i=this,function(){var e,t;return e=i.clientCoordsToDrawingCoords(o,n),null!=(t=i.tool)&&t.usesSimpleAPI?i.isDragging?(i.tool.continue(e.x,e.y,i),i.trigger("drawContinue",{tool:i.tool})):void 0:i.isDragging?i.trigger("lc-pointerdrag",{tool:i.tool,x:e.x,y:e.y,rawX:o,rawY:n}):i.trigger("lc-pointermove",{tool:i.tool,x:e.x,y:e.y,rawX:o,rawY:n})}));var i},g.prototype.pointerUp=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(o.x,o.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},g.prototype.setColor=function(e,t){if(this.colors[e]=t,this.isBound){switch(e){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(e+"ColorChange",this.colors[e]),"background"===e?this.trigger("drawingChange"):void 0}},g.prototype.getColor=function(e){return this.colors[e]},g.prototype.saveShape=function(e,t,o,n,i,a){n=null!=n&&null!=n&&n,null==t&&(t=!0),null==o&&(o=null),o=o||(this.shapes.length?this.shapes[this.shapes.length-1].id:null),e.authorUserId=i;var r="saveShape_"+(new Date).getTime()+parseInt(1e4*Math.random()),s=new m.AddShapeAction(this,e,o,r,n,i,a);return this.execute(s),this.isDrawAble&&t&&this.trigger("shapeSave",{shape:e,previousShapeId:o,executeId:r,shapeId:e.id,action:{actionName:s.actionName}}),this.trigger("drawingChange")},g.prototype.pan=function(e,t){return this.setPan(this.position.x-e,this.position.y-t)},g.prototype.keepPanInImageBounds=function(){var e,t,o,n;return t=this.getRenderScale(),o=(e=this.position).x,n=e.y,this.width!==h&&(o=this.canvas.width>this.width*t?(this.canvas.width-this.width*t)/2:Math.max(Math.min(0,o),this.canvas.width-this.width*t)),this.height!==h&&(n=this.canvas.height>this.height*t?(this.canvas.height-this.height*t)/2:Math.max(Math.min(0,n),this.canvas.height-this.height*t)),this.position={x:o,y:n}},g.prototype.setPan=function(e,t){return this.position={x:e,y:t},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},g.prototype.zoom=function(e){var t;return t=this.scale+e,t=Math.max(t,this.config.zoomMin),t=Math.min(t,this.config.zoomMax),t=Math.round(100*t)/100,this.setZoom(t)},g.prototype.setZoom=function(e){var t;return t=this.scale,this.scale=e,this.position.x=n.scalePositionScalar(this.position.x,this.canvas.width,t,this.scale),this.position.y=n.scalePositionScalar(this.position.y,this.canvas.height,t,this.scale),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:t,newScale:this.scale})},g.prototype.setPdf=function(e,t){var o={pdfOpenParams:{pagemode:"bookmarks",navpanes:0,statusbar:0,toolbar:0,view:"FitV"},forcePDFJS:!0,PDFJS_URL:e},n="#"+this.customCanvasBackgroundElement.id;window.PDFObject.embed(e,n,o),t&&"function"==typeof t&&t()},g.prototype.setWatermarkImage=function(e){if(this.watermarkImage=e,this.watermarkImageToLcBackground){if(c.addImageOnload(e,(t=this,function(){return t.repaintLayer("background")})),e.width)return this.repaintLayer("background")}else this.customCanvasBackgroundElement.style.backgroundImage="url("+JSON.stringify(e.src)+")";var t},g.prototype.repaintAllLayers=function(){var e,t,o,n;for(e=0,o=(n=["background","main"]).length;e<o;e++)t=n[e],this.repaintLayer(t);return null},g.prototype.repaintLayer=function(e,t){var o;if(null==t&&(t="main"===e),this.isBound){switch(e){case"background":if(!this.watermarkImageToLcBackground)return;this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),o=function(){return r.repaintLayer("background")},(r=this).watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,o),this.draw(this.backgroundShapes,this.backgroundCtx,o);break;case"main":i=this,o=function(){return i.repaintLayer("main",!0)},t&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,o)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),0<this.canvas.width&&0<this.canvas.height&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped(function(){return n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),n.ctx.drawImage(n.buffer,0,0)},(n=this).ctx),this.clipped(function(){return a.transformed(function(){var e,t,o,n,i;for(n=[],e=0,t=(o=a._shapesInProgress).length;e<t;e++)i=o[e],n.push(s(a.ctx,i,{bufferCtx:a.bufferCtx,shouldOnlyDrawLatest:!0}));return n},a.ctx,a.bufferCtx)},(a=this).ctx,this.bufferCtx))}var a,n,i,r;return this.trigger("repaint",{layerKey:e})}},g.prototype._renderWatermark=function(e,t,o){if(null==t&&(t=!0),this.watermarkImage.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(this.watermarkScale,this.watermarkScale),t&&e.scale(this.backingScale,this.backingScale),e.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),e.restore();this.watermarkImage.onload=o},g.prototype.drawShapeInProgress=function(e){return this.repaintLayer("main",!1),this.clipped(function(){return t.transformed(function(){return s(t.ctx,e,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0})},t.ctx,t.bufferCtx)},(t=this).ctx,this.bufferCtx);var t},g.prototype.draw=function(i,a,r){var e,t;if(i.length)return e=function(){var e,t,o,n;for(o=[],e=0,t=i.length;e<t;e++)n=i[e],o.push(s(a,n,{retryCallback:r}));return o},this.clipped((t=this,function(){return t.transformed(e,a)}),a)},g.prototype.clipped=function(){var e,t,o,n,i,a,r,s,l,d,c,u;for(o=arguments[0],e=2<=arguments.length?f.call(arguments,1):[],c=this.width===h?0:this.position.x,u=this.height===h?0:this.position.y,d=function(){switch(this.width){case h:return this.canvas.width;default:return this.width*this.getRenderScale()}}.call(this),n=function(){switch(this.height){case h:return this.canvas.height;default:return this.height*this.getRenderScale()}}.call(this),i=0,r=e.length;i<r;i++)(t=e[i]).save(),t.beginPath(),t.rect(c,u,d,n),t.clip();for(o(),l=[],a=0,s=e.length;a<s;a++)t=e[a],l.push(t.restore());return l},g.prototype.transformed=function(){var e,t,o,n,i,a,r,s,l;for(o=arguments[0],n=0,a=(e=2<=arguments.length?f.call(arguments,1):[]).length;n<a;n++)(t=e[n]).save(),t.translate(Math.floor(this.position.x),Math.floor(this.position.y)),l=this.getRenderScale(),t.scale(l,l);for(o(),s=[],i=0,r=e.length;i<r;i++)t=e[i],s.push(t.restore());return s},g.prototype.sendClear=function(e){var t=!1;if(e){for(var o=0;o<this.shapes.length;o++)if(this.shapes[o].authorUserId===e){t=!0;break}}else t=!0;if(t){var n="clear_"+(new Date).getTime()+parseInt(1e4*Math.random());this.trigger("sendClear",{clearActionId:n,action:{actionName:"ClearAction"}})}},g.prototype.clear=function(e,t,o,n,i){var a,r;if(null==e&&(e=!0),r=this.shapes,a=[],0!==this.shapes.length){if(n&&0<this.shapes.length){for(var s=!1,l=0;l<this.shapes.length;l++)this.shapes[l].authorUserId!==n?a.push(this.shapes[l]):s=!0;if(!s)return}this.setShapesInProgress([]);var d=t||"clear_"+(new Date).getTime()+parseInt(1e4*Math.random()),c=new m.ClearAction(this,r,a,d,o,n,i);return this.execute(c),this.repaintLayer("main"),e&&this.trigger("clear",{clearActionId:d,oldShapes:r,action:{actionName:c.actionName}}),this.trigger("drawingChange",{})}},g.prototype.execute=function(e){return this.undoStack.push(e),e.do(),0<this.redoStack.length&&this.trigger("doClearRedoStack",{doClearRedoStack:this.redoStack}),this.redoStack=[]},g.prototype.goToStackPosition=function(e){},g.prototype.sendUndo=function(e){if(this.undoStack.length){var t;if(e){for(var o=this.undoStack.length-1;0<=o;o--)if(e===this.undoStack[o].authorUserId){t=this.undoStack[o];break}}else t=this.undoStack[this.undoStack.length-1];t&&(t.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendUndo",{action:t,executeId:t.executeId}))}},g.prototype.undo=function(e,t){var o;if(null==e&&(e=!0),this.undoStack.length){if(t){for(var n=this.undoStack.length-1;0<=n;n--)if(this.undoStack[n]&&this.undoStack[n].id===t){o=this.undoStack[n],this.undoStack.splice(n,1);break}}else o=this.undoStack.pop();return o?(o.undo(),o.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.redoStack.push(o),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),e&&this.trigger("undo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})):void 0}},g.prototype.sendRedo=function(e){if(this.redoStack.length){var t;if(e){for(var o=this.redoStack.length-1;0<=o;o--)if(e===this.redoStack[o].authorUserId){t=this.redoStack[o];break}}else t=this.redoStack[this.redoStack.length-1];t&&(t.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendRedo",{action:t,executeId:t.executeId}))}},g.prototype.redo=function(e,t){var o;if(null==e&&(e=!0),this.redoStack.length){if(t){for(var n=this.redoStack.length-1;0<=n;n--)if(this.redoStack[n]&&this.redoStack[n].id===t){o=this.redoStack[n],this.redoStack.splice(n,1);break}}else o=this.redoStack.pop();if(o)return this.undoStack.push(o),o.do(!0),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),o.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),e&&this.trigger("redo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})}},g.prototype.canUndo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=this.undoStack.length-1;0<=t;t--)if(this.undoStack[t].authorUserId==this.myselfId){e=!0;break}return e}return!!this.undoStack.length},g.prototype.canRedo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=0;t<this.redoStack.length;t++)this.redoStack[t].authorUserId==this.myselfId&&(e=!0);return e}return!!this.redoStack.length},g.prototype.getPixel=function(e,t){var o,n;return o=this.drawingCoordsToClientCoords(e,t),(n=this.ctx.getImageData(o.x,o.y,1,1).data)[3]?"rgb("+n[0]+", "+n[1]+", "+n[2]+")":null},g.prototype.getContentBounds=function(){return c.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(e){return e.getBoundingRect()}),this.width===h?0:this.width,this.height===h?0:this.height)},g.prototype.getDefaultImageRect=function(e,t){var i;return null==e&&(e={width:0,height:0}),null==t&&(t={top:0,right:0,bottom:0,left:0}),c.getDefaultImageRect(function(){var e,t,o,n;for(n=[],e=0,t=(o=this.shapes.concat(this.backgroundShapes)).length;e<t;e++)i=o[e],n.push(i.getBoundingRect(this.ctx));return n}.call(this),e,t)},g.prototype.getImage=function(e){return null==e&&(e={}),null==e.includeWatermark&&(e.includeWatermark=!0),null==e.scaleDownRetina&&(e.scaleDownRetina=!0),null==e.scale&&(e.scale=1),e.scaleDownRetina||(e.scale*=this.backingScale),e.includeWatermark&&(e.watermarkImage=this.watermarkImage,e.watermarkScale=this.watermarkScale,e.scaleDownRetina||(e.watermarkScale*=this.backingScale)),r(this.getSnapshot(),e)},g.prototype.canvasForExport=function(){return this.repaintAllLayers(),c.combineCanvases(this.backgroundCanvas,this.canvas)},g.prototype.canvasWithBackground=function(e){return c.combineCanvases(e,this.canvasForExport())},g.prototype.getSnapshot=function(e){var t,o,n,i,a,r;for(null==e&&(e=null),null==e&&(e=["shapes","imageSize","colors","position","scale","backgroundShapes"]),r={},t=0,n=(i=["colors","position","scale"]).length;t<n;t++)o=i[t],0<=p.call(e,o)&&(r[o]=this[o]);return 0<=p.call(e,"shapes")&&(r.shapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=this.shapes).length;e<t;e++)a=o[e],n.push(d(a));return n}.call(this)),0<=p.call(e,"backgroundShapes")&&(r.backgroundShapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=this.backgroundShapes).length;e<t;e++)a=o[e],n.push(d(a));return n}.call(this)),0<=p.call(e,"imageSize")&&(r.imageSize={width:this.width,height:this.height}),r},g.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},g.prototype.getSVGString=function(e){return null==e&&(e={}),l(this.getSnapshot(),e)},g.prototype.loadSnapshot=function(i){var e,t,o,n,a,r,s,l,d,c;if(i){if(i.colors)for(e=0,n=(r=["primary","secondary","background"]).length;e<n;e++)o=r[e],this.setColor(o,i.colors[o]);if(i.shapes)for(this.shapes=[],t=0,a=(s=i.shapes).length;t<a;t++)c=s[t],(d=u(c))&&this.execute(new m.AddShapeAction(this,d));return i.backgroundShapes&&(this.backgroundShapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)l=o[e],n.push(u(l));return n}()),i.imageSize&&(this.width=i.imageSize.width,this.height=i.imageSize.height),i.position&&(this.position=i.position),i.scale&&(this.scale=i.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},g.prototype.loadSnapshotJSON=function(e){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(e))},g)},{"../tools/Pencil":24,"./actions":3,"./bindEvents":4,"./canvasRenderer":5,"./math":10,"./renderSnapshotToImage":11,"./renderSnapshotToSVG":12,"./shapes":13,"./svgRenderer":14,"./util":15}],2:[function(e,t,o){var n,d,h,c;function i(t,e,o,n,i){var a,r,s,l;this.text=e,this.font=o,this.forcedWidth=n,this.forcedHeight=i,a=(s=c(this.font)).fontFamily,r=s.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",r,a).width,this.caratWidth=t.measureTextWidth("|",r,a).width,this.lines=d(t,this.text,this.forcedWidth),this.metricses=this.lines.map((l=this,function(e){return t.measureText2(e||"X",r,l.font)})),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(e){return e.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(e){return e.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(e){return e.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(e){return e.leading})),width:Math.max.apply(Math,this.metricses.map(function(e){return e.width})),height:Math.max.apply(Math,this.metricses.map(function(e){return e.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.minx})),miny:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}e("./fontmetrics.js"),c=function(e){var t,o,n,i,a,r;for(i=o=0,a=(t=e.split(" ")).length;i<a;i++)n=t[i],r=parseInt(n.replace("px",""),10),isNaN(r)||(o=r);if(!o)throw"Font size not found";return{fontSize:o,fontFamily:e.substring(t[0].length+1).replace("bold ","").replace("italic ","").replace("underline ","")}},h=function(e,t,o){var n,i,a,r,s,l,d,c,u,h;if(!t.length)return["",""];for(d=l=i=0,h=!1;;)if(r=(s=!(a=(i+=1)>=t.length)&&t[i].match(/\s/))||a,u=t.substring(0,i),(n=!o||e.measureTextWidth(u).width<=o)&&(d=i),r&&h&&(h=!1,n&&(l=i)),h=!s,a||!n){if(n)return[t,""];if(0<l){for(c=l+1;c<t.length&&t[c].match("/s/");)c+=1;return[t.substring(0,l),t.substring(c)]}return[t.substring(0,d),t.substring(d)]}},d=function(e,t,o){var n,i,a,r,s,l,d,c,u;for(a=[],n=0,i=(u=t.split(/\r\n|\r|\n/g)).length;n<i;n++)if(c=u[n],r=(s=h(e,c,o))[0],d=s[1],r)for(;r;)a.push(r),r=(l=h(e,d,o))[0],d=l[1];else a.push(c);return a},i.prototype.draw=function(e,t,o){var n,i,a,r,s,l;for(e.textBaseline="top",e.font=this.font,l=[],i=n=0,a=(s=this.lines).length;i<a;i++)r=s[i],e.fillText(r,t,o+n*this.metrics.leading),l.push(n+=1);return l},i.prototype.getWidth=function(e){return null==e&&(e=!1),this.forcedWidth?this.forcedWidth:e?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx},i.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},n=i,t.exports=n},{"./fontmetrics.js":7}],3:[function(e,t,o){var n,i;function a(e,t,o,n,i,a,r){this.lc=e,this.oldShapes=t,this.newShapes=o,this.executeId=n,this.id=n,this.clearActionId=n,this.authorUserId=i,this.toAuthorUserId=a,this.seq=r,this.actions=[],this.actionName="ClearAction"}function r(e,t,o,n,i,a,r){this.lc=e,this.shape=t,this.previousShapeId=null!=o?o:null,this.doNotPaint=i,this.executeId=n,this.shapeId=t.id,this.id=t.id,this.authorUserId=a,this.seq=r,this.actionName="AddShapeAction"}a.prototype.do=function(){var e=[];this.actions=[];for(var t=this.lc.undoStack.length-1;0<=t;t--){var o=this.lc.undoStack[t];"AddShapeAction"===o.actionName&&(this.toAuthorUserId?this.lc.undoStack[t].authorUserId===this.toAuthorUserId?(this.actions.push(o),this.lc.undoStack.splice(t,1)):e.push(this.lc.undoStack[t].shape):(this.actions.push(o),this.lc.undoStack.splice(t,1)))}return this.lc.shapes=e.reverse(),this.lc.repaintLayer("main")},a.prototype.undo=function(){var e=[];this.lc.undoStack=this.lc.undoStack.concat(this.actions),this.actions=[],this.lc.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0});for(var t=0;t<this.lc.undoStack.length;t++)"AddShapeAction"===this.lc.undoStack[t].actionName&&e.push(this.lc.undoStack[t].shape);return this.lc.shapes=e,this.lc.repaintLayer("main")},i=a,r.prototype.do=function(e,t){var o,n,i,a,r,s;if(e=null!=e&&e,this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(o=!(a=[]),n=0,i=(r=this.lc.shapes).length;n<i;n++)s=r[n],a.push(s),s.id===this.previousShapeId&&(a.push(this.shape),o=!0);o||a.push(this.shape),this.lc.shapes=a}else this.lc.shapes.push(this.shape);if((e||!this.doNotPaint)&&!t)return this.lc.repaintLayer("main")},r.prototype.undo=function(){var e,t,o,n,i;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(o=[],e=0,t=(n=this.lc.shapes).length;e<t;e++)(i=n[e]).id!==this.shape.id&&o.push(i);this.lc.shapes=o}return this.lc.repaintLayer("main")},n=r,t.exports={ClearAction:i,AddShapeAction:n}},{}],4:[function(e,t,o){var m,f;m=function(e,t){var o,n,i;return n=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,[n-(o=e.getBoundingClientRect()).left,i-o.top]},f=function(e,t){var o;return o=e.getBoundingClientRect(),{left:t.clientX-o.left,top:t.clientY-o.top}},t.exports=function(l,d,e){var t,c,u,s,h,i;return null==e&&(e=!1),i=[],c=function(e){var t;return e.preventDefault(),t=f(d,e),l.pointerMove(t.left,t.top)},u=function(e){var t;e.preventDefault(),d.onselectstart=function(){return!0},t=f(d,e),l.pointerUp(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r])}}}catch(e){console.error("tklc error:",e)}return document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u),d.addEventListener("mousemove",c)},d.addEventListener("mousedown",function(e){var t;if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault(),d.onselectstart=function(){return!1},t=f(d,e),l.pointerDown(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r]);var s=document.createElement("div");s.className="ifreamTempLayer",i.appendChild(s)}}}catch(e){console.error("tklc error:",e)}return d.removeEventListener("mousemove",c),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)}}),h=function(e){return e.preventDefault(),l.pointerMove.apply(l,m(d,e))},s=function(e){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a])}}}catch(e){console.error("tklc error:",e)}return l.pointerUp.apply(l,m(d,e)),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)},d.addEventListener("touchstart",function(e){if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a]);var r=document.createElement("div");r.className="ifreamTempLayer",n.appendChild(r)}}}catch(e){console.error("tklc error:",e)}return 1===e.touches.length?(l.pointerDown.apply(l,m(d,e)),document.addEventListener("touchmove",h),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s)):l.pointerMove.apply(l,m(d,e))}}),e&&(console.warn("Keyboard panning is deprecated."),t=function(e){switch(e.keyCode){case 37:l.pan(-10,0);break;case 38:l.pan(0,-10);break;case 39:l.pan(10,0);break;case 40:l.pan(0,10)}return l.repaintAllLayers()},i.push(function(){return document.removeEventListener(t)})),function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n}}},{}],5:[function(e,t,o){var r,n,i,a,s,l,d,c,u,h;s=e("./lineEndCapShapes"),u={},l=function(){},c=function(e,t,o){var n;if(null==o&&(o={}),null==o.shouldIgnoreUnsupportedShapes&&(o.shouldIgnoreUnsupportedShapes=!1),null==o.retryCallback&&(o.retryCallback=l),null==o.shouldOnlyDrawLatest&&(o.shouldOnlyDrawLatest=!1),null==o.bufferCtx&&(o.bufferCtx=null),n=o.bufferCtx,u[t.className])return o.shouldOnlyDrawLatest&&u[t.className].drawLatestFunc?u[t.className].drawLatestFunc(e,n,t,o.retryCallback):u[t.className].drawFunc(e,t,o.retryCallback);if(o.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to canvas");throw"Can't render shape of type "+t.className+" to canvas"},d=function(e,t,o){return c(e.getContext("2d"),t,o)},(n=function(e,t,o){return u[e]={drawFunc:t,drawLatestFunc:o}})("Rectangle",function(e,t){var o,n;return o=t.x,n=t.y,t.strokeWidth%2!=0&&(o+=.5,n+=.5),e.fillStyle=t.fillColor,e.fillRect(o,n,t.width,t.height),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.strokeRect(o,n,t.width,t.height)}),n("Ellipse",function(e,t){var o,n,i,a;return e.save(),a=Math.floor(t.width/2),i=Math.floor(t.height/2),o=t.x+a,n=t.y+i,e.translate(o,n),e.scale(1,Math.abs(t.height/t.width)),e.beginPath(),e.arc(0,0,Math.abs(a),0,2*Math.PI),e.closePath(),e.restore(),e.fillStyle=t.fillColor,e.fill(),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke()}),n("SelectionBox",(h=function(e,t,o){var n,i;if(n=t.x,i=t.y,0!==o)return e.fillStyle="#fff",e.fillRect(n,i,o,o),e.strokeStyle="#000",e.strokeRect(n,i,o,o)},function(e,t){return h(e,t.getTopLeftHandleRect(),t.handleSize),h(e,t.getTopRightHandleRect(),t.handleSize),h(e,t.getBottomLeftHandleRect(),t.handleSize),h(e,t.getBottomRightHandleRect(),t.handleSize),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin),e.setLineDash([])})),n("Image",function(e,t,o){return t.image.width?1===t.scale?e.drawImage(t.image,t.x,t.y):e.drawImage(t.image,t.x,t.y,t.image.width*t.scale,t.image.height*t.scale):o?t.image.onload=o:void 0}),n("Line",function(e,t){var o,n,i,a,r;if(t.x1!==t.x2||t.y1!==t.y2)return n=t.x1,i=t.x2,a=t.y1,r=t.y2,t.strokeWidth%2!=0&&(n+=.5,i+=.5,a+=.5,r+=.5),e.lineWidth=t.strokeWidth,e.strokeStyle=t.color,e.lineCap=t.capStyle,t.dash&&e.setLineDash(t.dash),e.beginPath(),e.moveTo(n,a),e.lineTo(i,r),e.stroke(),t.dash&&e.setLineDash([]),o=Math.max(2.2*t.strokeWidth,5),t.endCapShapes[0]&&s[t.endCapShapes[0]].drawToCanvas(e,n,a,Math.atan2(a-r,n-i),o,t.color),t.endCapShapes[1]?s[t.endCapShapes[1]].drawToCanvas(e,i,r,Math.atan2(r-a,i-n),o,t.color):void 0}),r=function(e,t,o,n){var i,a,r,s;if(null==o&&(o=!1),null==n&&(n="round"),t.length){for(e.lineCap=n,e.strokeStyle=t[0].color,e.lineWidth=t[0].size,e.beginPath(),t[0].size%2==0?e.moveTo(t[0].x,t[0].y):e.moveTo(t[0].x+.5,t[0].y+.5),i=0,a=(s=t.slice(1)).length;i<a;i++)r=s[i],t[0].size%2==0?e.lineTo(r.x,r.y):e.lineTo(r.x+.5,r.y+.5);return o?e.closePath():void 0}},n("LinePath",i=function(e,t){return r(e,t.smoothedPoints),e.stroke()},a=function(e,t,o){var n,i,a;return o.tail?(i=(a=o.smoothedPoints.length-o.segmentSize*o.tailSize)<2*o.segmentSize?0:a,n=a+o.segmentSize+1,r(t,o.smoothedPoints.slice(i,n))):r(t,o.smoothedPoints),t.stroke()}),n("ErasedLinePath",function(e,t){return e.save(),e.globalCompositeOperation="destination-out",i(e,t),e.restore()},function(e,t,o){return e.save(),e.globalCompositeOperation="destination-out",t.save(),t.globalCompositeOperation="destination-out",a(0,t,o),e.restore(),t.restore()}),n("Text",function(e,t){return t.renderer||t._makeRenderer(e),e.fillStyle=t.color,t.renderer.draw(e,t.x,t.y)}),n("Polygon",function(e,t){return e.fillStyle=t.fillColor,r(e,t.points,t.isClosed,"butt"),e.fill(),e.stroke()}),t.exports={defineCanvasRenderer:n,renderShapeToCanvas:d,renderShapeToContext:c}},{"./lineEndCapShapes":8}],6:[function(e,t,o){t.exports={imageURLPrefix:"lib/img",primaryColor:"hsla(0, 0%, 0%, 1)",secondaryColor:"hsla(0, 0%, 100%, 1)",backgroundColor:"transparent",strokeWidths:[1,2,5,10,20,30],defaultStrokeWidth:5,toolbarPosition:"top",keyboardShortcuts:!1,imageSize:{width:"infinite",height:"infinite"},backgroundShapes:[],watermarkImage:null,watermarkScale:1,zoomMin:.2,zoomMax:4,zoomStep:.2,snapshot:null,onInit:function(){},tools:[e("../tools/Pencil"),e("../tools/Eraser"),e("../tools/Line"),e("../tools/Rectangle"),e("../tools/Ellipse"),e("../tools/Text"),e("../tools/Polygon"),e("../tools/Pan"),e("../tools/Eyedropper")]}},{"../tools/Ellipse":19,"../tools/Eraser":20,"../tools/Eyedropper":21,"../tools/Line":22,"../tools/Pan":23,"../tools/Pencil":24,"../tools/Polygon":25,"../tools/Rectangle":26,"../tools/Text":28}],7:[function(e,t,o){!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;CanvasRenderingContext2D.prototype.measureText2=function(e,t,o){var n=this.measureTextWidth(e),i=!/\S/.test(e);n.fontsize=t;var a=document.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.font=o,a.innerHTML=e+"<br/>"+e,document.body.appendChild(a),n.leading=1.2*t;var r=function(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}(a,"height");if(2*t<=(r=r.replace("px",""))&&(n.leading=r/2|0),document.body.removeChild(a),i)n.ascent=0,n.descent=0,n.bounds={minx:0,maxx:n.width,miny:0,maxy:0},n.height=0;else{var s=document.createElement("canvas");s.width=n.width+100,s.height=3*t,s.style.opacity=1,s.style.font=o;var l=s.getContext("2d");l.font=o;var d=s.width,c=s.height,u=c/2;l.fillStyle="white",l.fillRect(-1,-1,d+2,c+2),l.fillStyle="black",l.fillText(e,50,u);for(var h=l.getImageData(0,0,d,c).data,m=0,f=4*d,p=h.length;++m<p&&255===h[m];);var g=m/f|0;for(m=p-1;0<--m&&255===h[m];);var v=m/f|0;for(m=0;m<p&&255===h[m];)p<=(m+=f)&&(m=m-p+4);var y=m%f/4|0,b=1;for(m=p-3;0<=m&&255===h[m];)(m-=f)<0&&(m=p-3-4*b++);var _=m%f/4+1|0;n.ascent=u-g,n.descent=v-u,n.bounds={minx:y-50,maxx:_-50,miny:0,maxy:v-g},n.height=v-g+1}return n}}()},{}],8:[function(e,t,o){var l;t.exports={arrow:(l=function(e,t,o,n,i){return[{x:e+Math.cos(o+Math.PI/2)*n/2,y:t+Math.sin(o+Math.PI/2)*n/2},{x:e+Math.cos(o)*i,y:t+Math.sin(o)*i},{x:e+Math.cos(o-Math.PI/2)*n/2,y:t+Math.sin(o-Math.PI/2)*n/2}]},{drawToCanvas:function(e,t,o,n,i,a,r){var s;return null==r&&(r=0),r=r||i,e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),s=l(t,o,n,i,r),e.moveTo(s[0].x,s[0].y),e.lineTo(s[1].x,s[1].y),e.lineTo(s[2].x,s[2].y),e.fill()},svg:function(e,t,o,n,i,a){return null==a&&(a=0),"<polygon fill='"+i+"' stroke='none' points='"+l(e,t,o,n,a=a||n).map(function(e){return e.x+","+e.y})+"' />"}})}},{}],9:[function(e,t,o){var n,i,a;a={},i=function(e){return a=e},n=function(e){return a[e]||e},t.exports={localize:i,_:n}},{}],10:[function(e,t,o){var l,n,d,i;e("./shapes").Point,e("./util"),n={toPoly:function(e){var t,o,n,i,a,r,s;for(r=[],s=[],t=o=0,n=e.length;t<n;t++)a=e[t],i=d(a,l(e,o)),r=r.concat([i[0]]),s=[i[1]].concat(s),o+=1;return r.concat(s)}},l=function(e,t){return e.length<3&&{x:0,y:0},0===t?l(e,t+1):t===e.length-1?l(e,t-1):n.diff(e[t-1],e[t+1])},n.diff=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},i=function(e){var t;return t=n.len(e),{x:e.x/t,y:e.y/t}},d=function(e,t){return(t=i(t)).x=t.x*e.size/2,t.y=t.y*e.size/2,[{x:e.x-t.y,y:e.y+t.x,color:e.color},{x:e.x+t.y,y:e.y-t.x,color:e.color}]},n.len=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},n.scalePositionScalar=function(e,t,o,n){return e+(t*o-t*n)/2},t.exports=n},{"./shapes":13,"./util":15}],11:[function(e,t,o){var c,u,h,m;m=e("./util"),u=e("./shapes").JSONToShape,c="infinite",h=function(e,t,o){if(t.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(o,o),e.drawImage(t,-t.width/2,-t.height/2),e.restore()},t.exports=function(i,e){var n,t,o,a,r,s,l,d;return null==e&&(e={}),null==e.scale&&(e.scale=1),s=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.shapes).length;e<t;e++)r=o[e],n.push(u(r));return n}(),t=[],i.backgroundShapes&&(t=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)r=o[e],n.push(u(r));return n}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),a=i.imageSize||{width:c,height:c},o=i.colors||{background:"transparent"},n=s.concat(t),l=document.createElement("canvas"),d=l.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=m.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)r=n[e],o.push(r.getBoundingRect(d));return o}(),a,e.margin),l.width=e.rect.width*e.scale,l.height=e.rect.height*e.scale,d.fillStyle=o.background,d.fillRect(0,0,l.width,l.height),e.rect.width&&e.rect.height?(e.watermarkImage&&h(d,e.watermarkImage,e.watermarkScale),m.combineCanvases(l,m.renderShapes(t,e.rect,e.scale),m.renderShapes(s,e.rect,e.scale))):null}},{"./shapes":13,"./util":15}],12:[function(e,t,o){var c,u,h;h=e("./util"),u=e("./shapes").JSONToShape,c="infinite",t.exports=function(i,e){var n,t,o,a,r,s,l,d;return null==e&&(e={}),d=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.shapes).length;e<t;e++)l=o[e],n.push(u(l));return n}(),t=[],i.backgroundShapes&&(t=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)l=o[e],n.push(u(l));return n}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),s=i.imageSize||{width:c,height:c},o=i.colors||{background:"transparent"},n=d.concat(t),r=document.createElement("canvas"),a=r.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=h.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)l=n[e],o.push(l.getBoundingRect(a));return o}(),s,e.margin),LC.renderShapesToSVG(t.concat(d),e.rect,o.background)}},{"./shapes":13,"./util":15}],13:[function(e,t,o){var l,n,i,r,a,s,d,c,u,h,m,f,p,g,v,y,b,_,w,k;k=e("./util"),n=e("./TextRenderer"),e("./lineEndCapShapes"),g=e("./canvasRenderer"),h=g.defineCanvasRenderer,y=g.renderShapeToContext,v=e("./svgRenderer"),m=v.defineSVGRenderer,b=v.renderShapeToSVG,w={},u=function(e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p,g){var v;return(v=new w[e](t,o,n,i,a,r,s,l,d,c,u,h,m,f,p,g)).id=k.getGUID(),v},l=function(e){var t,o,n,i;return t=e.className,o=e.data,n=e.id,t in w?(i=w[t].fromJSON(o))?(n&&(i.id=n),i):(console.log("Unreadable shape:",t,o),null):(console.log("Unknown shape:",t,o),null)},_=function(e){return{className:e.className,data:e.toJSON(),id:e.id}},c=function(e,t){return t?c(a(a(d(e))),t-1):e},d=function(e){var t,o,n,i,a;for(a=[],i=t=0,o=(e=[e[0]].concat(e).concat(k.last(e))).length;i<o;i++)n=e[i],a[2*t]=n,e[t+1]&&(a[2*t+1]=s(n,e[t+1])),t+=1;return a},a=function(e){var t,o,n,i,a;for(t=[],a=o=0,n=e.length;a<n;a++)i=e[a],e[o+1]&&(t[o]=s(i,e[o+1])),o+=1;return t},s=function(e,t){return u("Point",{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2,size:e.size+(t.size-e.size)/2,color:e.color})},(f=function(e,g){var t,o,n,i,a,r,s,l;for(i in(t=function(e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p){return g.constructor.call(this,e,t,o,n,i,a,r,s,l,d,c,u,h,m,f,p),this}).prototype.className=e,t.fromJSON=g.fromJSON,g.draw&&(a=g.draw,r=g.draw||function(e,t,o){return this.draw(e,t,o)},o=function(e,t,o){return a.call(t,e,o)},n=function(e,t,o,n){return r.call(o,e,t,n)},delete g.draw,g.drawLatest&&delete g.drawLatest,h(e,o,n)),g.toSVG&&(s=g.toSVG,l=function(e){return s.call(e)},delete g.toSVG,m(e,l)),t.prototype.draw=function(e,t){return y(e,this,{retryCallback:t})},t.prototype.drawLatest=function(e,t,o){return y(e,this,{retryCallback:o,bufferCtx:t,shouldOnlyDrawLatest:!0})},t.prototype.toSVG=function(){return b(this)},g)"fromJSON"!==i&&(t.prototype[i]=g[i]);return w[e]=t})("Image",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.scale=e.scale||1,this.image=e.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width*this.scale,height:this.image.height*this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(e){var t,o;return((t=null)!=(o=e.imageObject)?o.width:void 0)?t=e.imageObject:(t=new Image).src=e.imageSrc,u("Image",{x:e.x,y:e.y,image:t,scale:e.scale})},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Rectangle",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Rectangle",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Ellipse",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Ellipse",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Line",{constructor:function(e){return null==e&&(e={}),this.x1=e.x1||0,this.y1=e.y1||0,this.x2=e.x2||0,this.y2=e.y2||0,this.strokeWidth=e.strokeWidth||1,this.color=e.color||"black",this.capStyle=e.capStyle||"round",this.endCapShapes=e.endCapShapes||[null,null],this.dash=e.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(e){return u("Line",e)},move:function(e){return null==e&&(e={}),this.x1=this.x1-e.xDiff,this.y1=this.y1-e.yDiff,this.x2=this.x2-e.xDiff,this.y2=this.y2-e.yDiff},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),r=function(e){var t,o,n,i,a;if(!e.length)return!1;for(a=e[0].size,t=e[0].color,i=0,o=e.length;i<o;i++)if((n=e[i]).size===a&&n.color===t||console.log(a,t,n.size,n.color),n.size!==a||n.color!==t)return!1;return!0},i=function(e,a){var i,t,o,r,s;return t=null,a.points?t=function(){var e,t,o,n;for(n=[],t=0,e=(o=a.points).length;t<e;t++)i=o[t],n.push(l(i));return n}():a.pointCoordinatePairs&&(t=function(){var e,t,o,n,i;for(i=[],t=0,e=(o=a.pointCoordinatePairs).length;t<e;t++)n=o[t],r=n[0],s=n[1],i.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return i}()),o=null,a.smoothedPointCoordinatePairs&&(o=function(){var e,t,o,n,i;for(i=[],t=0,e=(o=a.smoothedPointCoordinatePairs).length;t<e;t++)n=o[t],r=n[0],s=n[1],i.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return i}()),t[0]?u(e,{points:t,smoothedPoints:o,order:a.order,tailSize:a.tailSize,smooth:a.smooth}):null},f("LinePath",p={constructor:function(e){var t,o,n,i,a;if(null==e&&(e={}),n=e.points||[],this.order=e.order||3,this.tailSize=e.tailSize||3,this.smooth=!("smooth"in e)||e.smooth,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,e.smoothedPoints)return this.points=e.points,this.smoothedPoints=e.smoothedPoints;for(this.points=[],a=[],i=0,t=n.length;i<t;i++)o=n[i],a.push(this.addPoint(o));return a},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(e){return{x:e.x-e.size/2,y:e.y-e.size/2,width:e.size,height:e.size}}))},toJSON:function(){var i,a;return r(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.points).length;t<e;t++)a=o[t],n.push([a.x,a.y]);return n}.call(this),smoothedPointCoordinatePairs:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.smoothedPoints).length;t<e;t++)a=o[t],n.push([a.x,a.y]);return n}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.points).length;t<e;t++)i=o[t],n.push(_(i));return n}.call(this)}},fromJSON:function(e){return i("LinePath",e)},addPoint:function(e){if(this.points.push(e),this.smooth)return!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=c(this.points,this.order):(this.tail=k.last(c(k.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail));this.smoothedPoints=this.points},move:function(e){var t,o,n;for(null==e&&(e={}),n=0,t=(o=this.smooth?this.smoothedPoints:this.points).length;n<t;n++)o[n].move(e);return this.points=this.smoothedPoints},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),f("ErasedLinePath",{constructor:p.constructor,toJSON:p.toJSON,addPoint:p.addPoint,getBoundingRect:p.getBoundingRect,fromJSON:function(e){return i("ErasedLinePath",e)}}),f("Point",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.size=e.size||0,this.color=e.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(e){return u("Point",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Polygon",{constructor:function(e){var t,o,n,i,a;for(null==e&&(e={}),this.points=e.points,this.fillColor=e.fillColor||"white",this.strokeColor=e.strokeColor||"black",this.strokeWidth=e.strokeWidth,this.dash=e.dash||null,null==e.isClosed&&(e.isClosed=!0),this.isClosed=e.isClosed,a=[],n=0,t=(i=this.points).length;n<t;n++)(o=i[n]).color=this.strokeColor,a.push(o.size=this.strokeWidth);return a},addPoint:function(e,t){return this.points.push(LC.createShape("Point",{x:e,y:t}))},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(e){return e.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(e){return[e.x,e.y]})}},fromJSON:function(n){return n.points=n.pointCoordinatePairs.map(function(e){var t,o;return t=e[0],o=e[1],u("Point",{x:t,y:o,size:n.strokeWidth,color:n.strokeColor})}),u("Polygon",n)},move:function(e){var t,o,n,i,a;for(null==e&&(e={}),a=[],n=0,t=(i=this.points).length;n<t;n++)o=i[n],a.push(o.move(e));return a},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),f("Text",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.v=e.v||0,this.text=e.text||"",this.color=e.color||"black",this.font=e.font||"18px sans-serif",this.forcedWidth=e.forcedWidth||null,this.forcedHeight=e.forcedHeight||null},_makeRenderer:function(e){if(e.lineHeight=1.2,this.renderer=new n(e,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1)return console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent},setText:function(e){return this.text=e,this.renderer=null},setFont:function(e){return this.font=e,this.renderer=null},setPosition:function(e,t){return this.x=e,this.y=t},setSize:function(e,t){return this.forcedWidth=Math.max(e,0),this.forcedHeight=Math.max(t,0),this.renderer=null},enforceMaxBoundingRect:function(e){var t,o,n;if(t=this.getBoundingRect(e.ctx),n={x:-e.position.x/e.scale,y:-e.position.y/e.scale,width:e.canvas.width/e.scale,height:e.canvas.height/e.scale},t.x+t.width>n.x+n.width)return o=t.x-n.x,this.forcedWidth=n.width-o-10,this.renderer=null},getBoundingRect:function(e,t){if(null==t&&(t=!1),!this.renderer){if(!e)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(e)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(e){return u("Text",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("SelectionBox",{constructor:function(e){return null==e&&(e={}),this.shape=e.shape,null!=e.handleSize?this.handleSize=e.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=e.backgroundColor||null,this._br=this.shape.getBoundingRect(e.ctx)},toJSON:function(){return{shape:_(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(e){var t,o;return o=e.shape,e.handleSize,e.margin,t=e.backgroundColor,u("SelectionBox",{shape:l(o),backgroundColor:t})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),t.exports={defineShape:f,createShape:u,JSONToShape:l,shapeToJSON:_}},{"./TextRenderer":2,"./canvasRenderer":5,"./lineEndCapShapes":8,"./svgRenderer":14,"./util":15}],14:[function(e,t,o){var n,l,i,a;l=e("./lineEndCapShapes"),a={},i=function(e,t){if(null==t&&(t={}),null==t.shouldIgnoreUnsupportedShapes&&(t.shouldIgnoreUnsupportedShapes=!1),a[e.className])return a[e.className](e);if(t.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to SVG"),"";throw"Can't render shape of type "+e.className+" to SVG"},(n=function(e,t){return a[e]=t})("Rectangle",function(e){var t,o,n,i,a,r,s,l;return i=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height,n=Math.min(i,a),r=Math.min(s,l),o=Math.max(i,a)-n,t=Math.max(s,l)-r,e.strokeWidth%2!=0&&(n+=.5,r+=.5),"<rect x='"+n+"' y='"+r+"' width='"+o+"' height='"+t+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("SelectionBox",function(e){return""}),n("Ellipse",function(e){var t,o;return o=Math.floor(e.width/2),t=Math.floor(e.height/2),"<ellipse cx='"+(e.x+o)+"' cy='"+(e.y+t)+"' rx='"+Math.abs(o)+"' ry='"+Math.abs(t)+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("Image",function(e){return"<image x='"+e.x+"' y='"+e.y+"' width='"+e.image.naturalWidth*e.scale+"' height='"+e.image.naturalHeight*e.scale+"' xlink:href='"+e.image.src+"' />"}),n("Line",function(e){var t,o,n,i,a,r,s;return n=e.dash?"stroke-dasharray='"+e.dash.join(", ")+"'":"",o="",t=Math.max(2.2*e.strokeWidth,5),i=e.x1,a=e.x2,r=e.y1,s=e.y2,e.strokeWidth%2!=0&&(i+=.5,a+=.5,r+=.5,s+=.5),e.endCapShapes[0]&&(o+=l[e.endCapShapes[0]].svg(i,r,Math.atan2(r-s,i-a),t,e.color)),e.endCapShapes[1]&&(o+=l[e.endCapShapes[1]].svg(a,s,Math.atan2(s-r,a-i),t,e.color)),"<g> <line x1='"+i+"' y1='"+r+"' x2='"+a+"' y2='"+s+"' "+n+" stroke-linecap='"+e.capStyle+"' stroke='"+e.color+" 'stroke-width='"+e.strokeWidth+"' /> "+o+" </g>"}),n("LinePath",function(e){return"<polyline fill='none' points='"+e.smoothedPoints.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.points[0].color+"' stroke-linecap='round' stroke-width='"+e.points[0].size+"' />"}),n("ErasedLinePath",function(e){return""}),n("Polygon",function(e){return e.isClosed?"<polygon fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />":"<polyline fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("Text",function(n){var e,t,o;return o=n.forcedWidth?"width='"+n.forcedWidth+"px'":"",e=n.forcedHeight?"height='"+n.forcedHeight+"px'":"",t=n.text.split(/\r\n|\r|\n/g),n.renderer&&(t=n.renderer.lines),"<text x='"+n.x+"' y='"+n.y+"' "+o+" "+e+" fill='"+n.color+"' style='font: "+n.font+";'> "+t.map(function(e,t){var o;return o=0===t?0:"1.2em","<tspan x='"+n.x+"' dy='"+o+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}).join("")+" </text>"}),t.exports={defineSVGRenderer:n,renderShapeToSVG:i}},{"./lineEndCapShapes":8}],15:[function(e,t,o){var l,s,n,r,i,d=[].slice;n=Array.prototype.slice,l=e("./canvasRenderer").renderShapeToContext,s=e("./svgRenderer").renderShapeToSVG,r={addImageOnload:function(e,t){var o;return o=e.onload,e.onload=function(){return"function"==typeof o&&o(),t()},e},last:function(e,t){return null==t&&(t=null),t?n.call(e,Math.max(e.length-t,0)):e[e.length-1]},classSet:function(e){var t,o;for(o in t=[],e)e[o]&&t.push(o);return t.join(" ")},matchElementSize:function(n,i,e,a){var t;return null==a&&(a=function(){}),t=function(){var e,t,o;for(t=0,o=i.length;t<o;t++)(e=i[t]).style.width=n.offsetWidth+"px",e.style.height=n.offsetHeight+"px",null!=e.width&&(e.setAttribute("width",n.offsetWidth),e.setAttribute("height",n.offsetHeight));return a()},n.addEventListener("resize",t),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),t(),t},combineCanvases:function(){var e,t,o,n,i,a,r,s;for(o=1<=arguments.length?d.call(arguments,0):[],(e=document.createElement("canvas")).width=o[0].width,e.height=o[0].height,i=0,r=o.length;i<r;i++)t=o[i],e.width=Math.max(t.width,e.width),e.height=Math.max(t.height,e.height);for(n=e.getContext("2d"),a=0,s=o.length;a<s;a++)t=o[a],n.drawImage(t,0,0);return e},renderShapes:function(e,t,o,n){var i,a,r,s;for(null==o&&(o=1),null==n&&(n=null),(n=n||document.createElement("canvas")).width=t.width*o,n.height=t.height*o,(i=n.getContext("2d")).translate(-t.x*o,-t.y*o),i.scale(o,o),a=0,r=e.length;a<r;a++)s=e[a],l(i,s);return n},renderShapesToSVG:function(e,t,o){var n,i,a,r;return a=t.x,r=t.y,("<svg xmlns='http://www.w3.org/2000/svg' width='"+(i=t.width)+"' height='"+(n=t.height)+"' viewBox='0 0 "+i+" "+n+"'> <rect width='"+i+"' height='"+n+"' x='0' y='0' fill='"+o+"' /> <g transform='translate("+-a+", "+-r+")'> "+e.map(s).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(e,t,o){var n,i,a,r,s,l,d;if(!e.length)return{x:0,y:0,width:t,height:o};for(s=e[0].x,l=e[0].y,a=e[0].x+e[0].width,r=e[0].y+e[0].height,n=0,i=e.length;n<i;n++)d=e[n],s=Math.floor(Math.min(d.x,s)),l=Math.floor(Math.min(d.y,l)),a=Math.ceil(Math.max(a,d.x+d.width)),r=Math.ceil(Math.max(r,d.y+d.height));return{x:s=t?0:s,y:l=o?0:l,width:(a=t||a)-s,height:(r=o||r)-l}},getDefaultImageRect:function(e,t,o){var n,i,a;return null==t&&(t={width:0,height:0}),null==o&&(o={top:0,right:0,bottom:0,left:0}),a=t.width,n=t.height,(i=r.getBoundingRect(e,"infinite"===a?0:a,"infinite"===n?0:n)).x-=o.left,i.y-=o.top,i.width+=o.left+o.right,i.height+=o.top+o.bottom,i},getBackingScale:function(e){return null==window.devicePixelRatio?1:1<window.devicePixelRatio?window.devicePixelRatio:1},getGUID:(i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}),requestAnimationFrame:function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):setTimeout(e,0)},cancelAnimationFrame:function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):clearTimeout(e)}},t.exports=r},{"./canvasRenderer":5,"./svgRenderer":14}],16:[function(e,t,o){function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}n.prototype=window.CustomEvent.prototype,window.CustomEvent=n},{}],17:[function(e,t,o){var n=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){n||(console.warn("context2D.setLineDash is a no-op in this browser."),n=!0)}),t.exports=null},{}],18:[function(e,t,o){var c,n,i,a,s,r,l,d,u,h,m,f,p,g,v,y,b;e("./ie_customevent"),e("./ie_setLineDash"),c=e("./core/LiterallyCanvas"),s=e("./core/defaultOptions"),i=e("./core/canvasRenderer"),v=e("./core/svgRenderer"),g=e("./core/shapes"),b=e("./core/util"),m=e("./core/renderSnapshotToImage"),f=e("./core/renderSnapshotToSVG"),u=e("./core/localization").localize,a={snapshotToShapes:function(e){var t,o,n,i,a;for(i=[],t=0,o=(n=e.shapes).length;t<o;t++)a=n[t],i.push(g.JSONToShape(a));return i},snapshotJSONToShapes:function(e){return a.snapshotToShapes(JSON.parse(e))}},n=e("./tools/base"),y={Pencil:e("./tools/Pencil"),Eraser:e("./tools/Eraser"),Line:e("./tools/Line"),Rectangle:e("./tools/Rectangle"),Ellipse:e("./tools/Ellipse"),Text:e("./tools/Text"),Polygon:e("./tools/Polygon"),Pan:e("./tools/Pan"),Eyedropper:e("./tools/Eyedropper"),SelectShape:e("./tools/SelectShape"),Tool:n.Tool,ToolWithStroke:n.ToolWithStroke},r=s.tools,s.imageURLPrefix,p=function(e){return e,s.imageURLPrefix=e},l=function(e,t){var o,n,i,a,r;for(a in null==t&&(t={}),s)a in t||(t[a]=s[a]);for(n=0,i=(r=e.children).length;n<i;n++)o=r[n],e.removeChild(o);return d(e,t)},d=function(n,e){var t,i,a;a=n.className,-1===[" "," "].join(n.className).indexOf(" literally ")&&(n.className=n.className+" literally"),n.className=n.className+" toolbar-hidden",(t=document.createElement("div")).className="lc-drawing",n.appendChild(t);var o=document.createElement("div");o.className="custom-canvas-background",o.id="customCanvasView",t.appendChild(o);var r=document.createElement("div");r.className="draw-permission",n.appendChild(r);var s=document.createElement("div");s.className="temporary-draw-permission",n.appendChild(s);var l=document.createElement("span");l.className="laser-mark",n.appendChild(l);var d=document.createElement("div");return d.className="literally-data-loading-wrap",d.style.zIndex=100,d.style.display="none",n.appendChild(d),(i=new c(t,e)).customCanvasBackgroundElement=o,i.loadingElement=d,i.watermarkImageToLcBackground=void 0===e.watermarkImageToLcBackground||e.watermarkImageToLcBackground,t.setAttribute("watermarkImageToLcBackground",i.watermarkImageToLcBackground),i.isDrawAble?(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" yes"):(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" no"),i.isTmpDrawAble?(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" yes"):(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" no"),i.teardown=function(){var e,t,o;try{for(i._teardown(),t=(o=n.children).length-1;0<=t;t--)(e=o[t])&&n.removeChild(e);return n.className=a}catch(e){return void console.error("tk_lc error:",e)}},"onInit"in e&&e.onInit(i),i},h=function(e){return e.fn.literallycanvas=function(o){return null==o&&(o={}),this.each(function(e,t){return t.literallycanvas=l(t,o)}),this}},"undefined"!=typeof window&&(window.LC={init:l},window.$&&h(window.$)),t.exports={init:l,registerJQueryPlugin:h,util:b,tools:y,setDefaultImageURLPrefix:p,defaultTools:r,defineShape:g.defineShape,createShape:g.createShape,JSONToShape:g.JSONToShape,shapeToJSON:g.shapeToJSON,defineCanvasRenderer:i.defineCanvasRenderer,renderShapeToContext:i.renderShapeToContext,renderShapeToCanvas:i.renderShapeToCanvas,renderShapesToCanvas:b.renderShapes,defineSVGRenderer:v.defineSVGRenderer,renderShapeToSVG:v.renderShapeToSVG,renderShapesToSVG:b.renderShapesToSVG,snapshotToShapes:a.snapshotToShapes,snapshotJSONToShapes:a.snapshotJSONToShapes,renderSnapshotToImage:m,renderSnapshotToSVG:f,localize:u}},{"./core/LiterallyCanvas":1,"./core/canvasRenderer":5,"./core/defaultOptions":6,"./core/localization":9,"./core/renderSnapshotToImage":11,"./core/renderSnapshotToSVG":12,"./core/shapes":13,"./core/svgRenderer":14,"./core/util":15,"./ie_customevent":16,"./ie_setLineDash":17,"./tools/Ellipse":19,"./tools/Eraser":20,"./tools/Eyedropper":21,"./tools/Line":22,"./tools/Pan":23,"./tools/Pencil":24,"./tools/Polygon":25,"./tools/Rectangle":26,"./tools/SelectShape":27,"./tools/Text":28,"./tools/base":29}],19:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Ellipse",r.prototype.iconName="ellipse",r.prototype.begin=function(e,t,o){return this.currentShape=i("Ellipse",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},r.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],20:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./Pencil"),i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Eraser",r.prototype.iconName="eraser",r.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:"#000"})},r.prototype.makeShape=function(){return i("ErasedLinePath")},r)},{"../core/shapes":13,"./Pencil":24}],21:[function(e,t,o){var n,r,i={}.hasOwnProperty;function a(e){a.__super__.constructor.call(this,e),this.strokeOrFill="stroke"}n=e("./base").Tool,r=function(e,t){var o,n,i;return n=t.x,i=t.y,(o=e.getImageData(n,i,1,1).data)[3]?"rgb("+o[0]+", "+o[1]+", "+o[2]+")":null},t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="Eyedropper",a.prototype.iconName="eyedropper",a.prototype.optionsStyle="stroke-or-fill",a.prototype.readColor=function(e,t,o){var n,i,a;return a=o.getDefaultImageRect(),n=o.getImage(),(i=r(n.getContext("2d"),{x:e-a.x,y:t-a.y}))||o.getColor("background"),"stroke"===this.strokeOrFill?o.setColor("primary",i):o.setColor("secondary",i)},a.prototype.begin=function(e,t,o){return this.readColor(e,t,o)},a.prototype.continue=function(e,t,o){return this.readColor(e,t,o)},a)},{"./base":29}],22:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Line",r.prototype.iconName="line",r.prototype.optionsStyle="line-options-and-stroke-width",r.prototype.begin=function(e,t,o){return this.currentShape=i("Line",{x1:e,y1:t,x2:e,y2:t,strokeWidth:this.strokeWidth,dash:function(){switch(!1){case!this.isDashed:return[2*this.strokeWidth,4*this.strokeWidth];default:return null}}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:o.getColor("primary")})},r.prototype.continue=function(e,t,o){return this.currentShape.x2=e,this.currentShape.y2=t,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],23:[function(e,t,o){var n,i={}.hasOwnProperty;function a(){return a.__super__.constructor.apply(this,arguments)}n=e("./base").Tool,e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="Pan",a.prototype.iconName="pan",a.prototype.usesSimpleAPI=!1,a.prototype.didBecomeActive=function(i){var a,n,r;return a=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=a.length;t<o;t++)e=a[t],n.push(e());return n},a.push(i.on("lc-pointerdown",(n=this,function(e){var t,o;return t=e.rawX,o=e.rawY,n.oldPosition=i.position,n.pointerStart={x:t,y:o}}))),a.push(i.on("lc-pointerdrag",(r=this,function(e){var t,o,n;return o=e.rawX,n=e.rawY,t={x:(o-r.pointerStart.x)*i.backingScale,y:(n-r.pointerStart.y)*i.backingScale},i.setPan(r.oldPosition.x+t.x,r.oldPosition.y+t.y)})))},a.prototype.willBecomeInactive=function(e){return this.unsubscribe()},a)},{"../core/shapes":13,"./base":29}],24:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Pencil",r.prototype.iconName="pencil",r.prototype.eventTimeThreshold=10,r.prototype.begin=function(e,t,o){return this.color=o.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(e,t,o)),this.lastEventTime=Date.now()},r.prototype.continue=function(e,t,o){var n;if((n=Date.now()-this.lastEventTime)>this.eventTimeThreshold)return this.lastEventTime+=n,this.currentShape.addPoint(this.makePoint(e,t,o)),o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape),this.currentShape=void 0},r.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:this.color})},r.prototype.makeShape=function(){return i("LinePath")},r)},{"../core/shapes":13,"./base":29}],25:[function(e,t,o){var n,i,a={}.hasOwnProperty;function p(){return p.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(p,n),p.prototype.name="Polygon",p.prototype.iconName="polygon",p.prototype.usesSimpleAPI=!1,p.prototype.didBecomeActive=function(n){var e,t,o,i,a,r,s,l,d,c,u,h,m,f;return p.__super__.didBecomeActive.call(this,n),s=[],this.polygonUnsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=s.length;t<o;t++)e=s[t],n.push(e());return n},this.points=null,this.maybePoint=null,o=function(){return l._getWillFinish()?l._close(n):(n.trigger("lc-polygon-started"),l.points?l.points.push(l.maybePoint):l.points=[l.maybePoint],l.maybePoint={x:l.maybePoint.x,y:l.maybePoint.y},n.setShapesInProgress(l._getShapes(n)),n.repaintLayer("main"))},t=function(e){var t,o;if(t=e.x,o=e.y,d.maybePoint)return d.maybePoint.x=t,d.maybePoint.y=o,n.setShapesInProgress(d._getShapes(n)),n.repaintLayer("main")},e=function(e){var t,o;return t=e.x,o=e.y,c.maybePoint={x:t,y:o},n.setShapesInProgress(c._getShapes(n)),n.repaintLayer("main")},r=function(){return u.maybePoint={x:1/0,y:1/0},u._close(n)},a=function(){return h.maybePoint=h.points[0],h._close(n)},m=h=u=c=d=l=this,i=function(){return m._cancel(n)},s.push(n.on("drawingChange",(f=this,function(){return f._cancel(n)}))),s.push(n.on("lc-pointerdown",e)),s.push(n.on("lc-pointerdrag",t)),s.push(n.on("lc-pointermove",t)),s.push(n.on("lc-pointerup",o)),s.push(n.on("lc-polygon-finishopen",r)),s.push(n.on("lc-polygon-finishclosed",a)),s.push(n.on("lc-polygon-cancel",i))},p.prototype.willBecomeInactive=function(e){return p.__super__.willBecomeInactive.call(this,e),(this.points||this.maybePoint)&&this._cancel(e),this.polygonUnsubscribe()},p.prototype._getArePointsClose=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)<10},p.prototype._getWillClose=function(){return!!(this.points&&1<this.points.length)&&!!this.maybePoint&&this._getArePointsClose(this.points[0],this.maybePoint)},p.prototype._getWillFinish=function(){return!!(this.points&&1<this.points.length)&&!!this.maybePoint&&(this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint))},p.prototype._cancel=function(e){return e.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,e.setShapesInProgress([]),e.repaintLayer("main")},p.prototype._close=function(e){return e.trigger("lc-polygon-stopped"),e.setShapesInProgress([]),2<this.points.length&&e.saveShape(this._getShape(e,!1)),this.maybePoint=null,this.points=null},p.prototype._getShapes=function(e,t){var o;return null==t&&(t=!0),(o=this._getShape(e,t))?[o]:[]},p.prototype._getShape=function(e,t){var o;return null==t&&(t=!0),o=[],this.points&&(o=o.concat(this.points)),!t&&o.length<3?null:(t&&this.maybePoint&&o.push(this.maybePoint),1<o.length?i("Polygon",{isClosed:this._getWillClose(),strokeColor:e.getColor("primary"),fillColor:e.getColor("secondary"),strokeWidth:this.strokeWidth,points:o.map(function(e){return i("Point",e)})}):null)},p.prototype.optionsStyle="polygon-and-stroke-width",p)},{"../core/shapes":13,"./base":29}],26:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){return r.__super__.constructor.apply(this,arguments)}n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(r,n),r.prototype.name="Rectangle",r.prototype.iconName="rectangle",r.prototype.begin=function(e,t,o){return this.currentShape=i("Rectangle",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},r.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},r.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},r)},{"../core/shapes":13,"./base":29}],27:[function(e,t,o){var n,l,i={}.hasOwnProperty;function a(e){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}n=e("./base").Tool,l=e("../core/shapes").createShape,t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="SelectShape",a.prototype.usesSimpleAPI=!1,a.prototype.didBecomeActive=function(a){var e,t,o,i,r,n,s;return i=[],this._selectShapeUnsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},e=function(e){var t,o,n,i;if(n=e.x,i=e.y,r.didDrag=!1,o=r._getPixel(n,i,a,r.selectCtx),r.selectedShape=a.shapes[o],null!=r.selectedShape)return a.trigger("shapeSelected",{selectedShape:r.selectedShape}),a.setShapesInProgress([r.selectedShape,l("SelectionBox",{shape:r.selectedShape,handleSize:0})]),a.repaintLayer("main"),t=r.selectedShape.getBoundingRect(),r.dragOffset={x:n-t.x,y:i-t.y}},t=function(e){var t,o;if(t=e.x,o=e.y,null!=n.selectedShape)return n.didDrag=!0,n.selectedShape.setUpperLeft({x:t-n.dragOffset.x,y:o-n.dragOffset.y}),a.setShapesInProgress([n.selectedShape,l("SelectionBox",{shape:n.selectedShape,handleSize:0})]),a.repaintLayer("main")},s=n=r=this,o=function(e){if(e.x,e.y,s.didDrag)return s.didDrag=!1,a.trigger("shapeMoved",{shape:s.selectedShape}),a.trigger("drawingChange",{}),a.repaintLayer("main"),s._drawSelectCanvas(a)},i.push(a.on("lc-pointerdown",e)),i.push(a.on("lc-pointerdrag",t)),i.push(a.on("lc-pointerup",o)),this._drawSelectCanvas(a)},a.prototype.willBecomeInactive=function(e){return this._selectShapeUnsubscribe(),e.setShapesInProgress([])},a.prototype._drawSelectCanvas=function(e){var t,o;return this.selectCanvas.width=e.canvas.width,this.selectCanvas.height=e.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),t=e.shapes.map((o=this,function(e,t){return l("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+o._intToHex(t)})})),e.draw(t,this.selectCtx)},a.prototype._intToHex=function(e){return("000000"+e.toString(16)).slice(-6)},a.prototype._getPixel=function(e,t,o,n){var i,a;return i=o.drawingCoordsToClientCoords(e,t),(a=n.getImageData(i.x,i.y,1,1).data)[3]?parseInt(this._rgbToHex(a[0],a[1],a[2]),16):null},a.prototype._componentToHex=function(e){return("0"+e.toString(16)).slice(-2)},a.prototype._rgbToHex=function(e,t,o){return""+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(o)},a)},{"../core/shapes":13,"./base":29}],28:[function(e,t,o){var n,r,s,i={}.hasOwnProperty;function a(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}n=e("./base").Tool,r=e("../core/shapes").createShape,s=function(e,t){return!(e.x<t.x)&&(!(e.y<t.y)&&(!(e.x>t.x+t.width)&&!(e.y>t.y+t.height)))},t.exports=(function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,n),a.prototype.name="Text",a.prototype.iconName="text",a.prototype.didBecomeActive=function(t){var i,e,o,n,a,r;return i=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},o=this,e=function(){return o._updateInputEl(t)},i.push(t.on("zoom",e)),i.push(t.on("imageSizeChange",e)),i.push(t.on("snapshotLoad",(n=this,function(){return n._clearCurrentShape(t),t.repaintLayer("main")}))),i.push(t.on("primaryColorChange",(a=this,function(e){if(a.currentShape)return a.currentShape.color=e,a._updateInputEl(t),t.repaintLayer("main")}))),i.push(t.on("setFont",(r=this,function(e){if(r.currentShape)return r.font=e,r.currentShape.setFont(e),r._setShapesInProgress(t),r._updateInputEl(t),t.repaintLayer("main")})))},a.prototype.willBecomeInactive=function(e){return this.currentShape&&(this._ensureNotEditing(e),this.commit(e)),this.unsubscribe()},a.prototype.setText=function(e){return this.text=e},a.prototype._ensureNotEditing=function(e){if("editing"===this.currentShapeState)return this._exitEditingState(e)},a.prototype._clearCurrentShape=function(e){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,e.setShapesInProgress([])},a.prototype.commit=function(e){return this.currentShape.text&&e.saveShape(this.currentShape),this._clearCurrentShape(e),e.repaintLayer("main")},a.prototype._getSelectionShape=function(e,t){return null==t&&(t=null),r("SelectionBox",{shape:this.currentShape,ctx:e,backgroundColor:t})},a.prototype._setShapesInProgress=function(e){switch(this.currentShapeState){case"selected":return e.setShapesInProgress([this._getSelectionShape(e.ctx),this.currentShape]);case"editing":return e.setShapesInProgress([this._getSelectionShape(e.ctx,"#fff")]);default:return e.setShapesInProgress([this.currentShape])}},a.prototype.begin=function(e,t,o){var n,i,a;if(this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(n=this.currentShape.getBoundingRect(o.ctx),(a=this._getSelectionShape(o.ctx)).getBoundingRect(),s(i={x:e,y:t},n)&&(this.dragAction="move"),s(i,a.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),s(i,a.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),s(i,a.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),s(i,a.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(o))):(this.color=o.getColor("primary"),this.currentShape=r("Text",{x:e,y:t,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"!==this.dragAction)return this.initialShapeBoundingRect=this.currentShape.getBoundingRect(o.ctx),this.dragOffset={x:e-this.initialShapeBoundingRect.x,y:t-this.initialShapeBoundingRect.y},this._setShapesInProgress(o),o.repaintLayer("main");this.commit(o)},a.prototype.continue=function(e,t,o){var n,i,a;if("none"!==this.dragAction){switch(a=(n=this.initialShapeBoundingRect).x+n.width,i=n.y+n.height,this.dragAction){case"place":this.currentShape.x=e,this.currentShape.y=t,this.didDrag=!0;break;case"move":this.currentShape.x=e-this.dragOffset.x,this.currentShape.y=t-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y);break;case"resizeTopLeft":this.currentShape.setSize(a-e+this.dragOffset.x,i-t+this.dragOffset.y),this.currentShape.setPosition(e-this.dragOffset.x,t-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(a-e+this.dragOffset.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y),this.currentShape.setPosition(e-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,i-t+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,t-this.dragOffset.y)}return this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)}},a.prototype.end=function(e,t,o){if(this.currentShape)return this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"!==this.dragAction&&("move"!==this.dragAction||this.didDrag)||this._enterEditingState(o)),this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)},a.prototype._enterEditingState=function(t){var e,o,n;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(e){return e.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(e){return e.stopPropagation()}),e=function(e){return o.currentShape.setText(e.target.value),o.currentShape.enforceMaxBoundingRect(t),o._setShapesInProgress(t),t.repaintLayer("main"),o._updateInputEl(t),e.stopPropagation()},(o=this).inputEl.addEventListener("keydown",(n=this,function(){return n._updateInputEl(t,!0)})),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},a.prototype._exitEditingState=function(e){return this.currentShapeState="selected",e.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(e),e.repaintLayer("main")},a.prototype._updateInputEl=function(e,t){var o,n;if(null==t&&(t=!1),this.inputEl)return o=this.currentShape.getBoundingRect(e.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=e.position.x/e.backingScale+o.x*e.scale-4+"px",this.inputEl.style.top=e.position.y/e.backingScale+o.y*e.scale-4+"px",t&&!this.currentShape.forcedWidth?this.inputEl.style.width=o.width+10+this.currentShape.renderer.emDashWidth+"px":this.inputEl.style.width=o.width+12+"px",this.inputEl.style.height=t?o.height+10+this.currentShape.renderer.metrics.leading+"px":o.height+10+"px",n="scale("+e.scale+")",this.inputEl.style.transform=n,this.inputEl.style.webkitTransform=n,this.inputEl.style.MozTransform=n,this.inputEl.style.msTransform=n,this.inputEl.style.OTransform=n},a.prototype.optionsStyle="font",a)},{"../core/shapes":13,"./base":29}],29:[function(e,t,o){var n,i,a={}.hasOwnProperty;function r(){}function s(e){this.strokeWidth=e.opts.defaultStrokeWidth}(i={}).Tool=(r.prototype.name=null,r.prototype.iconName=null,r.prototype.usesSimpleAPI=!0,r.prototype.begin=function(e,t,o){},r.prototype.continue=function(e,t,o){},r.prototype.end=function(e,t,o){},r.prototype.optionsStyle=null,r.prototype.didBecomeActive=function(e){},r.prototype.willBecomeInactive=function(e){},n=r),i.ToolWithStroke=(function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(s,n),s.prototype.optionsStyle="stroke-width",s.prototype.didBecomeActive=function(t){var i,o;return i=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},i.push(t.on("setStrokeWidth",(o=this,function(e){return o.strokeWidth=e,t.trigger("toolDidUpdateOptions")})))},s.prototype.willBecomeInactive=function(e){return this.unsubscribe()},s),t.exports=i},{}]},{},[18])(18)}),window.TalkSlider=function(m){var e={},f="",p="",g="",t="",o="",n="",h=!1,v=100,a=100,i=document.getElementById(m.sliderContainer.id);i.classList.add("custom-tk-volume-slider-container"),m.sliderContainer&&"vertikal"===m.sliderContainer.direction&&i.classList.add("vertikal"),(p=document.createElement("div")).classList.add("custom-tk-rc-slider","custom-tk-slider","custom-tk-detection-device"),"vertikal"===m.sliderContainer.direction&&p.classList.add("vertikal"),(n=document.createElement("div")).classList.add("custom-tk-rc-slider-rail"),"vertikal"===m.sliderContainer.direction&&n.classList.add("vertikal"),(g=document.createElement("div")).classList.add("custom-tk-rc-slider-track"),"vertikal"===m.sliderContainer.direction&&g.classList.add("vertikal"),(t=document.createElement("div")).classList.add("custom-tk-rc-slider-step"),"vertikal"===m.sliderContainer.direction&&t.classList.add("vertikal"),(f=document.createElement("div")).classList.add("custom-tk-rc-slider-handle"),"vertikal"===m.sliderContainer.direction&&f.classList.add("vertikal"),(o=document.createElement("div")).classList.add("custom-tk-rc-slider-mark"),"vertikal"===m.sliderContainer.direction&&o.classList.add("vertikal"),p.appendChild(n),p.appendChild(g),p.appendChild(t),p.appendChild(f),p.appendChild(o),i.appendChild(p);var y=document,b=window,_=Math;return p.onmousedown=function(e){if(h=!0,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(a);var t=(e||b.event).clientY,o=p.offsetHeight;100<(a=_.round((p.getBoundingClientRect().bottom-t)/o*100))?a=100:a<0&&(a=0),f.style.bottom=a+"%",g.style.height=a+"%",p.onmouseup=function(e){return h&&m.onAfterChange&&m.onAfterChange(a),e&&(e.preventDefault(),e.stopPropagation()),!1}}else{m.onBeforeChange&&m.onBeforeChange(a);var n=(e||b.event).clientX,i=p.offsetWidth;100<(a=_.round((n-p.getBoundingClientRect().left)/i*100))?a=100:a<0&&(a=0),f.style.left=a+"%",g.style.width=a+"%",p.onmouseup=function(){h&&m.onAfterChange&&m.onAfterChange(a)}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onclick=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onmousedown=function(e){var n=!1;if("vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var i=(e||b.event).clientY,a=f.offsetTop,r=p.offsetHeight,s=f.offsetHeight,l=r-(h=r-s);document.onmousemove=function(e){var t=(e||b.event).clientY,o=_.min(h,_.max(-s,a+(t-i)));100<(v=100-_.round((o+l)/r*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),n=!0},document.onmouseup=function(){document.onmousemove=null,m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}else{m.onBeforeChange&&n&&m.onBeforeChange(v);var d=(e||b.event).clientX,c=(a=f.offsetLeft,p.offsetWidth),u=f.offsetWidth,h=p.offsetWidth-this.offsetWidth;l=c-h;document.onmousemove=function(e){var t=(e||b.event).clientX,o=_.min(h,_.max(-u,a+(t-d)));100<(v=_.round((o+l)/c*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),n=!0},document.onmouseup=function(){document.onmousemove=null,n&&m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.ontouchstart=function(e){if(h=!1,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var n=(e||b.event).touches[0].clientY,i=f.offsetTop,a=p.offsetHeight,r=f.offsetHeight,s=a-(u=a-r);document.ontouchmove=function(e){var t=(e||b.event).touches[0].clientY,o=_.min(u,_.max(-r,i+(t-n)));100<(v=100-_.round((o+s)/a*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}else{m.onBeforeChange&&m.onBeforeChange(v);var l=(e||b.event).touches[0].clientX,d=(i=f.offsetLeft,p.offsetWidth),c=f.offsetWidth,u=p.offsetWidth-this.offsetWidth;s=d-u;f.ontouchmove=function(e){var t=(e||b.event).touches[0].clientX,o=_.min(u,_.max(-c,i+(t-l)));100<(v=_.round((o+s)/d*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},e.setProgress=function(e){void 0!==e&&("vertikal"===m.sliderContainer.direction?(f.style.bottom=e+"%",g.style.height=e+"%"):(f.style.left=e+"%",g.style.width=e+"%"))},e},window.TalkDrag=function(e,l){var d=this;if((l=l||{}).containerData=l.containerData||{},d.flag=!1,d.element=e,d.leftPercent=void 0!==l.containerData.left?l.containerData.left/100:0,d.topPercent=void 0!==l.containerData.top?l.containerData.top/100:0,d.disabled=void 0!==l.disabled&&l.disabled,"string"==typeof e&&(d.element=document.getElementById(e)),d.element)return void 0!==l.containerData.parentNodeID?(d.containerElement=l.containerData.parentNodeID,"string"==typeof l.containerData.parentNodeID&&(d.containerElement=document.getElementById(l.containerData.parentNodeID))):d.containerElement=d.element.parentNode,d.containerElement&&(d.containerElement.className=d.containerElement.className.replace("talk-cloud-drag-parent-container","")+" talk-cloud-drag-parent-container "),d.cur={x:0,y:0},d.updateDisabled=function(e){d.disabled=e},d.destroy=function(){window.removeEventListener("resize",d.resizeCallback,!1),d.element.removeEventListener("mousedown",d.mousedownOrTouchstartCallback,!1),d.element.removeEventListener("touchstart",d.mousedownOrTouchstartCallback,!1),d.element.removeEventListener("touchmove",d.mousemoveOrTouchmoveEventCallback,!1),d.element.removeEventListener("touchend",d.mouseupOrTouchendEventCallback,!1),document.documentElement.removeEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1)},d.resize=function(){d.element.style.left=(d.containerElement.offsetWidth-d.element.offsetWidth)*d.leftPercent+"px",d.element.style.top=(d.containerElement.offsetHeight-d.element.offsetHeight)*d.topPercent+"px"},d.setPosition=function(e,t){d.leftPercent=e/100,d.topPercent=t/100,d.element.style.left=(d.containerElement.offsetWidth-d.element.offsetWidth)*d.leftPercent+"px",d.element.style.top=(d.containerElement.offsetHeight-d.element.offsetHeight)*d.topPercent+"px"},d.down=function(e){var t;"mousedown"===e.type&&(document.documentElement.addEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.addEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1)),d.element.setAttribute("talkDragState","onBeforeDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onBeforeDrag"),d.flag=!0,t=e.touches?e.touches[0]:e,d.cur.x=t.clientX,d.cur.y=t.clientY,d.dx=d.element.offsetLeft,d.dy=d.element.offsetTop,"mousedown"===e.type?l.onBeforeDrag&&l.onBeforeDrag(100*d.leftPercent,100*d.topPercent):"touchstart"===e.type&&(d.flag=!1,clearTimeout(d.downTimer),d.downTimer=setTimeout(function(){d.flag=!0,d.element.style.pointerEvents="none",d.element.style.boxShadow="0 0 0.2rem 0.05rem #222",d.element.style.transform="scale(1.05)",l.onBeforeDrag&&l.onBeforeDrag(100*d.leftPercent,100*d.topPercent)},500))},d.move=function(e){if("touchmove"===e.type){var t=Math.abs(e.touches[0].clientX-d.cur.x),o=Math.abs(e.touches[0].clientY-d.cur.y);40<=Math.hypot(t,o)&&(clearTimeout(d.downTimer),d.downTimer=void 0)}if(d.flag){var n;d.element.setAttribute("talkDragState","onDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onDrag"),n=e.touches?e.touches[0]:e,l.onDrag&&l.onDrag(100*d.leftPercent,100*d.topPercent);var i=d.containerElement.offsetWidth-d.element.offsetWidth,a=d.containerElement.offsetHeight-d.element.offsetHeight;d.nx=n.clientX-d.cur.x,d.ny=n.clientY-d.cur.y;var r=d.dx+d.nx,s=d.dy+d.ny;r=Math.min(Math.max(0,r),i),s=Math.min(Math.max(0,s),a);d.element.style.left=r+"px",d.element.style.top=s+"px",d.leftPercent=r/(d.containerElement.offsetWidth-d.element.offsetWidth),d.topPercent=s/(d.containerElement.offsetHeight-d.element.offsetHeight)}},d.end=function(e){var t=!1;if("mouseup"===e.type&&(document.documentElement.removeEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1),t=!0),"touchend"===e.type){clearTimeout(d.downTimer),d.downTimer=void 0,d.flag=!1;var o=setTimeout(function(){d.element.style.pointerEvents="auto",d.element.style.boxShadow="0 0 0 0 #222",d.element.style.transform="scale(1)",clearTimeout(o)},500)}!d.flag&&t||(d.element.setAttribute("talkDragState","onAfterDrag"),d.containerElement&&d.containerElement.setAttribute("talkDragParentState","onAfterDrag"),d.flag=!1,l.onAfterDrag&&l.onAfterDrag(100*d.leftPercent,100*d.topPercent)),t||(document.documentElement.removeEventListener("mousemove",d.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",d.mouseupOrTouchendEventCallback,!1))},d.resizeCallback=function(e){d.resize()},d.mousedownOrTouchstartCallback=function(e){if(d.flag||!d.disabled){try{d.down(e)}catch(e){console.error(e)}return!1}},d.mousemoveOrTouchmoveEventCallback=function(e){if(d.flag||!d.disabled){try{d.move(e)}catch(e){console.error(e)}return!1}},d.mouseupOrTouchendEventCallback=function(e){if(d.flag||!d.disabled){try{d.end(e)}catch(e){console.error(e)}return!1}},window.addEventListener("resize",d.resizeCallback,!1),d.element.addEventListener("mousedown",d.mousedownOrTouchstartCallback,!1),d.element.addEventListener("touchstart",d.mousedownOrTouchstartCallback,!1),d.element.addEventListener("touchmove",d.mousemoveOrTouchmoveEventCallback,!1),d.element.addEventListener("touchend",d.mouseupOrTouchendEventCallback,!1),d.element.setAttribute("talkDrag","true"),d.resize(),d;console.error("parameter elementId cannot find a node!")},function a(r,s,l){function d(t,e){if(!s[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};r[t][0].call(i.exports,function(e){return d(r[t][1][e]||e)},i,i.exports,a,r,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)d(l[e]);return d}({1:[function(o,e,t){(function(e){if(o("core-js/shim"),o("regenerator-runtime/runtime"),o("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,o){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:o})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":3,"core-js/shim":331,"regenerator-runtime/runtime":2}],2:[function(e,A,t){(function(e){!function(e){var l,t=Object.prototype,d=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",n=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",r="object"==typeof A,s=e.regeneratorRuntime;if(s)r&&(A.exports=s);else{(s=e.regeneratorRuntime=r?A.exports:{}).wrap=b;var c="suspendedStart",u="suspendedYield",h="executing",m="completed",f={},p={};p[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==t&&d.call(v,i)&&(p=v);var y=S.prototype=w.prototype=Object.create(p);k.prototype=y.constructor=S,S.constructor=k,S[a]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(y),e},s.awrap=function(e){return{__await:e}},P(I.prototype),I.prototype[n]=function(){return this},s.AsyncIterator=I,s.async=function(e,t,o,n){var i=new I(b(e,t,o,n));return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},P(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(o){var n=[];for(var e in o)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in o)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=E,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&d.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var n=this;function e(e,t){return a.type="throw",a.arg=o,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var r=d.call(i,"catchLoc"),s=d.call(i,"finallyLoc");if(r&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;0<=o;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&d.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),T(o),f}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var i=n.arg;T(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:E(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=l),f}}}function b(e,t,o,n){var i=t&&t.prototype instanceof w?t:w,a=Object.create(i.prototype),r=new D(n||[]);return a._invoke=function(a,r,s){var l=c;return function(e,t){if(l===h)throw new Error("Generator is already running");if(l===m){if("throw"===e)throw t;return L()}for(s.method=e,s.arg=t;;){var o=s.delegate;if(o){var n=x(o,s);if(n){if(n===f)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===c)throw l=m,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=h;var i=_(a,r,s);if("normal"===i.type){if(l=s.done?m:u,i.arg===f)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=m,s.method="throw",s.arg=i.arg)}}}(e,o,r),a}function _(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}function w(){}function k(){}function S(){}function P(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(s){function l(e,t,o,n){var i=_(s[e],s,t);if("throw"!==i.type){var a=i.arg,r=a.value;return r&&"object"==typeof r&&d.call(r,"__await")?Promise.resolve(r.__await).then(function(e){l("next",e,o,n)},function(e){l("throw",e,o,n)}):Promise.resolve(r).then(function(e){a.value=e,o(a)},n)}n(i.arg)}var t;"object"==typeof e.process&&e.process.domain&&(l=e.process.domain.bind(l)),this._invoke=function(o,n){function e(){return new Promise(function(e,t){l(o,n,e,t)})}return t=t?t.then(e,e):e()}}function x(e,t){var o=e.iterator[t.method];if(o===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,x(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=_(o,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(d.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=l,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:l,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":25,"../../modules/core.regexp.escape":133}],4:[function(e,t,o){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,o){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":20}],6:[function(e,t,o){var n=e("./_wks")("unscopables"),i=Array.prototype;null==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":45,"./_wks":131}],7:[function(e,t,o){var n=e("./_string-at")(!0);t.exports=function(e,t,o){return t+(o?n(e,t).length:1)}},{"./_string-at":108}],8:[function(e,t,o){t.exports=function(e,t,o,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(o+": incorrect invocation!");return e}},{}],9:[function(e,t,o){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":54}],10:[function(e,t,o){var c=e("./_to-object"),u=e("./_to-absolute-index"),h=e("./_to-length");t.exports=[].copyWithin||function(e,t,o){var n=c(this),i=h(n.length),a=u(e,i),r=u(t,i),s=2<arguments.length?o:void 0,l=Math.min((void 0===s?i:u(s,i))-r,i-a),d=1;for(r<a&&a<r+l&&(d=-1,r+=l-1,a+=l-1);0<l--;)r in n?n[a]=n[r]:delete n[a],a+=d,r+=d;return n}},{"./_to-absolute-index":116,"./_to-length":120,"./_to-object":121}],11:[function(e,t,o){var d=e("./_to-object"),c=e("./_to-absolute-index"),u=e("./_to-length");t.exports=function(e,t,o){for(var n=d(this),i=u(n.length),a=arguments.length,r=c(1<a?t:void 0,i),s=2<a?o:void 0,l=void 0===s?i:c(s,i);r<l;)n[r++]=e;return n}},{"./_to-absolute-index":116,"./_to-length":120,"./_to-object":121}],12:[function(e,t,o){var n=e("./_for-of");t.exports=function(e,t){var o=[];return n(e,!1,o.push,o,t),o}},{"./_for-of":41}],13:[function(e,t,o){var l=e("./_to-iobject"),d=e("./_to-length"),c=e("./_to-absolute-index");t.exports=function(s){return function(e,t,o){var n,i=l(e),a=d(i.length),r=c(o,a);if(s&&t!=t){for(;r<a;)if((n=i[r++])!=n)return!0}else for(;r<a;r++)if((s||r in i)&&i[r]===t)return s||r||0;return!s&&-1}}},{"./_to-absolute-index":116,"./_to-iobject":119,"./_to-length":120}],14:[function(e,t,o){var b=e("./_ctx"),_=e("./_iobject"),w=e("./_to-object"),k=e("./_to-length"),n=e("./_array-species-create");t.exports=function(u,e){var h=1==u,m=2==u,f=3==u,p=4==u,g=6==u,v=5==u||g,y=e||n;return function(e,t,o){for(var n,i,a=w(e),r=_(a),s=b(t,o,3),l=k(r.length),d=0,c=h?y(e,l):m?y(e,0):void 0;d<l;d++)if((v||d in r)&&(i=s(n=r[d],d,a),u))if(h)c[d]=i;else if(i)switch(u){case 3:return!0;case 5:return n;case 6:return d;case 2:c.push(n)}else if(p)return!1;return g?-1:f||p?p:c}}},{"./_array-species-create":17,"./_ctx":27,"./_iobject":50,"./_to-length":120,"./_to-object":121}],15:[function(e,t,o){var c=e("./_a-function"),u=e("./_to-object"),h=e("./_iobject"),m=e("./_to-length");t.exports=function(e,t,o,n,i){c(t);var a=u(e),r=h(a),s=m(a.length),l=i?s-1:0,d=i?-1:1;if(o<2)for(;;){if(l in r){n=r[l],l+=d;break}if(l+=d,i?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<s;l+=d)l in r&&(n=t(n,r[l],l,a));return n}},{"./_a-function":4,"./_iobject":50,"./_to-length":120,"./_to-object":121}],16:[function(e,t,o){var n=e("./_is-object"),i=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":52,"./_is-object":54,"./_wks":131}],17:[function(e,t,o){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":16}],18:[function(e,t,o){var a=e("./_a-function"),r=e("./_is-object"),s=e("./_invoke"),l=[].slice,d={};t.exports=Function.bind||function(t){var o=a(this),n=l.call(arguments,1),i=function(){var e=n.concat(l.call(arguments));return this instanceof i?function(e,t,o){if(!(t in d)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";d[t]=Function("F,a","return new F("+n.join(",")+")")}return d[t](e,o)}(o,e.length,e):s(o,e,t)};return r(o.prototype)&&(i.prototype=o.prototype),i}},{"./_a-function":4,"./_invoke":49,"./_is-object":54}],19:[function(e,t,o){var i=e("./_cof"),a=e("./_wks")("toStringTag"),r="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,o,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?o:r?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},{"./_cof":20,"./_wks":131}],20:[function(e,t,o){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],21:[function(e,t,o){function r(e,t){var o,n=f(t);if("F"!==n)return e._i[n];for(o=e._f;o;o=o.n)if(o.k==t)return o}var s=e("./_object-dp").f,l=e("./_object-create"),d=e("./_redefine-all"),c=e("./_ctx"),u=e("./_an-instance"),h=e("./_for-of"),n=e("./_iter-define"),i=e("./_iter-step"),a=e("./_set-species"),m=e("./_descriptors"),f=e("./_meta").fastKey,p=e("./_validate-collection"),g=m?"_s":"size";t.exports={getConstructor:function(e,a,o,n){var i=e(function(e,t){u(e,i,a,"_i"),e._t=a,e._i=l(null),e._f=void 0,e._l=void 0,e[g]=0,null!=t&&h(t,o,e[n],e)});return d(i.prototype,{clear:function(){for(var e=p(this,a),t=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete t[o.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var t=p(this,a),o=r(t,e);if(o){var n=o.n,i=o.p;delete t._i[o.i],o.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==o&&(t._f=n),t._l==o&&(t._l=i),t[g]--}return!!o},forEach:function(e,t){p(this,a);for(var o,n=c(e,1<arguments.length?t:void 0,3);o=o?o.n:this._f;)for(n(o.v,o.k,this);o&&o.r;)o=o.p},has:function(e){return!!r(p(this,a),e)}}),m&&s(i.prototype,"size",{get:function(){return p(this,a)[g]}}),i},def:function(e,t,o){var n,i,a=r(e,t);return a?a.v=o:(e._l=a={i:i=f(t,!0),k:t,v:o,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[g]++,"F"!==i&&(e._i[i]=a)),e},getEntry:r,setStrong:function(e,o,t){n(e,o,function(e,t){this._t=p(e,o),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,o=e._l;o&&o.r;)o=o.p;return e._t&&(e._l=o=o?o.n:e._t._f)?i(0,"keys"==t?o.k:"values"==t?o.v:[o.k,o.v]):(e._t=void 0,i(1))},t?"entries":"values",!t,!0),a(o)}}},{"./_an-instance":8,"./_ctx":27,"./_descriptors":31,"./_for-of":41,"./_iter-define":58,"./_iter-step":60,"./_meta":68,"./_object-create":73,"./_object-dp":74,"./_redefine-all":93,"./_set-species":102,"./_validate-collection":128}],22:[function(e,t,o){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":12,"./_classof":19}],23:[function(e,t,o){function r(e){return e._l||(e._l=new v)}function n(e,t){return f(e.a,function(e){return e[0]===t})}var s=e("./_redefine-all"),l=e("./_meta").getWeak,i=e("./_an-object"),d=e("./_is-object"),c=e("./_an-instance"),u=e("./_for-of"),a=e("./_array-methods"),h=e("./_has"),m=e("./_validate-collection"),f=a(5),p=a(6),g=0,v=function(){this.a=[]};v.prototype={get:function(e){var t=n(this,e);if(t)return t[1]},has:function(e){return!!n(this,e)},set:function(e,t){var o=n(this,e);o?o[1]=t:this.a.push([e,t])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,o,n,i){var a=e(function(e,t){c(e,a,o,"_i"),e._t=o,e._i=g++,e._l=void 0,null!=t&&u(t,n,e[i],e)});return s(a.prototype,{delete:function(e){if(!d(e))return!1;var t=l(e);return!0===t?r(m(this,o)).delete(e):t&&h(t,this._i)&&delete t[this._i]},has:function(e){if(!d(e))return!1;var t=l(e);return!0===t?r(m(this,o)).has(e):t&&h(t,this._i)}}),a},def:function(e,t,o){var n=l(i(t),!0);return!0===n?r(e).set(t,o):n[e._i]=o,e},ufstore:r}},{"./_an-instance":8,"./_an-object":9,"./_array-methods":14,"./_for-of":41,"./_has":44,"./_is-object":54,"./_meta":68,"./_redefine-all":93,"./_validate-collection":128}],24:[function(e,t,o){var v=e("./_global"),y=e("./_export"),b=e("./_redefine"),_=e("./_redefine-all"),w=e("./_meta"),k=e("./_for-of"),S=e("./_an-instance"),P=e("./_is-object"),I=e("./_fails"),x=e("./_iter-detect"),C=e("./_set-to-string-tag"),T=e("./_inherit-if-required");t.exports=function(n,e,t,o,i,a){function r(e){var o=c[e];b(c,e,"delete"==e?function(e){return!(a&&!P(e))&&o.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!P(e))&&o.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!P(e)?void 0:o.call(this,0===e?0:e)}:"add"==e?function(e){return o.call(this,0===e?0:e),this}:function(e,t){return o.call(this,0===e?0:e,t),this})}var s=v[n],l=s,d=i?"set":"add",c=l&&l.prototype,u={};if("function"==typeof l&&(a||c.forEach&&!I(function(){(new l).entries().next()}))){var h=new l,m=h[d](a?{}:-0,1)!=h,f=I(function(){h.has(1)}),p=x(function(e){new l(e)}),g=!a&&I(function(){for(var e=new l,t=5;t--;)e[d](t,t);return!e.has(-0)});p||(((l=e(function(e,t){S(e,l,n);var o=T(new s,e,l);return null!=t&&k(t,i,o[d],o),o})).prototype=c).constructor=l),(f||g)&&(r("delete"),r("has"),i&&r("get")),(g||m)&&r(d),a&&c.clear&&delete c.clear}else l=o.getConstructor(e,n,i,d),_(l.prototype,t),w.NEED=!0;return C(l,n),u[n]=l,y(y.G+y.W+y.F*(l!=s),u),a||o.setStrong(l,n,i),l}},{"./_an-instance":8,"./_export":35,"./_fails":37,"./_for-of":41,"./_global":43,"./_inherit-if-required":48,"./_is-object":54,"./_iter-detect":59,"./_meta":68,"./_redefine":94,"./_redefine-all":93,"./_set-to-string-tag":103}],25:[function(e,t,o){var n=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},{}],26:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,o){t in e?n.f(e,t,i(0,o)):e[t]=o}},{"./_object-dp":74,"./_property-desc":92}],27:[function(e,t,o){var a=e("./_a-function");t.exports=function(n,i,e){if(a(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,o){return n.call(i,e,t,o)}}return function(){return n.apply(i,arguments)}}},{"./_a-function":4}],28:[function(e,t,o){function i(e){return 9<e?e:"0"+e}var n=e("./_fails"),a=Date.prototype.getTime,r=Date.prototype.toISOString;t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-5e13-1))})||!n(function(){r.call(new Date(NaN))})?function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),o=e.getUTCMilliseconds(),n=t<0?"-":9999<t?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(99<o?o:"0"+i(o))+"Z"}:r},{"./_fails":37}],29:[function(e,t,o){var n=e("./_an-object"),i=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},{"./_an-object":9,"./_to-primitive":122}],30:[function(e,t,o){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],31:[function(e,t,o){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":37}],32:[function(e,t,o){var n=e("./_is-object"),i=e("./_global").document,a=n(i)&&n(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"./_global":43,"./_is-object":54}],33:[function(e,t,o){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],34:[function(e,t,o){var s=e("./_object-keys"),l=e("./_object-gops"),d=e("./_object-pie");t.exports=function(e){var t=s(e),o=l.f;if(o)for(var n,i=o(e),a=d.f,r=0;i.length>r;)a.call(e,n=i[r++])&&t.push(n);return t}},{"./_object-gops":80,"./_object-keys":83,"./_object-pie":84}],35:[function(e,t,o){var p=e("./_global"),g=e("./_core"),v=e("./_hide"),y=e("./_redefine"),b=e("./_ctx"),_="prototype",w=function(e,t,o){var n,i,a,r,s=e&w.F,l=e&w.G,d=e&w.S,c=e&w.P,u=e&w.B,h=l?p:d?p[t]||(p[t]={}):(p[t]||{})[_],m=l?g:g[t]||(g[t]={}),f=m[_]||(m[_]={});for(n in l&&(o=t),o)a=((i=!s&&h&&void 0!==h[n])?h:o)[n],r=u&&i?b(a,p):c&&"function"==typeof a?b(Function.call,a):a,h&&y(h,n,a,e&w.U),m[n]!=a&&v(m,n,r),c&&f[n]!=a&&(f[n]=a)};p.core=g,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},{"./_core":25,"./_ctx":27,"./_global":43,"./_hide":45,"./_redefine":94}],36:[function(e,t,o){var n=e("./_wks")("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[n]=!1,!"/./"[t](o)}catch(e){}}return!0}},{"./_wks":131}],37:[function(e,t,o){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],38:[function(e,t,o){e("./es6.regexp.exec");var c=e("./_redefine"),u=e("./_hide"),h=e("./_fails"),m=e("./_defined"),f=e("./_wks"),p=e("./_regexp-exec"),g=f("species"),v=!h(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),y=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2===o.length&&"a"===o[0]&&"b"===o[1]}();t.exports=function(o,e,t){var n=f(o),a=!h(function(){var e={};return e[n]=function(){return 7},7!=""[o](e)}),i=a?!h(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===o&&(t.constructor={},t.constructor[g]=function(){return t}),t[n](""),!e}):void 0;if(!a||!i||"replace"===o&&!v||"split"===o&&!y){var r=/./[n],s=t(m,n,""[o],function(e,t,o,n,i){return t.exec===p?a&&!i?{done:!0,value:r.call(t,o,n)}:{done:!0,value:e.call(o,t,n)}:{done:!1}}),l=s[0],d=s[1];c(String.prototype,o,l),u(RegExp.prototype,n,2==e?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}}},{"./_defined":30,"./_fails":37,"./_hide":45,"./_redefine":94,"./_regexp-exec":96,"./_wks":131,"./es6.regexp.exec":228}],39:[function(e,t,o){var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":9}],40:[function(e,t,o){var f=e("./_is-array"),p=e("./_is-object"),g=e("./_to-length"),v=e("./_ctx"),y=e("./_wks")("isConcatSpreadable");t.exports=function e(t,o,n,i,a,r,s,l){for(var d,c,u=a,h=0,m=!!s&&v(s,l,3);h<i;){if(h in n){if(d=m?m(n[h],h,o):n[h],c=!1,p(d)&&(c=void 0!==(c=d[y])?!!c:f(d)),c&&0<r)u=e(t,o,d,g(d.length),u,r-1)-1;else{if(9007199254740991<=u)throw TypeError();t[u]=d}u++}h++}return u}},{"./_ctx":27,"./_is-array":52,"./_is-object":54,"./_to-length":120,"./_wks":131}],41:[function(e,t,o){var h=e("./_ctx"),m=e("./_iter-call"),f=e("./_is-array-iter"),p=e("./_an-object"),g=e("./_to-length"),v=e("./core.get-iterator-method"),y={},b={};(o=t.exports=function(e,t,o,n,i){var a,r,s,l,d=i?function(){return e}:v(e),c=h(o,n,t?2:1),u=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(f(d)){for(a=g(e.length);u<a;u++)if((l=t?c(p(r=e[u])[0],r[1]):c(e[u]))===y||l===b)return l}else for(s=d.call(e);!(r=s.next()).done;)if((l=m(s,c,r.value,t))===y||l===b)return l}).BREAK=y,o.RETURN=b},{"./_an-object":9,"./_ctx":27,"./_is-array-iter":51,"./_iter-call":56,"./_to-length":120,"./core.get-iterator-method":132}],42:[function(e,t,o){t.exports=e("./_shared")("native-function-to-string",Function.toString)},{"./_shared":105}],43:[function(e,t,o){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],44:[function(e,t,o){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],45:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,o){return n.f(e,t,i(1,o))}:function(e,t,o){return e[t]=o,e}},{"./_descriptors":31,"./_object-dp":74,"./_property-desc":92}],46:[function(e,t,o){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":43}],47:[function(e,t,o){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":31,"./_dom-create":32,"./_fails":37}],48:[function(e,t,o){var a=e("./_is-object"),r=e("./_set-proto").set;t.exports=function(e,t,o){var n,i=t.constructor;return i!==o&&"function"==typeof i&&(n=i.prototype)!==o.prototype&&a(n)&&r&&r(e,n),e}},{"./_is-object":54,"./_set-proto":101}],49:[function(e,t,o){t.exports=function(e,t,o){var n=void 0===o;switch(t.length){case 0:return n?e():e.call(o);case 1:return n?e(t[0]):e.call(o,t[0]);case 2:return n?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3])}return e.apply(o,t)}},{}],50:[function(e,t,o){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":20}],51:[function(e,t,o){var n=e("./_iterators"),i=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},{"./_iterators":61,"./_wks":131}],52:[function(e,t,o){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":20}],53:[function(e,t,o){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":54}],54:[function(e,t,o){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],55:[function(e,t,o){var n=e("./_is-object"),i=e("./_cof"),a=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},{"./_cof":20,"./_is-object":54,"./_wks":131}],56:[function(e,t,o){var a=e("./_an-object");t.exports=function(t,e,o,n){try{return n?e(a(o)[0],o[1]):e(o)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}}},{"./_an-object":9}],57:[function(e,t,o){var n=e("./_object-create"),i=e("./_property-desc"),a=e("./_set-to-string-tag"),r={};e("./_hide")(r,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,o){e.prototype=n(r,{next:i(1,o)}),a(e,t+" Iterator")}},{"./_hide":45,"./_object-create":73,"./_property-desc":92,"./_set-to-string-tag":103,"./_wks":131}],58:[function(e,t,o){function b(){return this}var _=e("./_library"),w=e("./_export"),k=e("./_redefine"),S=e("./_hide"),P=e("./_iterators"),I=e("./_iter-create"),x=e("./_set-to-string-tag"),C=e("./_object-gpo"),T=e("./_wks")("iterator"),D=!([].keys&&"next"in[].keys()),E="values";t.exports=function(e,t,o,n,i,a,r){I(o,t,n);function s(e){if(!D&&e in f)return f[e];switch(e){case"keys":case E:return function(){return new o(this,e)}}return function(){return new o(this,e)}}var l,d,c,u=t+" Iterator",h=i==E,m=!1,f=e.prototype,p=f[T]||f["@@iterator"]||i&&f[i],g=p||s(i),v=i?h?s("entries"):g:void 0,y="Array"==t&&f.entries||p;if(y&&(c=C(y.call(new e)))!==Object.prototype&&c.next&&(x(c,u,!0),_||"function"==typeof c[T]||S(c,T,b)),h&&p&&p.name!==E&&(m=!0,g=function(){return p.call(this)}),_&&!r||!D&&!m&&f[T]||S(f,T,g),P[t]=g,P[u]=b,i)if(l={values:h?g:s(E),keys:a?g:s("keys"),entries:v},r)for(d in l)d in f||k(f,d,l[d]);else w(w.P+w.F*(D||m),t,l);return l}},{"./_export":35,"./_hide":45,"./_iter-create":57,"./_iterators":61,"./_library":62,"./_object-gpo":81,"./_redefine":94,"./_set-to-string-tag":103,"./_wks":131}],59:[function(e,t,o){var a=e("./_wks")("iterator"),r=!1;try{var n=[7][a]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:o=!0}},n[a]=function(){return i},e(n)}catch(e){}return o}},{"./_wks":131}],60:[function(e,t,o){t.exports=function(e,t){return{value:t,done:!!e}}},{}],61:[function(e,t,o){t.exports={}},{}],62:[function(e,t,o){t.exports=!1},{}],63:[function(e,t,o){var n=Math.expm1;t.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],64:[function(e,t,o){var a=e("./_math-sign"),n=Math.pow,r=n(2,-52),s=n(2,-23),l=n(2,127)*(2-s),d=n(2,-126);t.exports=Math.fround||function(e){var t,o,n=Math.abs(e),i=a(e);return n<d?i*function(e){return e+1/r-1/r}(n/d/s)*d*s:l<(o=(t=(1+s/r)*n)-(t-n))||o!=o?i*(1/0):i*o}},{"./_math-sign":67}],65:[function(e,t,o){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],66:[function(e,t,o){t.exports=Math.scale||function(e,t,o,n,i){return 0===arguments.length||e!=e||t!=t||o!=o||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(o-t)+n}},{}],67:[function(e,t,o){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],68:[function(e,t,o){function n(e){s(e,i,{value:{i:"O"+ ++l,w:{}}})}var i=e("./_uid")("meta"),a=e("./_is-object"),r=e("./_has"),s=e("./_object-dp").f,l=0,d=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return d(Object.preventExtensions({}))}),u=t.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!d(e))return"F";if(!t)return"E";n(e)}return e[i].i},getWeak:function(e,t){if(!r(e,i)){if(!d(e))return!0;if(!t)return!1;n(e)}return e[i].w},onFreeze:function(e){return c&&u.NEED&&d(e)&&!r(e,i)&&n(e),e}}},{"./_fails":37,"./_has":44,"./_is-object":54,"./_object-dp":74,"./_uid":126}],69:[function(e,t,o){function i(e,t,o){var n=s.get(e);if(!n){if(!o)return;s.set(e,n=new a)}var i=n.get(t);if(!i){if(!o)return;n.set(t,i=new a)}return i}var a=e("./es6.map"),n=e("./_export"),r=e("./_shared")("metadata"),s=r.store||(r.store=new(e("./es6.weak-map")));t.exports={store:s,map:i,has:function(e,t,o){var n=i(t,o,!1);return void 0!==n&&n.has(e)},get:function(e,t,o){var n=i(t,o,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,o,n){i(o,n,!0).set(e,t)},keys:function(e,t){var o=i(e,t,!1),n=[];return o&&o.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){n(n.S,"Reflect",e)}}},{"./_export":35,"./_shared":105,"./es6.map":163,"./es6.weak-map":270}],70:[function(e,t,o){var s=e("./_global"),l=e("./_task").set,d=s.MutationObserver||s.WebKitMutationObserver,c=s.process,u=s.Promise,h="process"==e("./_cof")(c);t.exports=function(){function e(){var e,t;for(h&&(e=c.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?i():n=void 0,e}}n=void 0,e&&e.enter()}var o,n,i;if(h)i=function(){c.nextTick(e)};else if(!d||s.navigator&&s.navigator.standalone)if(u&&u.resolve){var t=u.resolve(void 0);i=function(){t.then(e)}}else i=function(){l.call(s,e)};else{var a=!0,r=document.createTextNode("");new d(e).observe(r,{characterData:!0}),i=function(){r.data=a=!a}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t),o||(o=t,i()),n=t}}},{"./_cof":20,"./_global":43,"./_task":115}],71:[function(e,t,o){var i=e("./_a-function");function n(e){var o,n;this.promise=new e(function(e,t){if(void 0!==o||void 0!==n)throw TypeError("Bad Promise constructor");o=e,n=t}),this.resolve=i(o),this.reject=i(n)}t.exports.f=function(e){return new n(e)}},{"./_a-function":4}],72:[function(e,t,o){var h=e("./_descriptors"),m=e("./_object-keys"),f=e("./_object-gops"),p=e("./_object-pie"),g=e("./_to-object"),v=e("./_iobject"),i=Object.assign;t.exports=!i||e("./_fails")(function(){var e={},t={},o=Symbol(),n="abcdefghijklmnopqrst";return e[o]=7,n.split("").forEach(function(e){t[e]=e}),7!=i({},e)[o]||Object.keys(i({},t)).join("")!=n})?function(e,t){for(var o=g(e),n=arguments.length,i=1,a=f.f,r=p.f;i<n;)for(var s,l=v(arguments[i++]),d=a?m(l).concat(a(l)):m(l),c=d.length,u=0;u<c;)s=d[u++],h&&!r.call(l,s)||(o[s]=l[s]);return o}:i},{"./_descriptors":31,"./_fails":37,"./_iobject":50,"./_object-gops":80,"./_object-keys":83,"./_object-pie":84,"./_to-object":121}],73:[function(n,e,t){function i(){}var a=n("./_an-object"),r=n("./_object-dps"),s=n("./_enum-bug-keys"),l=n("./_shared-key")("IE_PROTO"),d="prototype",c=function(){var e,t=n("./_dom-create")("iframe"),o=s.length;for(t.style.display="none",n("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;o--;)delete c[d][s[o]];return c()};e.exports=Object.create||function(e,t){var o;return null!==e?(i[d]=a(e),o=new i,i[d]=null,o[l]=e):o=c(),void 0===t?o:r(o,t)}},{"./_an-object":9,"./_dom-create":32,"./_enum-bug-keys":33,"./_html":46,"./_object-dps":75,"./_shared-key":104}],74:[function(e,t,o){var n=e("./_an-object"),i=e("./_ie8-dom-define"),a=e("./_to-primitive"),r=Object.defineProperty;o.f=e("./_descriptors")?Object.defineProperty:function(e,t,o){if(n(e),t=a(t,!0),n(o),i)try{return r(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},{"./_an-object":9,"./_descriptors":31,"./_ie8-dom-define":47,"./_to-primitive":122}],75:[function(e,t,o){var r=e("./_object-dp"),s=e("./_an-object"),l=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var o,n=l(t),i=n.length,a=0;a<i;)r.f(e,o=n[a++],t[o]);return e}},{"./_an-object":9,"./_descriptors":31,"./_object-dp":74,"./_object-keys":83}],76:[function(t,e,o){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":37,"./_global":43,"./_library":62}],77:[function(e,t,o){var n=e("./_object-pie"),i=e("./_property-desc"),a=e("./_to-iobject"),r=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),d=Object.getOwnPropertyDescriptor;o.f=e("./_descriptors")?d:function(e,t){if(e=a(e),t=r(t,!0),l)try{return d(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":31,"./_has":44,"./_ie8-dom-define":47,"./_object-pie":84,"./_property-desc":92,"./_to-iobject":119,"./_to-primitive":122}],78:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopn").f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return r&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return r.slice()}}(e):i(n(e))}},{"./_object-gopn":79,"./_to-iobject":119}],79:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":33,"./_object-keys-internal":82}],80:[function(e,t,o){o.f=Object.getOwnPropertySymbols},{}],81:[function(e,t,o){var n=e("./_has"),i=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},{"./_has":44,"./_shared-key":104,"./_to-object":121}],82:[function(e,t,o){var r=e("./_has"),s=e("./_to-iobject"),l=e("./_array-includes")(!1),d=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var o,n=s(e),i=0,a=[];for(o in n)o!=d&&r(n,o)&&a.push(o);for(;t.length>i;)r(n,o=t[i++])&&(~l(a,o)||a.push(o));return a}},{"./_array-includes":13,"./_has":44,"./_shared-key":104,"./_to-iobject":119}],83:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":33,"./_object-keys-internal":82}],84:[function(e,t,o){o.f={}.propertyIsEnumerable},{}],85:[function(e,t,o){var i=e("./_export"),a=e("./_core"),r=e("./_fails");t.exports=function(e,t){var o=(a.Object||{})[e]||Object[e],n={};n[e]=t(o),i(i.S+i.F*r(function(){o(1)}),"Object",n)}},{"./_core":25,"./_export":35,"./_fails":37}],86:[function(e,t,o){var l=e("./_descriptors"),d=e("./_object-keys"),c=e("./_to-iobject"),u=e("./_object-pie").f;t.exports=function(s){return function(e){for(var t,o=c(e),n=d(o),i=n.length,a=0,r=[];a<i;)t=n[a++],l&&!u.call(o,t)||r.push(s?[t,o[t]]:o[t]);return r}}},{"./_descriptors":31,"./_object-keys":83,"./_object-pie":84,"./_to-iobject":119}],87:[function(e,t,o){var n=e("./_object-gopn"),i=e("./_object-gops"),a=e("./_an-object"),r=e("./_global").Reflect;t.exports=r&&r.ownKeys||function(e){var t=n.f(a(e)),o=i.f;return o?t.concat(o(e)):t}},{"./_an-object":9,"./_global":43,"./_object-gopn":79,"./_object-gops":80}],88:[function(e,t,o){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),o=n(t);return 0===o&&"-"==t.charAt(0)?-0:o}:n},{"./_global":43,"./_string-trim":113,"./_string-ws":114}],89:[function(e,t,o){var n=e("./_global").parseInt,i=e("./_string-trim").trim,a=e("./_string-ws"),r=/^[-+]?0[xX]/;t.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var o=i(String(e),3);return n(o,t>>>0||(r.test(o)?16:10))}:n},{"./_global":43,"./_string-trim":113,"./_string-ws":114}],90:[function(e,t,o){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],91:[function(e,t,o){var n=e("./_an-object"),i=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var o=a.f(e);return(0,o.resolve)(t),o.promise}},{"./_an-object":9,"./_is-object":54,"./_new-promise-capability":71}],92:[function(e,t,o){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],93:[function(e,t,o){var i=e("./_redefine");t.exports=function(e,t,o){for(var n in t)i(e,n,t[n],o);return e}},{"./_redefine":94}],94:[function(e,t,o){var a=e("./_global"),r=e("./_hide"),s=e("./_has"),l=e("./_uid")("src"),n=e("./_function-to-string"),i="toString",d=(""+n).split(i);e("./_core").inspectSource=function(e){return n.call(e)},(t.exports=function(e,t,o,n){var i="function"==typeof o;i&&(s(o,"name")||r(o,"name",t)),e[t]!==o&&(i&&(s(o,l)||r(o,l,e[t]?""+e[t]:d.join(String(t)))),e===a?e[t]=o:n?e[t]?e[t]=o:r(e,t,o):(delete e[t],r(e,t,o)))})(Function.prototype,i,function(){return"function"==typeof this&&this[l]||n.call(this)})},{"./_core":25,"./_function-to-string":42,"./_global":43,"./_has":44,"./_hide":45,"./_uid":126}],95:[function(e,t,o){var i=e("./_classof"),a=RegExp.prototype.exec;t.exports=function(e,t){var o=e.exec;if("function"==typeof o){var n=o.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},{"./_classof":19}],96:[function(e,t,o){var n,i,r=e("./_flags"),s=RegExp.prototype.exec,l=String.prototype.replace,a=s,d="lastIndex",c=(n=/a/,i=/b*/g,s.call(n,"a"),s.call(i,"a"),0!==n[d]||0!==i[d]),u=void 0!==/()??/.exec("")[1];(c||u)&&(a=function(e){var t,o,n,i,a=this;return u&&(o=new RegExp("^"+a.source+"$(?!\\s)",r.call(a))),c&&(t=a[d]),n=s.call(a,e),c&&n&&(a[d]=a.global?n.index+n[0].length:t),u&&n&&1<n.length&&l.call(n[0],o,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),t.exports=a},{"./_flags":39}],97:[function(e,t,o){t.exports=function(t,o){var n=o===Object(o)?function(e){return o[e]}:o;return function(e){return String(e).replace(t,n)}}},{}],98:[function(e,t,o){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],99:[function(e,t,o){var n=e("./_export"),l=e("./_a-function"),d=e("./_ctx"),c=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e,t,o){var n,i,a,r,s=t;return l(this),(n=void 0!==s)&&l(s),null==e?new this:(i=[],n?(a=0,r=d(s,o,2),c(e,!1,function(e){i.push(r(e,a++))})):c(e,!1,i.push,i),new this(i))}})}},{"./_a-function":4,"./_ctx":27,"./_export":35,"./_for-of":41}],100:[function(e,t,o){var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":35}],101:[function(t,e,o){function i(e,t){if(a(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")}var n=t("./_is-object"),a=t("./_an-object");e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,o,n){try{(n=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),o=!(e instanceof Array)}catch(e){o=!0}return function(e,t){return i(e,t),o?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":9,"./_ctx":27,"./_is-object":54,"./_object-gopd":77}],102:[function(e,t,o){var n=e("./_global"),i=e("./_object-dp"),a=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){var t=n[e];a&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":31,"./_global":43,"./_object-dp":74,"./_wks":131}],103:[function(e,t,o){var n=e("./_object-dp").f,i=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!i(e=o?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":44,"./_object-dp":74,"./_wks":131}],104:[function(e,t,o){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":105,"./_uid":126}],105:[function(e,t,o){var n=e("./_core"),i=e("./_global"),a="__core-js_shared__",r=i[a]||(i[a]={});(t.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":25,"./_global":43,"./_library":62}],106:[function(e,t,o){var i=e("./_an-object"),a=e("./_a-function"),r=e("./_wks")("species");t.exports=function(e,t){var o,n=i(e).constructor;return void 0===n||null==(o=i(n)[r])?t:a(o)}},{"./_a-function":4,"./_an-object":9,"./_wks":131}],107:[function(e,t,o){var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":37}],108:[function(e,t,o){var l=e("./_to-integer"),d=e("./_defined");t.exports=function(s){return function(e,t){var o,n,i=String(d(e)),a=l(t),r=i.length;return a<0||r<=a?s?"":void 0:(o=i.charCodeAt(a))<55296||56319<o||a+1===r||(n=i.charCodeAt(a+1))<56320||57343<n?s?i.charAt(a):o:s?i.slice(a,a+2):n-56320+(o-55296<<10)+65536}}},{"./_defined":30,"./_to-integer":118}],109:[function(e,t,o){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,o){if(n(t))throw TypeError("String#"+o+" doesn't accept regex!");return String(i(e))}},{"./_defined":30,"./_is-regexp":55}],110:[function(e,t,o){function n(e,t,o,n){var i=String(r(e)),a="<"+t;return""!==o&&(a+=" "+o+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+i+"</"+t+">"}var i=e("./_export"),a=e("./_fails"),r=e("./_defined"),s=/"/g;t.exports=function(t,e){var o={};o[t]=e(n),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",o)}},{"./_defined":30,"./_export":35,"./_fails":37}],111:[function(e,t,o){var c=e("./_to-length"),u=e("./_string-repeat"),h=e("./_defined");t.exports=function(e,t,o,n){var i=String(h(e)),a=i.length,r=void 0===o?" ":String(o),s=c(t);if(s<=a||""==r)return i;var l=s-a,d=u.call(r,Math.ceil(l/r.length));return d.length>l&&(d=d.slice(0,l)),n?d+i:i+d}},{"./_defined":30,"./_string-repeat":112,"./_to-length":120}],112:[function(e,t,o){var i=e("./_to-integer"),a=e("./_defined");t.exports=function(e){var t=String(a(this)),o="",n=i(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(o+=t);return o}},{"./_defined":30,"./_to-integer":118}],113:[function(e,t,o){function n(e,t,o){var n={},i=s(function(){return!!l[e]()||"​"!="​"[e]()}),a=n[e]=i?t(u):l[e];o&&(n[o]=a),r(r.P+r.F*i,"String",n)}var r=e("./_export"),i=e("./_defined"),s=e("./_fails"),l=e("./_string-ws"),a="["+l+"]",d=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=n.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(c,"")),e};t.exports=n},{"./_defined":30,"./_export":35,"./_fails":37,"./_string-ws":114}],114:[function(e,t,o){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],115:[function(e,t,o){function n(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}}function i(e){n.call(e.data)}var a,r,s,l=e("./_ctx"),d=e("./_invoke"),c=e("./_html"),u=e("./_dom-create"),h=e("./_global"),m=h.process,f=h.setImmediate,p=h.clearImmediate,g=h.MessageChannel,v=h.Dispatch,y=0,b={},_="onreadystatechange";f&&p||(f=function(e){for(var t=[],o=1;o<arguments.length;)t.push(arguments[o++]);return b[++y]=function(){d("function"==typeof e?e:Function(e),t)},a(y),y},p=function(e){delete b[e]},"process"==e("./_cof")(m)?a=function(e){m.nextTick(l(n,e,1))}:v&&v.now?a=function(e){v.now(l(n,e,1))}:g?(s=(r=new g).port2,r.port1.onmessage=i,a=l(s.postMessage,s,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(a=function(e){h.postMessage(e+"","*")},h.addEventListener("message",i,!1)):a=_ in u("script")?function(e){c.appendChild(u("script"))[_]=function(){c.removeChild(this),n.call(e)}}:function(e){setTimeout(l(n,e,1),0)}),t.exports={set:f,clear:p}},{"./_cof":20,"./_ctx":27,"./_dom-create":32,"./_global":43,"./_html":46,"./_invoke":49}],116:[function(e,t,o){var n=e("./_to-integer"),i=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},{"./_to-integer":118}],117:[function(e,t,o){var n=e("./_to-integer"),i=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),o=i(t);if(t!==o)throw RangeError("Wrong length!");return o}},{"./_to-integer":118,"./_to-length":120}],118:[function(e,t,o){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},{}],119:[function(e,t,o){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":30,"./_iobject":50}],120:[function(e,t,o){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},{"./_to-integer":118}],121:[function(e,t,o){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":30}],122:[function(e,t,o){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var o,n;if(t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;if("function"==typeof(o=e.valueOf)&&!i(n=o.call(e)))return n;if(!t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":54}],123:[function(e,t,o){if(e("./_descriptors")){var v=e("./_library"),y=e("./_global"),b=e("./_fails"),_=e("./_export"),w=e("./_typed"),n=e("./_typed-buffer"),f=e("./_ctx"),k=e("./_an-instance"),i=e("./_property-desc"),S=e("./_hide"),a=e("./_redefine-all"),r=e("./_to-integer"),P=e("./_to-length"),I=e("./_to-index"),s=e("./_to-absolute-index"),l=e("./_to-primitive"),d=e("./_has"),x=e("./_classof"),C=e("./_is-object"),p=e("./_to-object"),g=e("./_is-array-iter"),T=e("./_object-create"),D=e("./_object-gpo"),E=e("./_object-gopn").f,L=e("./core.get-iterator-method"),c=e("./_uid"),u=e("./_wks"),h=e("./_array-methods"),m=e("./_array-includes"),A=e("./_species-constructor"),M=e("./es6.array.iterator"),R=e("./_iterators"),W=e("./_iter-detect"),j=e("./_set-species"),N=e("./_array-fill"),O=e("./_array-copy-within"),V=e("./_object-dp"),F=e("./_object-gopd"),B=V.f,z=F.f,U=y.RangeError,H=y.TypeError,J=y.Uint8Array,K="ArrayBuffer",q="Shared"+K,G="BYTES_PER_ELEMENT",Y="prototype",X=Array[Y],Z=n.ArrayBuffer,$=n.DataView,Q=h(0),ee=h(2),te=h(3),oe=h(4),ne=h(5),ie=h(6),ae=m(!0),re=m(!1),se=M.values,le=M.keys,de=M.entries,ce=X.lastIndexOf,ue=X.reduce,he=X.reduceRight,me=X.join,fe=X.sort,pe=X.slice,ge=X.toString,ve=X.toLocaleString,ye=u("iterator"),be=u("toStringTag"),_e=c("typed_constructor"),we=c("def_constructor"),ke=w.CONSTR,Se=w.TYPED,Pe=w.VIEW,Ie="Wrong length!",xe=h(1,function(e,t){return Le(A(e,e[we]),t)}),Ce=b(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Te=!!J&&!!J[Y].set&&b(function(){new J(1).set({})}),De=function(e,t){var o=r(e);if(o<0||o%t)throw U("Wrong offset!");return o},Ee=function(e){if(C(e)&&Se in e)return e;throw H(e+" is not a typed array!")},Le=function(e,t){if(!(C(e)&&_e in e))throw H("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Me(A(e,e[we]),t)},Me=function(e,t){for(var o=0,n=t.length,i=Le(e,n);o<n;)i[o]=t[o++];return i},Re=function(e,t,o){B(e,t,{get:function(){return this._d[o]}})},We=function(e,t,o){var n,i,a,r,s,l,d=p(e),c=arguments.length,u=1<c?t:void 0,h=void 0!==u,m=L(d);if(null!=m&&!g(m)){for(l=m.call(d),a=[],n=0;!(s=l.next()).done;n++)a.push(s.value);d=a}for(h&&2<c&&(u=f(u,o,2)),n=0,i=P(d.length),r=Le(this,i);n<i;n++)r[n]=h?u(d[n],n):d[n];return r},je=function(){for(var e=0,t=arguments.length,o=Le(this,t);e<t;)o[e]=arguments[e++];return o},Ne=!!J&&b(function(){ve.call(new J(1))}),Oe=function(){return ve.apply(Ne?pe.call(Ee(this)):Ee(this),arguments)},Ve={copyWithin:function(e,t,o){return O.call(Ee(this),e,t,2<arguments.length?o:void 0)},every:function(e,t){return oe(Ee(this),e,1<arguments.length?t:void 0)},fill:function(e){return N.apply(Ee(this),arguments)},filter:function(e,t){return Ae(this,ee(Ee(this),e,1<arguments.length?t:void 0))},find:function(e,t){return ne(Ee(this),e,1<arguments.length?t:void 0)},findIndex:function(e,t){return ie(Ee(this),e,1<arguments.length?t:void 0)},forEach:function(e,t){Q(Ee(this),e,1<arguments.length?t:void 0)},indexOf:function(e,t){return re(Ee(this),e,1<arguments.length?t:void 0)},includes:function(e,t){return ae(Ee(this),e,1<arguments.length?t:void 0)},join:function(e){return me.apply(Ee(this),arguments)},lastIndexOf:function(e){return ce.apply(Ee(this),arguments)},map:function(e,t){return xe(Ee(this),e,1<arguments.length?t:void 0)},reduce:function(e){return ue.apply(Ee(this),arguments)},reduceRight:function(e){return he.apply(Ee(this),arguments)},reverse:function(){for(var e,t=this,o=Ee(t).length,n=Math.floor(o/2),i=0;i<n;)e=t[i],t[i++]=t[--o],t[o]=e;return t},some:function(e,t){return te(Ee(this),e,1<arguments.length?t:void 0)},sort:function(e){return fe.call(Ee(this),e)},subarray:function(e,t){var o=Ee(this),n=o.length,i=s(e,n);return new(A(o,o[we]))(o.buffer,o.byteOffset+i*o.BYTES_PER_ELEMENT,P((void 0===t?n:s(t,n))-i))}},Fe=function(e,t){return Ae(this,pe.call(Ee(this),e,t))},Be=function(e,t){Ee(this);var o=De(t,1),n=this.length,i=p(e),a=P(i.length),r=0;if(n<a+o)throw U(Ie);for(;r<a;)this[o+r]=i[r++]},ze={entries:function(){return de.call(Ee(this))},keys:function(){return le.call(Ee(this))},values:function(){return se.call(Ee(this))}},Ue=function(e,t){return C(e)&&e[Se]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},He=function(e,t){return Ue(e,t=l(t,!0))?i(2,e[t]):z(e,t)},Je=function(e,t,o){return!(Ue(e,t=l(t,!0))&&C(o)&&d(o,"value"))||d(o,"get")||d(o,"set")||o.configurable||d(o,"writable")&&!o.writable||d(o,"enumerable")&&!o.enumerable?B(e,t,o):(e[t]=o.value,e)};ke||(F.f=He,V.f=Je),_(_.S+_.F*!ke,"Object",{getOwnPropertyDescriptor:He,defineProperty:Je}),b(function(){ge.call({})})&&(ge=ve=function(){return me.call(this)});var Ke=a({},Ve);a(Ke,ze),S(Ke,ye,ze.values),a(Ke,{slice:Fe,set:Be,constructor:function(){},toString:ge,toLocaleString:Oe}),Re(Ke,"buffer","b"),Re(Ke,"byteOffset","o"),Re(Ke,"byteLength","l"),Re(Ke,"length","e"),B(Ke,be,{get:function(){return this[Se]}}),t.exports=function(e,u,t,i){function h(e,t){B(e,t,{get:function(){return function(e,t){var o=e._d;return o.v[n](t*u+o.o,Ce)}(this,t)},set:function(e){return function(e,t,o){var n=e._d;i&&(o=(o=Math.round(o))<0?0:255<o?255:255&o),n.v[a](t*u+n.o,o,Ce)}(this,t,e)},enumerable:!0})}var m=e+((i=!!i)?"Clamped":"")+"Array",n="get"+e,a="set"+e,f=y[m],r=f||{},o=f&&D(f),s=!f||!w.ABV,l={},d=f&&f[Y];s?(f=t(function(e,t,o,n){k(e,f,m,"_d");var i,a,r,s,l=0,d=0;if(C(t)){if(!(t instanceof Z||(s=x(t))==K||s==q))return Se in t?Me(f,t):We.call(f,t);i=t,d=De(o,u);var c=t.byteLength;if(void 0===n){if(c%u)throw U(Ie);if((a=c-d)<0)throw U(Ie)}else if(c<(a=P(n)*u)+d)throw U(Ie);r=a/u}else r=I(t),i=new Z(a=r*u);for(S(e,"_d",{b:i,o:d,l:a,e:r,v:new $(i)});l<r;)h(e,l++)}),d=f[Y]=T(Ke),S(d,"constructor",f)):b(function(){f(1)})&&b(function(){new f(-1)})&&W(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=t(function(e,t,o,n){var i;return k(e,f,m),C(t)?t instanceof Z||(i=x(t))==K||i==q?void 0!==n?new r(t,De(o,u),n):void 0!==o?new r(t,De(o,u)):new r(t):Se in t?Me(f,t):We.call(f,t):new r(I(t))}),Q(o!==Function.prototype?E(r).concat(E(o)):E(r),function(e){e in f||S(f,e,r[e])}),f[Y]=d,v||(d.constructor=f));var c=d[ye],p=!!c&&("values"==c.name||null==c.name),g=ze.values;S(f,_e,!0),S(d,Se,m),S(d,Pe,!0),S(d,we,f),(i?new f(1)[be]==m:be in d)||B(d,be,{get:function(){return m}}),l[m]=f,_(_.G+_.W+_.F*(f!=r),l),_(_.S,m,{BYTES_PER_ELEMENT:u}),_(_.S+_.F*b(function(){r.of.call(f,1)}),m,{from:We,of:je}),G in d||S(d,G,u),_(_.P,m,Ve),j(m),_(_.P+_.F*Te,m,{set:Be}),_(_.P+_.F*!p,m,ze),v||d.toString==ge||(d.toString=ge),_(_.P+_.F*b(function(){new f(1).slice()}),m,{slice:Fe}),_(_.P+_.F*(b(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!b(function(){d.toLocaleString.call([1,2])})),m,{toLocaleString:Oe}),R[m]=p?c:g,v||p||S(d,ye,g)}}else t.exports=function(){}},{"./_an-instance":8,"./_array-copy-within":10,"./_array-fill":11,"./_array-includes":13,"./_array-methods":14,"./_classof":19,"./_ctx":27,"./_descriptors":31,"./_export":35,"./_fails":37,"./_global":43,"./_has":44,"./_hide":45,"./_is-array-iter":51,"./_is-object":54,"./_iter-detect":59,"./_iterators":61,"./_library":62,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_object-gpo":81,"./_property-desc":92,"./_redefine-all":93,"./_set-species":102,"./_species-constructor":106,"./_to-absolute-index":116,"./_to-index":117,"./_to-integer":118,"./_to-length":120,"./_to-object":121,"./_to-primitive":122,"./_typed":125,"./_typed-buffer":124,"./_uid":126,"./_wks":131,"./core.get-iterator-method":132,"./es6.array.iterator":144}],124:[function(e,t,o){var n=e("./_global"),i=e("./_descriptors"),a=e("./_library"),r=e("./_typed"),s=e("./_hide"),l=e("./_redefine-all"),d=e("./_fails"),c=e("./_an-instance"),u=e("./_to-integer"),h=e("./_to-length"),m=e("./_to-index"),f=e("./_object-gopn").f,p=e("./_object-dp").f,g=e("./_array-fill"),v=e("./_set-to-string-tag"),y="ArrayBuffer",b="DataView",_="prototype",w="Wrong index!",k=n[y],S=n[b],P=n.Math,I=n.RangeError,x=n.Infinity,C=k,T=P.abs,D=P.pow,E=P.floor,L=P.log,A=P.LN2,M="byteLength",R="byteOffset",W=i?"_b":"buffer",j=i?"_l":M,N=i?"_o":R;function O(e,t,o){var n,i,a,r=new Array(o),s=8*o-t-1,l=(1<<s)-1,d=l>>1,c=23===t?D(2,-24)-D(2,-77):0,u=0,h=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===x?(i=e!=e?1:0,n=l):(n=E(L(e)/A),e*(a=D(2,-n))<1&&(n--,a*=2),2<=(e+=1<=n+d?c/a:c*D(2,1-d))*a&&(n++,a/=2),l<=n+d?(i=0,n=l):1<=n+d?(i=(e*a-1)*D(2,t),n+=d):(i=e*D(2,d-1)*D(2,t),n=0));8<=t;r[u++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;0<s;r[u++]=255&n,n/=256,s-=8);return r[--u]|=128*h,r}function V(e,t,o){var n,i=8*o-t-1,a=(1<<i)-1,r=a>>1,s=i-7,l=o-1,d=e[l--],c=127&d;for(d>>=7;0<s;c=256*c+e[l],l--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;0<s;n=256*n+e[l],l--,s-=8);if(0===c)c=1-r;else{if(c===a)return n?NaN:d?-x:x;n+=D(2,t),c-=r}return(d?-1:1)*n*D(2,c-t)}function F(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function B(e){return[255&e]}function z(e){return[255&e,e>>8&255]}function U(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return O(e,52,8)}function J(e){return O(e,23,4)}function K(e,t,o){p(e[_],t,{get:function(){return this[o]}})}function q(e,t,o,n){var i=m(+o);if(i+t>e[j])throw I(w);var a=e[W]._b,r=i+e[N],s=a.slice(r,r+t);return n?s:s.reverse()}function G(e,t,o,n,i,a){var r=m(+o);if(r+t>e[j])throw I(w);for(var s=e[W]._b,l=r+e[N],d=n(+i),c=0;c<t;c++)s[l+c]=d[a?c:t-c-1]}if(r.ABV){if(!d(function(){k(1)})||!d(function(){new k(-1)})||d(function(){return new k,new k(1.5),new k(NaN),k.name!=y})){for(var Y,X=(k=function(e){return c(this,k),new C(m(e))})[_]=C[_],Z=f(C),$=0;Z.length>$;)(Y=Z[$++])in k||s(k,Y,C[Y]);a||(X.constructor=k)}var Q=new S(new k(2)),ee=S[_].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(S[_],{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else k=function(e){c(this,k,y);var t=m(e);this._b=g.call(new Array(t),0),this[j]=t},S=function(e,t,o){c(this,S,b),c(e,k,b);var n=e[j],i=u(t);if(i<0||n<i)throw I("Wrong offset!");if(n<i+(o=void 0===o?n-i:h(o)))throw I("Wrong length!");this[W]=e,this[N]=i,this[j]=o},i&&(K(k,M,"_l"),K(S,"buffer","_b"),K(S,M,"_l"),K(S,R,"_o")),l(S[_],{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e,t){var o=q(this,2,e,t);return(o[1]<<8|o[0])<<16>>16},getUint16:function(e,t){var o=q(this,2,e,t);return o[1]<<8|o[0]},getInt32:function(e,t){return F(q(this,4,e,t))},getUint32:function(e,t){return F(q(this,4,e,t))>>>0},getFloat32:function(e,t){return V(q(this,4,e,t),23,4)},getFloat64:function(e,t){return V(q(this,8,e,t),52,8)},setInt8:function(e,t){G(this,1,e,B,t)},setUint8:function(e,t){G(this,1,e,B,t)},setInt16:function(e,t,o){G(this,2,e,z,t,o)},setUint16:function(e,t,o){G(this,2,e,z,t,o)},setInt32:function(e,t,o){G(this,4,e,U,t,o)},setUint32:function(e,t,o){G(this,4,e,U,t,o)},setFloat32:function(e,t,o){G(this,4,e,J,t,o)},setFloat64:function(e,t,o){G(this,8,e,H,t,o)}});v(k,y),v(S,b),s(S[_],r.VIEW,!0),o[y]=k,o[b]=S},{"./_an-instance":8,"./_array-fill":11,"./_descriptors":31,"./_fails":37,"./_global":43,"./_hide":45,"./_library":62,"./_object-dp":74,"./_object-gopn":79,"./_redefine-all":93,"./_set-to-string-tag":103,"./_to-index":117,"./_to-integer":118,"./_to-length":120,"./_typed":125}],125:[function(e,t,o){for(var n,i=e("./_global"),a=e("./_hide"),r=e("./_uid"),s=r("typed_array"),l=r("view"),d=!(!i.ArrayBuffer||!i.DataView),c=d,u=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(n=i[h[u++]])?(a(n.prototype,s,!0),a(n.prototype,l,!0)):c=!1;t.exports={ABV:d,CONSTR:c,TYPED:s,VIEW:l}},{"./_global":43,"./_hide":45,"./_uid":126}],126:[function(e,t,o){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],127:[function(e,t,o){var n=e("./_global").navigator;t.exports=n&&n.userAgent||""},{"./_global":43}],128:[function(e,t,o){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":54}],129:[function(e,t,o){var n=e("./_global"),i=e("./_core"),a=e("./_library"),r=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},{"./_core":25,"./_global":43,"./_library":62,"./_object-dp":74,"./_wks-ext":130}],130:[function(e,t,o){o.f=e("./_wks")},{"./_wks":131}],131:[function(e,t,o){var n=e("./_shared")("wks"),i=e("./_uid"),a=e("./_global").Symbol,r="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=r&&a[e]||(r?a:i)("Symbol."+e))}).store=n},{"./_global":43,"./_shared":105,"./_uid":126}],132:[function(e,t,o){var n=e("./_classof"),i=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},{"./_classof":19,"./_core":25,"./_iterators":61,"./_wks":131}],133:[function(e,t,o){var n=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":35,"./_replacer":97}],134:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":6,"./_array-copy-within":10,"./_export":35}],135:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(4);n(n.P+n.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e,t){return i(this,e,t)}})},{"./_array-methods":14,"./_export":35,"./_strict-method":107}],136:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":6,"./_array-fill":11,"./_export":35}],137:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(2);n(n.P+n.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e,t){return i(this,e,t)}})},{"./_array-methods":14,"./_export":35,"./_strict-method":107}],138:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(6),a="findIndex",r=!0;a in[]&&Array(1)[a](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),e("./_add-to-unscopables")(a)},{"./_add-to-unscopables":6,"./_array-methods":14,"./_export":35}],139:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":6,"./_array-methods":14,"./_export":35}],140:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(0),a=e("./_strict-method")([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(e,t){return i(this,e,t)}})},{"./_array-methods":14,"./_export":35,"./_strict-method":107}],141:[function(e,t,o){var f=e("./_ctx"),n=e("./_export"),p=e("./_to-object"),g=e("./_iter-call"),v=e("./_is-array-iter"),y=e("./_to-length"),b=e("./_create-property"),_=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e,t,o){var n,i,a,r,s=p(e),l="function"==typeof this?this:Array,d=arguments.length,c=1<d?t:void 0,u=void 0!==c,h=0,m=_(s);if(u&&(c=f(c,2<d?o:void 0,2)),null==m||l==Array&&v(m))for(i=new l(n=y(s.length));h<n;h++)b(i,h,u?c(s[h],h):s[h]);else for(r=m.call(s),i=new l;!(a=r.next()).done;h++)b(i,h,u?g(r,c,[a.value,h],!0):a.value);return i.length=h,i}})},{"./_create-property":26,"./_ctx":27,"./_export":35,"./_is-array-iter":51,"./_iter-call":56,"./_iter-detect":59,"./_to-length":120,"./_to-object":121,"./core.get-iterator-method":132}],142:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!1),a=[].indexOf,r=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(r||!e("./_strict-method")(a)),"Array",{indexOf:function(e,t){return r?a.apply(this,arguments)||0:i(this,e,t)}})},{"./_array-includes":13,"./_export":35,"./_strict-method":107}],143:[function(e,t,o){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":35,"./_is-array":52}],144:[function(e,t,o){var n=e("./_add-to-unscopables"),i=e("./_iter-step"),a=e("./_iterators"),r=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?o:"values"==t?e[o]:[o,e[o]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":6,"./_iter-define":58,"./_iter-step":60,"./_iterators":61,"./_to-iobject":119}],145:[function(e,t,o){var n=e("./_export"),i=e("./_to-iobject"),a=[].join;n(n.P+n.F*(e("./_iobject")!=Object||!e("./_strict-method")(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},{"./_export":35,"./_iobject":50,"./_strict-method":107,"./_to-iobject":119}],146:[function(e,t,o){var n=e("./_export"),a=e("./_to-iobject"),r=e("./_to-integer"),s=e("./_to-length"),l=[].lastIndexOf,d=!!l&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(d||!e("./_strict-method")(l)),"Array",{lastIndexOf:function(e,t){if(d)return l.apply(this,arguments)||0;var o=a(this),n=s(o.length),i=n-1;for(1<arguments.length&&(i=Math.min(i,r(t))),i<0&&(i=n+i);0<=i;i--)if(i in o&&o[i]===e)return i||0;return-1}})},{"./_export":35,"./_strict-method":107,"./_to-integer":118,"./_to-iobject":119,"./_to-length":120}],147:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(1);n(n.P+n.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e,t){return i(this,e,t)}})},{"./_array-methods":14,"./_export":35,"./_strict-method":107}],148:[function(e,t,o){var n=e("./_export"),i=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,o=new("function"==typeof this?this:Array)(t);e<t;)i(o,e,arguments[e++]);return o.length=t,o}})},{"./_create-property":26,"./_export":35,"./_fails":37}],149:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e,t){return i(this,e,arguments.length,t,!0)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":107}],150:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e,t){return i(this,e,arguments.length,t,!1)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":107}],151:[function(e,t,o){var n=e("./_export"),i=e("./_html"),d=e("./_cof"),c=e("./_to-absolute-index"),u=e("./_to-length"),h=[].slice;n(n.P+n.F*e("./_fails")(function(){i&&h.call(i)}),"Array",{slice:function(e,t){var o=u(this.length),n=d(this);if(t=void 0===t?o:t,"Array"==n)return h.call(this,e,t);for(var i=c(e,o),a=c(t,o),r=u(a-i),s=new Array(r),l=0;l<r;l++)s[l]="String"==n?this.charAt(i+l):this[i+l];return s}})},{"./_cof":20,"./_export":35,"./_fails":37,"./_html":46,"./_to-absolute-index":116,"./_to-length":120}],152:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(3);n(n.P+n.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e,t){return i(this,e,t)}})},{"./_array-methods":14,"./_export":35,"./_strict-method":107}],153:[function(e,t,o){var n=e("./_export"),i=e("./_a-function"),a=e("./_to-object"),r=e("./_fails"),s=[].sort,l=[1,2,3];n(n.P+n.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},{"./_a-function":4,"./_export":35,"./_fails":37,"./_strict-method":107,"./_to-object":121}],154:[function(e,t,o){e("./_set-species")("Array")},{"./_set-species":102}],155:[function(e,t,o){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":35}],156:[function(e,t,o){var n=e("./_export"),i=e("./_date-to-iso-string");n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{"./_date-to-iso-string":28,"./_export":35}],157:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var e=i(this),t=a(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}})},{"./_export":35,"./_fails":37,"./_to-object":121,"./_to-primitive":122}],158:[function(e,t,o){var n=e("./_wks")("toPrimitive"),i=Date.prototype;n in i||e("./_hide")(i,n,e("./_date-to-primitive"))},{"./_date-to-primitive":29,"./_hide":45,"./_wks":131}],159:[function(e,t,o){var n=Date.prototype,i="Invalid Date",a=n.toString,r=n.getTime;new Date(NaN)+""!=i&&e("./_redefine")(n,"toString",function(){var e=r.call(this);return e==e?a.call(this):i})},{"./_redefine":94}],160:[function(e,t,o){var n=e("./_export");n(n.P,"Function",{bind:e("./_bind")})},{"./_bind":18,"./_export":35}],161:[function(e,t,o){var n=e("./_is-object"),i=e("./_object-gpo"),a=e("./_wks")("hasInstance"),r=Function.prototype;a in r||e("./_object-dp").f(r,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":54,"./_object-dp":74,"./_object-gpo":81,"./_wks":131}],162:[function(e,t,o){var n=e("./_object-dp").f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||e("./_descriptors")&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{"./_descriptors":31,"./_object-dp":74}],163:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":128}],164:[function(e,t,o){var n=e("./_export"),i=e("./_math-log1p"),a=Math.sqrt,r=Math.acosh;n(n.S+n.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},{"./_export":35,"./_math-log1p":65}],165:[function(e,t,o){var n=e("./_export"),i=Math.asinh;n(n.S+n.F*!(i&&0<1/i(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{"./_export":35}],166:[function(e,t,o){var n=e("./_export"),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":35}],167:[function(e,t,o){var n=e("./_export"),i=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":35,"./_math-sign":67}],168:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":35}],169:[function(e,t,o){var n=e("./_export"),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},{"./_export":35}],170:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1");n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":35,"./_math-expm1":63}],171:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":35,"./_math-fround":64}],172:[function(e,t,o){var n=e("./_export"),l=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var o,n,i=0,a=0,r=arguments.length,s=0;a<r;)s<(o=l(arguments[a++]))?(i=i*(n=s/o)*n+1,s=o):i+=0<o?(n=o/s)*n:o;return s===1/0?1/0:s*Math.sqrt(i)}})},{"./_export":35}],173:[function(e,t,o){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n;return 0|i*a+((65535&o>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},{"./_export":35,"./_fails":37}],174:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":35}],175:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":35,"./_math-log1p":65}],176:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":35}],177:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":35,"./_math-sign":67}],178:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S+n.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{"./_export":35,"./_fails":37,"./_math-expm1":63}],179:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),o=i(-e);return t==1/0?1:o==1/0?-1:(t-o)/(a(e)+a(-e))}})},{"./_export":35,"./_math-expm1":63}],180:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{"./_export":35}],181:[function(e,t,o){function n(e){var t=c(e,!1);if("string"==typeof t&&2<t.length){var o,n,i,a=(t=b?t.trim():m(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(o=t.charCodeAt(2))||120===o)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var r,s=t.slice(2),l=0,d=s.length;l<d;l++)if((r=s.charCodeAt(l))<48||i<r)return NaN;return parseInt(s,n)}}return+t}var i=e("./_global"),a=e("./_has"),r=e("./_cof"),s=e("./_inherit-if-required"),c=e("./_to-primitive"),l=e("./_fails"),d=e("./_object-gopn").f,u=e("./_object-gopd").f,h=e("./_object-dp").f,m=e("./_string-trim").trim,f="Number",p=i[f],g=p,v=p.prototype,y=r(e("./_object-create")(v))==f,b="trim"in String.prototype;if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof p&&(y?l(function(){v.valueOf.call(o)}):r(o)!=f)?s(new g(n(t)),o,p):n(t)};for(var _,w=e("./_descriptors")?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)a(g,_=w[k])&&!a(p,_)&&h(p,_,u(g,_));(p.prototype=v).constructor=p,e("./_redefine")(i,f,p)}},{"./_cof":20,"./_descriptors":31,"./_fails":37,"./_global":43,"./_has":44,"./_inherit-if-required":48,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_redefine":94,"./_string-trim":113,"./_to-primitive":122}],182:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":35}],183:[function(e,t,o){var n=e("./_export"),i=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":35,"./_global":43}],184:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":35,"./_is-integer":53}],185:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":35}],186:[function(e,t,o){var n=e("./_export"),i=e("./_is-integer"),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},{"./_export":35,"./_is-integer":53}],187:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":35}],188:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":35}],189:[function(e,t,o){var n=e("./_export"),i=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":35,"./_parse-float":88}],190:[function(e,t,o){var n=e("./_export"),i=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":35,"./_parse-int":89}],191:[function(e,t,o){function d(e,t){for(var o=-1,n=t;++o<6;)n+=e*r[o],r[o]=n%1e7,n=a(n/1e7)}function c(e){for(var t=6,o=0;0<=--t;)o+=r[t],r[t]=a(o/e),o=o%e*1e7}function u(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==r[e]){var o=String(r[e]);t=""===t?o:t+f.call("0",7-o.length)+o}return t}var n=e("./_export"),h=e("./_to-integer"),m=e("./_a-number-value"),f=e("./_string-repeat"),i=1..toFixed,a=Math.floor,r=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!",g=function(e,t,o){return 0===t?o:t%2==1?g(e,t-1,o*e):g(e*e,t/2,o)};n(n.P+n.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){i.call({})})),"Number",{toFixed:function(e){var t,o,n,i,a=m(this,p),r=h(e),s="",l="0";if(r<0||20<r)throw RangeError(p);if(a!=a)return"NaN";if(a<=-1e21||1e21<=a)return String(a);if(a<0&&(s="-",a=-a),1e-21<a)if(o=(t=function(e){for(var t=0,o=e;4096<=o;)t+=12,o/=4096;for(;2<=o;)t+=1,o/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),o*=4503599627370496,0<(t=52-t)){for(d(0,o),n=r;7<=n;)d(1e7,0),n-=7;for(d(g(10,n,1),0),n=t-1;23<=n;)c(1<<23),n-=23;c(1<<n),d(1,1),c(2),l=u()}else d(0,o),d(1<<-t,0),l=u()+f.call("0",r);return l=0<r?s+((i=l.length)<=r?"0."+f.call("0",r-i)+l:l.slice(0,i-r)+"."+l.slice(i-r)):s+l}})},{"./_a-number-value":5,"./_export":35,"./_fails":37,"./_string-repeat":112,"./_to-integer":118}],192:[function(e,t,o){var n=e("./_export"),i=e("./_fails"),a=e("./_a-number-value"),r=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==r.call(1,void 0)})||!i(function(){r.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},{"./_a-number-value":5,"./_export":35,"./_fails":37}],193:[function(e,t,o){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":35,"./_object-assign":72}],194:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":35,"./_object-create":73}],195:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":31,"./_export":35,"./_object-dps":75}],196:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":31,"./_export":35,"./_object-dp":74}],197:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":54,"./_meta":68,"./_object-sap":85}],198:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":77,"./_object-sap":85,"./_to-iobject":119}],199:[function(e,t,o){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":78,"./_object-sap":85}],200:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":81,"./_object-sap":85,"./_to-object":121}],201:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},{"./_is-object":54,"./_object-sap":85}],202:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":54,"./_object-sap":85}],203:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":54,"./_object-sap":85}],204:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":35,"./_same-value":98}],205:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":83,"./_object-sap":85,"./_to-object":121}],206:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":54,"./_meta":68,"./_object-sap":85}],207:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":54,"./_meta":68,"./_object-sap":85}],208:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":35,"./_set-proto":101}],209:[function(e,t,o){var n=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":19,"./_redefine":94,"./_wks":131}],210:[function(e,t,o){var n=e("./_export"),i=e("./_parse-float");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},{"./_export":35,"./_parse-float":88}],211:[function(e,t,o){var n=e("./_export"),i=e("./_parse-int");n(n.G+n.F*(parseInt!=i),{parseInt:i})},{"./_export":35,"./_parse-int":89}],212:[function(o,e,t){function n(){}function u(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t}function i(c,o){if(!c._n){c._n=!0;var n=c._c;k(function(){for(var l=c._v,d=1==c._s,e=0,t=function(e){var t,o,n,i=d?e.ok:e.fail,a=e.resolve,r=e.reject,s=e.domain;try{i?(d||(2==c._h&&O(c),c._h=1),!0===i?t=l:(s&&s.enter(),t=i(l),s&&(s.exit(),n=!0)),t===e.promise?r(T("Promise-chain cycle")):(o=u(t))?o.call(t,a,r):a(t)):r(l)}catch(e){s&&!n&&s.exit(),r(e)}};n.length>e;)t(n[e++]);c._c=[],c._n=!1,o&&!c._h&&j(c)})}}function a(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),i(t,!0))}var r,s,l,d,c=o("./_library"),h=o("./_global"),m=o("./_ctx"),f=o("./_classof"),p=o("./_export"),g=o("./_is-object"),v=o("./_a-function"),y=o("./_an-instance"),b=o("./_for-of"),_=o("./_species-constructor"),w=o("./_task").set,k=o("./_microtask")(),S=o("./_new-promise-capability"),P=o("./_perform"),I=o("./_user-agent"),x=o("./_promise-resolve"),C="Promise",T=h.TypeError,D=h.process,E=D&&D.versions,L=E&&E.v8||"",A=h[C],M="process"==f(D),R=s=S.f,W=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[o("./_wks")("species")]=function(e){e(n,n)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(n)instanceof t&&0!==L.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(e){}}(),j=function(a){w.call(h,function(){var e,t,o,n=a._v,i=N(a);if(i&&(e=P(function(){M?D.emit("unhandledRejection",n,a):(t=h.onunhandledrejection)?t({promise:a,reason:n}):(o=h.console)&&o.error&&o.error("Unhandled promise rejection",n)}),a._h=M||N(a)?2:1),a._a=void 0,i&&e.e)throw e.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},O=function(t){w.call(h,function(){var e;M?D.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},V=function(e){var o,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw T("Promise can't be resolved itself");(o=u(e))?k(function(){var t={_w:n,_d:!1};try{o.call(e,m(V,t,1),m(a,t,1))}catch(e){a.call(t,e)}}):(n._v=e,n._s=1,i(n,!1))}catch(e){a.call({_w:n,_d:!1},e)}}};W||(A=function(e){y(this,A,C,"_h"),v(e),r.call(this);try{e(m(V,this,1),m(a,this,1))}catch(e){a.call(this,e)}},(r=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("./_redefine-all")(A.prototype,{then:function(e,t){var o=R(_(this,A));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=M?D.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&i(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),l=function(){var e=new r;this.promise=e,this.resolve=m(V,e,1),this.reject=m(a,e,1)},S.f=R=function(e){return e===A||e===d?new l(e):s(e)}),p(p.G+p.W+p.F*!W,{Promise:A}),o("./_set-to-string-tag")(A,C),o("./_set-species")(C),d=o("./_core")[C],p(p.S+p.F*!W,C,{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(c||!W),C,{resolve:function(e){return x(c&&this===d?A:this,e)}}),p(p.S+p.F*!(W&&o("./_iter-detect")(function(e){A.all(e).catch(n)})),C,{all:function(e){var r=this,t=R(r),s=t.resolve,l=t.reject,o=P(function(){var n=[],i=0,a=1;b(e,!1,function(e){var t=i++,o=!1;n.push(void 0),a++,r.resolve(e).then(function(e){o||(o=!0,n[t]=e,--a||s(n))},l)}),--a||s(n)});return o.e&&l(o.v),t.promise},race:function(e){var t=this,o=R(t),n=o.reject,i=P(function(){b(e,!1,function(e){t.resolve(e).then(o.resolve,n)})});return i.e&&n(i.v),o.promise}})},{"./_a-function":4,"./_an-instance":8,"./_classof":19,"./_core":25,"./_ctx":27,"./_export":35,"./_for-of":41,"./_global":43,"./_is-object":54,"./_iter-detect":59,"./_library":62,"./_microtask":70,"./_new-promise-capability":71,"./_perform":90,"./_promise-resolve":91,"./_redefine-all":93,"./_set-species":102,"./_set-to-string-tag":103,"./_species-constructor":106,"./_task":115,"./_user-agent":127,"./_wks":131}],213:[function(e,t,o){var n=e("./_export"),a=e("./_a-function"),r=e("./_an-object"),s=(e("./_global").Reflect||{}).apply,l=Function.apply;n(n.S+n.F*!e("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(e,t,o){var n=a(e),i=r(o);return s?s(n,t,i):l.call(n,t,i)}})},{"./_a-function":4,"./_an-object":9,"./_export":35,"./_fails":37,"./_global":43}],214:[function(e,t,o){var n=e("./_export"),l=e("./_object-create"),d=e("./_a-function"),c=e("./_an-object"),u=e("./_is-object"),i=e("./_fails"),h=e("./_bind"),m=(e("./_global").Reflect||{}).construct,f=i(function(){function e(){}return!(m(function(){},[],e)instanceof e)}),p=!i(function(){m(function(){})});n(n.S+n.F*(f||p),"Reflect",{construct:function(e,t,o){d(e),c(t);var n=arguments.length<3?e:d(o);if(p&&!f)return m(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(h.apply(e,i))}var a=n.prototype,r=l(u(a)?a:Object.prototype),s=Function.apply.call(e,r,t);return u(s)?s:r}})},{"./_a-function":4,"./_an-object":9,"./_bind":18,"./_export":35,"./_fails":37,"./_global":43,"./_is-object":54,"./_object-create":73}],215:[function(e,t,o){var n=e("./_object-dp"),i=e("./_export"),a=e("./_an-object"),r=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,o){a(e),t=r(t,!0),a(o);try{return n.f(e,t,o),!0}catch(e){return!1}}})},{"./_an-object":9,"./_export":35,"./_fails":37,"./_object-dp":74,"./_to-primitive":122}],216:[function(e,t,o){var n=e("./_export"),i=e("./_object-gopd").f,a=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var o=i(a(e),t);return!(o&&!o.configurable)&&delete e[t]}})},{"./_an-object":9,"./_export":35,"./_object-gopd":77}],217:[function(e,t,o){function n(e){this._t=a(e),this._i=0;var t,o=this._k=[];for(t in e)o.push(t)}var i=e("./_export"),a=e("./_an-object");e("./_iter-create")(n,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new n(e)}})},{"./_an-object":9,"./_export":35,"./_iter-create":57}],218:[function(e,t,o){var n=e("./_object-gopd"),i=e("./_export"),a=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},{"./_an-object":9,"./_export":35,"./_object-gopd":77}],219:[function(e,t,o){var n=e("./_export"),i=e("./_object-gpo"),a=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},{"./_an-object":9,"./_export":35,"./_object-gpo":81}],220:[function(e,t,o){var r=e("./_object-gopd"),s=e("./_object-gpo"),l=e("./_has"),n=e("./_export"),d=e("./_is-object"),c=e("./_an-object");n(n.S,"Reflect",{get:function e(t,o){var n,i,a=arguments.length<3?t:arguments[2];return c(t)===a?t[o]:(n=r.f(t,o))?l(n,"value")?n.value:void 0!==n.get?n.get.call(a):void 0:d(i=s(t))?e(i,o,a):void 0}})},{"./_an-object":9,"./_export":35,"./_has":44,"./_is-object":54,"./_object-gopd":77,"./_object-gpo":81}],221:[function(e,t,o){var n=e("./_export");n(n.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":35}],222:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},{"./_an-object":9,"./_export":35}],223:[function(e,t,o){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":35,"./_own-keys":87}],224:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},{"./_an-object":9,"./_export":35}],225:[function(e,t,o){var n=e("./_export"),i=e("./_set-proto");i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":35,"./_set-proto":101}],226:[function(e,t,o){var l=e("./_object-dp"),d=e("./_object-gopd"),c=e("./_object-gpo"),u=e("./_has"),n=e("./_export"),h=e("./_property-desc"),m=e("./_an-object"),f=e("./_is-object");n(n.S,"Reflect",{set:function e(t,o,n){var i,a,r=arguments.length<4?t:arguments[3],s=d.f(m(t),o);if(!s){if(f(a=c(t)))return e(a,o,n,r);s=h(0)}if(u(s,"value")){if(!1===s.writable||!f(r))return!1;if(i=d.f(r,o)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,l.f(r,o,i)}else l.f(r,o,h(0,n));return!0}return void 0!==s.set&&(s.set.call(r,n),!0)}})},{"./_an-object":9,"./_export":35,"./_has":44,"./_is-object":54,"./_object-dp":74,"./_object-gopd":77,"./_object-gpo":81,"./_property-desc":92}],227:[function(e,t,o){var n=e("./_global"),a=e("./_inherit-if-required"),i=e("./_object-dp").f,r=e("./_object-gopn").f,s=e("./_is-regexp"),l=e("./_flags"),d=n.RegExp,c=d,u=d.prototype,h=/a/g,m=/a/g,f=new d(h)!==h;if(e("./_descriptors")&&(!f||e("./_fails")(function(){return m[e("./_wks")("match")]=!1,d(h)!=h||d(m)==m||"/a/i"!=d(h,"i")}))){d=function(e,t){var o=this instanceof d,n=s(e),i=void 0===t;return!o&&n&&e.constructor===d&&i?e:a(f?new c(n&&!i?e.source:e,t):c((n=e instanceof d)?e.source:e,n&&i?l.call(e):t),o?this:u,d)};for(var p=function(t){t in d||i(d,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},g=r(c),v=0;g.length>v;)p(g[v++]);(u.constructor=d).prototype=u,e("./_redefine")(n,"RegExp",d)}e("./_set-species")("RegExp")},{"./_descriptors":31,"./_fails":37,"./_flags":39,"./_global":43,"./_inherit-if-required":48,"./_is-regexp":55,"./_object-dp":74,"./_object-gopn":79,"./_redefine":94,"./_set-species":102,"./_wks":131}],228:[function(e,t,o){var n=e("./_regexp-exec");e("./_export")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},{"./_export":35,"./_regexp-exec":96}],229:[function(e,t,o){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":31,"./_flags":39,"./_object-dp":74}],230:[function(e,t,o){var u=e("./_an-object"),h=e("./_to-length"),m=e("./_advance-string-index"),f=e("./_regexp-exec-abstract");e("./_fix-re-wks")("match",1,function(n,i,d,c){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=c(d,e,this);if(t.done)return t.value;var o=u(e),n=String(this);if(!o.global)return f(o,n);for(var i,a=o.unicode,r=[],s=o.lastIndex=0;null!==(i=f(o,n));){var l=String(i[0]);""===(r[s]=l)&&(o.lastIndex=m(n,h(o.lastIndex),a)),s++}return 0===s?null:r}]})},{"./_advance-string-index":7,"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":95,"./_to-length":120}],231:[function(e,t,o){var P=e("./_an-object"),n=e("./_to-object"),I=e("./_to-length"),x=e("./_to-integer"),C=e("./_advance-string-index"),T=e("./_regexp-exec-abstract"),D=Math.max,E=Math.min,h=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;e("./_fix-re-wks")("replace",2,function(i,a,w,k){return[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):w.call(String(o),e,t)},function(e,t){var o=k(w,e,this,t);if(o.done)return o.value;var n=P(e),i=String(this),a="function"==typeof t;a||(t=String(t));var r=n.global;if(r){var s=n.unicode;n.lastIndex=0}for(var l=[];;){var d=T(n,i);if(null===d)break;if(l.push(d),!r)break;""===String(d[0])&&(n.lastIndex=C(i,I(n.lastIndex),s))}for(var c,u="",h=0,m=0;m<l.length;m++){d=l[m];for(var f=String(d[0]),p=D(E(x(d.index),i.length),0),g=[],v=1;v<d.length;v++)g.push(void 0===(c=d[v])?c:String(c));var y=d.groups;if(a){var b=[f].concat(g,p,i);void 0!==y&&b.push(y);var _=String(t.apply(void 0,b))}else _=S(f,i,p,g,y,t);h<=p&&(u+=i.slice(h,p)+_,h=p+f.length)}return u+i.slice(h)}];function S(a,r,s,l,d,e){var c=s+a.length,u=l.length,t=f;return void 0!==d&&(d=n(d),t=m),w.call(e,t,function(e,t){var o;switch(t.charAt(0)){case"$":return"$";case"&":return a;case"`":return r.slice(0,s);case"'":return r.slice(c);case"<":o=d[t.slice(1,-1)];break;default:var n=+t;if(0==n)return e;if(u<n){var i=h(n/10);return 0===i?e:i<=u?void 0===l[i-1]?t.charAt(1):l[i-1]+t.charAt(1):e}o=l[n-1]}return void 0===o?"":o})}})},{"./_advance-string-index":7,"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":95,"./_to-integer":118,"./_to-length":120,"./_to-object":121}],232:[function(e,t,o){var l=e("./_an-object"),d=e("./_same-value"),c=e("./_regexp-exec-abstract");e("./_fix-re-wks")("search",1,function(n,i,r,s){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=s(r,e,this);if(t.done)return t.value;var o=l(e),n=String(this),i=o.lastIndex;d(i,0)||(o.lastIndex=0);var a=c(o,n);return d(o.lastIndex,i)||(o.lastIndex=i),null===a?-1:a.index}]})},{"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":95,"./_same-value":98}],233:[function(e,t,o){var u=e("./_is-regexp"),b=e("./_an-object"),_=e("./_species-constructor"),w=e("./_advance-string-index"),k=e("./_to-length"),S=e("./_regexp-exec-abstract"),h=e("./_regexp-exec"),n=e("./_fails"),P=Math.min,m=[].push,r="split",f="length",p="lastIndex",I=4294967295,x=!n(function(){RegExp(I,"y")});e("./_fix-re-wks")("split",2,function(i,a,g,v){var y;return y="c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[f]||2!="ab"[r](/(?:ab)*/)[f]||4!="."[r](/(.?)(.?)/)[f]||1<"."[r](/()()/)[f]||""[r](/.?/)[f]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!u(e))return g.call(o,e,t);for(var n,i,a,r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=void 0===t?I:t>>>0,c=new RegExp(e.source,s+"g");(n=h.call(c,o))&&!(l<(i=c[p])&&(r.push(o.slice(l,n.index)),1<n[f]&&n.index<o[f]&&m.apply(r,n.slice(1)),a=n[0][f],l=i,r[f]>=d));)c[p]===n.index&&c[p]++;return l===o[f]?!a&&c.test("")||r.push(""):r.push(o.slice(l)),r[f]>d?r.slice(0,d):r}:"0"[r](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)}:g,[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):y.call(String(o),e,t)},function(e,t){var o=v(y,e,this,t,y!==g);if(o.done)return o.value;var n=b(e),i=String(this),a=_(n,RegExp),r=n.unicode,s=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(x?"y":"g"),l=new a(x?n:"^(?:"+n.source+")",s),d=void 0===t?I:t>>>0;if(0==d)return[];if(0===i.length)return null===S(l,i)?[i]:[];for(var c=0,u=0,h=[];u<i.length;){l.lastIndex=x?u:0;var m,f=S(l,x?i:i.slice(u));if(null===f||(m=P(k(l.lastIndex+(x?0:u)),i.length))===c)u=w(i,u,r);else{if(h.push(i.slice(c,u)),h.length===d)return h;for(var p=1;p<=f.length-1;p++)if(h.push(f[p]),h.length===d)return h;u=c=m}}return h.push(i.slice(c)),h}]})},{"./_advance-string-index":7,"./_an-object":9,"./_fails":37,"./_fix-re-wks":38,"./_is-regexp":55,"./_regexp-exec":96,"./_regexp-exec-abstract":95,"./_species-constructor":106,"./_to-length":120}],234:[function(t,e,o){t("./es6.regexp.flags");function n(e){t("./_redefine")(RegExp.prototype,s,e,!0)}var i=t("./_an-object"),a=t("./_flags"),r=t("./_descriptors"),s="toString",l=/./[s];t("./_fails")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?n(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?a.call(e):void 0)}):l.name!=s&&n(function(){return l.call(this)})},{"./_an-object":9,"./_descriptors":31,"./_fails":37,"./_flags":39,"./_redefine":94,"./es6.regexp.flags":229}],235:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":128}],236:[function(e,t,o){e("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":110}],237:[function(e,t,o){e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":110}],238:[function(e,t,o){e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":110}],239:[function(e,t,o){e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":110}],240:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":35,"./_string-at":108}],241:[function(e,t,o){var n=e("./_export"),s=e("./_to-length"),l=e("./_string-context"),d="endsWith",c=""[d];n(n.P+n.F*e("./_fails-is-regexp")(d),"String",{endsWith:function(e,t){var o=l(this,e,d),n=1<arguments.length?t:void 0,i=s(o.length),a=void 0===n?i:Math.min(s(n),i),r=String(e);return c?c.call(o,r,a):o.slice(a-r.length,a)===r}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":109,"./_to-length":120}],242:[function(e,t,o){e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":110}],243:[function(e,t,o){e("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":110}],244:[function(e,t,o){e("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":110}],245:[function(e,t,o){var n=e("./_export"),a=e("./_to-absolute-index"),r=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,o=[],n=arguments.length,i=0;i<n;){if(t=+arguments[i++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");o.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return o.join("")}})},{"./_export":35,"./_to-absolute-index":116}],246:[function(e,t,o){var n=e("./_export"),i=e("./_string-context");n(n.P+n.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e,t){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?t:void 0)}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":109}],247:[function(e,t,o){e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":110}],248:[function(e,t,o){var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=n(t,o),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":58,"./_string-at":108}],249:[function(e,t,o){e("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":110}],250:[function(e,t,o){var n=e("./_export"),r=e("./_to-iobject"),s=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=r(e.raw),o=s(t.length),n=arguments.length,i=[],a=0;a<o;)i.push(String(t[a++])),a<n&&i.push(String(arguments[a]));return i.join("")}})},{"./_export":35,"./_to-iobject":119,"./_to-length":120}],251:[function(e,t,o){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":35,"./_string-repeat":112}],252:[function(e,t,o){e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":110}],253:[function(e,t,o){var n=e("./_export"),a=e("./_to-length"),r=e("./_string-context"),s="startsWith",l=""[s];n(n.P+n.F*e("./_fails-is-regexp")(s),"String",{startsWith:function(e,t){var o=r(this,e,s),n=a(Math.min(1<arguments.length?t:void 0,o.length)),i=String(e);return l?l.call(o,i,n):o.slice(n,n+i.length)===i}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":109,"./_to-length":120}],254:[function(e,t,o){e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":110}],255:[function(e,t,o){e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":110}],256:[function(e,t,o){e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":110}],257:[function(e,t,o){e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":113}],258:[function(e,t,o){function n(e){var t=q[e]=E(V[z]);return t._k=e,t}function i(e,t){P(e);for(var o,n=k(t=C(t)),i=0,a=n.length;i<a;)te(e,o=n[i++],t[o]);return e}function a(e){var t=J.call(this,e=T(e,!0));return!(this===Y&&c(q,e)&&!c(G,e))&&(!(t||!c(this,e)||!c(q,e)||c(this,U)&&this[U][e])||t)}function r(e,t){if(e=C(e),t=T(t,!0),e!==Y||!c(q,t)||c(G,t)){var o=j(e,t);return!o||!c(q,t)||c(e,U)&&e[U][t]||(o.enumerable=!0),o}}function s(e){for(var t,o=O(C(e)),n=[],i=0;o.length>i;)c(q,t=o[i++])||t==U||t==f||n.push(t);return n}function l(e){for(var t,o=e===Y,n=O(o?G:C(e)),i=[],a=0;n.length>a;)!c(q,t=n[a++])||o&&!c(Y,t)||i.push(q[t]);return i}var d=e("./_global"),c=e("./_has"),u=e("./_descriptors"),h=e("./_export"),m=e("./_redefine"),f=e("./_meta").KEY,p=e("./_fails"),g=e("./_shared"),v=e("./_set-to-string-tag"),y=e("./_uid"),b=e("./_wks"),_=e("./_wks-ext"),w=e("./_wks-define"),k=e("./_enum-keys"),S=e("./_is-array"),P=e("./_an-object"),I=e("./_is-object"),x=e("./_to-object"),C=e("./_to-iobject"),T=e("./_to-primitive"),D=e("./_property-desc"),E=e("./_object-create"),L=e("./_object-gopn-ext"),A=e("./_object-gopd"),M=e("./_object-gops"),R=e("./_object-dp"),W=e("./_object-keys"),j=A.f,N=R.f,O=L.f,V=d.Symbol,F=d.JSON,B=F&&F.stringify,z="prototype",U=b("_hidden"),H=b("toPrimitive"),J={}.propertyIsEnumerable,K=g("symbol-registry"),q=g("symbols"),G=g("op-symbols"),Y=Object[z],X="function"==typeof V&&!!M.f,Z=d.QObject,$=!Z||!Z[z]||!Z[z].findChild,Q=u&&p(function(){return 7!=E(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,o){var n=j(Y,t);n&&delete Y[t],N(e,t,o),n&&e!==Y&&N(Y,t,n)}:N,ee=X&&"symbol"==typeof V.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof V},te=function(e,t,o){return e===Y&&te(G,t,o),P(e),t=T(t,!0),P(o),c(q,t)?(o.enumerable?(c(e,U)&&e[U][t]&&(e[U][t]=!1),o=E(o,{enumerable:D(0,!1)})):(c(e,U)||N(e,U,D(1,{})),e[U][t]=!0),Q(e,t,o)):N(e,t,o)};X||(m((V=function(e){if(this instanceof V)throw TypeError("Symbol is not a constructor!");var t=y(0<arguments.length?e:void 0),o=function(e){this===Y&&o.call(G,e),c(this,U)&&c(this[U],t)&&(this[U][t]=!1),Q(this,t,D(1,e))};return u&&$&&Q(Y,t,{configurable:!0,set:o}),n(t)})[z],"toString",function(){return this._k}),A.f=r,R.f=te,e("./_object-gopn").f=L.f=s,e("./_object-pie").f=a,M.f=l,u&&!e("./_library")&&m(Y,"propertyIsEnumerable",a,!0),_.f=function(e){return n(b(e))}),h(h.G+h.W+h.F*!X,{Symbol:V});for(var oe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;oe.length>ne;)b(oe[ne++]);for(var ie=W(b.store),ae=0;ie.length>ae;)w(ie[ae++]);h(h.S+h.F*!X,"Symbol",{for:function(e){return c(K,e+="")?K[e]:K[e]=V(e)},keyFor:function(e){if(!ee(e))throw TypeError(e+" is not a symbol!");for(var t in K)if(K[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),h(h.S+h.F*!X,"Object",{create:function(e,t){return void 0===t?E(e):i(E(e),t)},defineProperty:te,defineProperties:i,getOwnPropertyDescriptor:r,getOwnPropertyNames:s,getOwnPropertySymbols:l});var re=p(function(){M.f(1)});h(h.S+h.F*re,"Object",{getOwnPropertySymbols:function(e){return M.f(x(e))}}),F&&h(h.S+h.F*(!X||p(function(){var e=V();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))})),"JSON",{stringify:function(e){for(var t,o,n=[e],i=1;i<arguments.length;)n.push(arguments[i++]);if(o=t=n[1],(I(t)||void 0!==e)&&!ee(e))return S(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!ee(t))return t}),n[1]=t,B.apply(F,n)}}),V[z][H]||e("./_hide")(V[z],H,V[z].valueOf),v(V,"Symbol"),v(Math,"Math",!0),v(d.JSON,"JSON",!0)},{"./_an-object":9,"./_descriptors":31,"./_enum-keys":34,"./_export":35,"./_fails":37,"./_global":43,"./_has":44,"./_hide":45,"./_is-array":52,"./_is-object":54,"./_library":62,"./_meta":68,"./_object-create":73,"./_object-dp":74,"./_object-gopd":77,"./_object-gopn":79,"./_object-gopn-ext":78,"./_object-gops":80,"./_object-keys":83,"./_object-pie":84,"./_property-desc":92,"./_redefine":94,"./_set-to-string-tag":103,"./_shared":105,"./_to-iobject":119,"./_to-object":121,"./_to-primitive":122,"./_uid":126,"./_wks":131,"./_wks-define":129,"./_wks-ext":130}],259:[function(e,t,o){var n=e("./_export"),i=e("./_typed"),a=e("./_typed-buffer"),d=e("./_an-object"),c=e("./_to-absolute-index"),u=e("./_to-length"),r=e("./_is-object"),s=e("./_global").ArrayBuffer,h=e("./_species-constructor"),m=a.ArrayBuffer,f=a.DataView,l=i.ABV&&s.isView,p=m.prototype.slice,g=i.VIEW,v="ArrayBuffer";n(n.G+n.W+n.F*(s!==m),{ArrayBuffer:m}),n(n.S+n.F*!i.CONSTR,v,{isView:function(e){return l&&l(e)||r(e)&&g in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new m(2).slice(1,void 0).byteLength}),v,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(d(this),e);for(var o=d(this).byteLength,n=c(e,o),i=c(void 0===t?o:t,o),a=new(h(this,m))(u(i-n)),r=new f(this),s=new f(a),l=0;n<i;)s.setUint8(l++,r.getUint8(n++));return a}}),e("./_set-species")(v)},{"./_an-object":9,"./_export":35,"./_fails":37,"./_global":43,"./_is-object":54,"./_set-species":102,"./_species-constructor":106,"./_to-absolute-index":116,"./_to-length":120,"./_typed":125,"./_typed-buffer":124}],260:[function(e,t,o){var n=e("./_export");n(n.G+n.W+n.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":35,"./_typed":125,"./_typed-buffer":124}],261:[function(e,t,o){e("./_typed-array")("Float32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],262:[function(e,t,o){e("./_typed-array")("Float64",8,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],263:[function(e,t,o){e("./_typed-array")("Int16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],264:[function(e,t,o){e("./_typed-array")("Int32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],265:[function(e,t,o){e("./_typed-array")("Int8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],266:[function(e,t,o){e("./_typed-array")("Uint16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],267:[function(e,t,o){e("./_typed-array")("Uint32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],268:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":123}],269:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}},!0)},{"./_typed-array":123}],270:[function(e,t,o){function n(t){return function(e){return t(this,0<arguments.length?e:void 0)}}var a,i=e("./_global"),r=e("./_array-methods")(0),s=e("./_redefine"),l=e("./_meta"),d=e("./_object-assign"),c=e("./_collection-weak"),u=e("./_is-object"),h=e("./_validate-collection"),m=e("./_validate-collection"),f=!i.ActiveXObject&&"ActiveXObject"in i,p="WeakMap",g=l.getWeak,v=Object.isExtensible,y=c.ufstore,b={get:function(e){if(u(e)){var t=g(e);return!0===t?y(h(this,p)).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(h(this,p),e,t)}},_=t.exports=e("./_collection")(p,n,b,c,!0,!0);m&&f&&(d((a=c.getConstructor(n,p)).prototype,b),l.NEED=!0,r(["delete","has","get","set"],function(n){var e=_.prototype,i=e[n];s(e,n,function(e,t){if(!u(e)||v(e))return i.call(this,e,t);this._f||(this._f=new a);var o=this._f[n](e,t);return"set"==n?this:o})}))},{"./_array-methods":14,"./_collection":24,"./_collection-weak":23,"./_global":43,"./_is-object":54,"./_meta":68,"./_object-assign":72,"./_redefine":94,"./_validate-collection":128}],271:[function(e,t,o){var n=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(t){return function(e){return t(this,0<arguments.length?e:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":24,"./_collection-weak":23,"./_validate-collection":128}],272:[function(e,t,o){var n=e("./_export"),a=e("./_flatten-into-array"),r=e("./_to-object"),s=e("./_to-length"),l=e("./_a-function"),d=e("./_array-species-create");n(n.P,"Array",{flatMap:function(e,t){var o,n,i=r(this);return l(e),o=s(i.length),n=d(i,0),a(n,i,i,o,0,1,e,t),n}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":4,"./_add-to-unscopables":6,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-length":120,"./_to-object":121}],273:[function(e,t,o){var n=e("./_export"),a=e("./_flatten-into-array"),r=e("./_to-object"),s=e("./_to-length"),l=e("./_to-integer"),d=e("./_array-species-create");n(n.P,"Array",{flatten:function(e){var t=e,o=r(this),n=s(o.length),i=d(o,0);return a(i,o,o,n,0,void 0===t?1:l(t)),i}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":6,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-integer":118,"./_to-length":120,"./_to-object":121}],274:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":6,"./_array-includes":13,"./_export":35}],275:[function(e,t,o){var n=e("./_export"),i=e("./_microtask")(),a=e("./_global").process,r="process"==e("./_cof")(a);n(n.G,{asap:function(e){var t=r&&a.domain;i(t?t.bind(e):e)}})},{"./_cof":20,"./_export":35,"./_global":43,"./_microtask":70}],276:[function(e,t,o){var n=e("./_export"),i=e("./_cof");n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":20,"./_export":35}],277:[function(e,t,o){var n=e("./_export");n(n.G,{global:e("./_global")})},{"./_export":35,"./_global":43}],278:[function(e,t,o){e("./_set-collection-from")("Map")},{"./_set-collection-from":99}],279:[function(e,t,o){e("./_set-collection-of")("Map")},{"./_set-collection-of":100}],280:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":22,"./_export":35}],281:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{clamp:function(e,t,o){return Math.min(o,Math.max(t,e))}})},{"./_export":35}],282:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":35}],283:[function(e,t,o){var n=e("./_export"),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},{"./_export":35}],284:[function(e,t,o){var n=e("./_export"),a=e("./_math-scale"),r=e("./_math-fround");n(n.S,"Math",{fscale:function(e,t,o,n,i){return r(a(e,t,o,n,i))}})},{"./_export":35,"./_math-fround":64,"./_math-scale":66}],285:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{iaddh:function(e,t,o,n){var i=e>>>0,a=o>>>0;return(t>>>0)+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},{"./_export":35}],286:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{imulh:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n,r=o>>16,s=n>>16,l=(r*a>>>0)+(i*a>>>16);return r*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},{"./_export":35}],287:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{isubh:function(e,t,o,n){var i=e>>>0,a=o>>>0;return(t>>>0)-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},{"./_export":35}],288:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":35}],289:[function(e,t,o){var n=e("./_export"),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},{"./_export":35}],290:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{scale:e("./_math-scale")})},{"./_export":35,"./_math-scale":66}],291:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},{"./_export":35}],292:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{umulh:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n,r=o>>>16,s=n>>>16,l=(r*a>>>0)+(i*a>>>16);return r*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},{"./_export":35}],293:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){r.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":31,"./_export":35,"./_object-dp":74,"./_object-forced-pam":76,"./_to-object":121}],294:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){r.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":31,"./_export":35,"./_object-dp":74,"./_object-forced-pam":76,"./_to-object":121}],295:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},{"./_export":35,"./_object-to-array":86}],296:[function(e,t,o){var n=e("./_export"),l=e("./_own-keys"),d=e("./_to-iobject"),c=e("./_object-gopd"),u=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,o,n=d(e),i=c.f,a=l(n),r={},s=0;a.length>s;)void 0!==(o=i(n,t=a[s++]))&&u(r,t,o);return r}})},{"./_create-property":26,"./_export":35,"./_object-gopd":77,"./_own-keys":87,"./_to-iobject":119}],297:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.get}while(o=r(o))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":76,"./_object-gopd":77,"./_object-gpo":81,"./_to-object":121,"./_to-primitive":122}],298:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.set}while(o=r(o))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":76,"./_object-gopd":77,"./_object-gpo":81,"./_to-object":121,"./_to-primitive":122}],299:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":35,"./_object-to-array":86}],300:[function(e,t,o){function i(e){return null==e?void 0:m(e)}function a(e){var t=e._c;t&&(e._c=void 0,t())}function r(e){return void 0===e._o}function s(e){r(e)||(e._o=void 0,a(e))}function n(t,e){f(t),this._c=void 0,this._o=t,t=new _(this);try{var o=e(t),n=o;null!=o&&("function"==typeof o.unsubscribe?o=function(){n.unsubscribe()}:m(o),this._c=o)}catch(e){return void t.error(e)}r(this)&&a(this)}var l=e("./_export"),d=e("./_global"),c=e("./_core"),u=e("./_microtask")(),h=e("./_wks")("observable"),m=e("./_a-function"),f=e("./_an-object"),p=e("./_an-instance"),g=e("./_redefine-all"),v=e("./_hide"),y=e("./_for-of"),b=y.RETURN;n.prototype=g({},{unsubscribe:function(){s(this)}});var _=function(e){this._s=e};_.prototype=g({},{next:function(e){var t=this._s;if(!r(t)){var o=t._o;try{var n=i(o.next);if(n)return n.call(o,e)}catch(e){try{s(t)}finally{throw e}}}},error:function(e){var t=this._s;if(r(t))throw e;var o=t._o;t._o=void 0;try{var n=i(o.error);if(!n)throw e;e=n.call(o,e)}catch(e){try{a(t)}finally{throw e}}return a(t),e},complete:function(e){var t=this._s;if(!r(t)){var o=t._o;t._o=void 0;try{var n=i(o.complete);e=n?n.call(o,e):void 0}catch(e){try{a(t)}finally{throw e}}return a(t),e}}});var w=function(e){p(this,w,"Observable","_f")._f=m(e)};g(w.prototype,{subscribe:function(e){return new n(e,this._f)},forEach:function(n){var i=this;return new(c.Promise||d.Promise)(function(e,t){m(n);var o=i.subscribe({next:function(e){try{return n(e)}catch(e){t(e),o.unsubscribe()}},error:t,complete:e})})}}),g(w,{from:function(e){var t="function"==typeof this?this:w,o=i(f(e)[h]);if(o){var n=f(o.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var o=!1;return u(function(){if(!o){try{if(y(e,!1,function(e){if(t.next(e),o)return b})===b)return}catch(e){if(o)throw e;return void t.error(e)}t.complete()}}),function(){o=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(t){var o=!1;return u(function(){if(!o){for(var e=0;e<n.length;++e)if(t.next(n[e]),o)return;t.complete()}}),function(){o=!0}})}}),v(w.prototype,h,function(){return this}),l(l.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":4,"./_an-instance":8,"./_an-object":9,"./_core":25,"./_export":35,"./_for-of":41,"./_global":43,"./_hide":45,"./_microtask":70,"./_redefine-all":93,"./_set-species":102,"./_wks":131}],301:[function(e,t,o){var n=e("./_export"),i=e("./_core"),a=e("./_global"),r=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(t){var o=r(this,i.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return s(o,t()).then(function(){return e})}:t,e?function(e){return s(o,t()).then(function(){throw e})}:t)}})},{"./_core":25,"./_export":35,"./_global":43,"./_promise-resolve":91,"./_species-constructor":106}],302:[function(e,t,o){var n=e("./_export"),i=e("./_new-promise-capability"),a=e("./_perform");n(n.S,"Promise",{try:function(e){var t=i.f(this),o=a(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}})},{"./_export":35,"./_new-promise-capability":71,"./_perform":90}],303:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.key,r=n.set;n.exp({defineMetadata:function(e,t,o,n){r(e,t,i(o),a(n))}})},{"./_an-object":9,"./_metadata":69}],304:[function(e,t,o){var n=e("./_metadata"),r=e("./_an-object"),s=n.key,l=n.map,d=n.store;n.exp({deleteMetadata:function(e,t,o){var n=arguments.length<3?void 0:s(o),i=l(r(t),n,!1);if(void 0===i||!i.delete(e))return!1;if(i.size)return!0;var a=d.get(t);return a.delete(n),!!a.size||d.delete(t)}})},{"./_an-object":9,"./_metadata":69}],305:[function(e,t,o){var a=e("./es6.set"),r=e("./_array-from-iterable"),n=e("./_metadata"),i=e("./_an-object"),s=e("./_object-gpo"),l=n.keys,d=n.key,c=function(e,t){var o=l(e,t),n=s(e);if(null===n)return o;var i=c(n,t);return i.length?o.length?r(new a(o.concat(i))):i:o};n.exp({getMetadataKeys:function(e,t){return c(i(e),arguments.length<2?void 0:d(t))}})},{"./_an-object":9,"./_array-from-iterable":12,"./_metadata":69,"./_object-gpo":81,"./es6.set":235}],306:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.get,l=n.key,d=function(e,t,o){if(r(e,t,o))return s(e,t,o);var n=a(t);return null!==n?d(e,n,o):void 0};n.exp({getMetadata:function(e,t,o){return d(e,i(t),arguments.length<3?void 0:l(o))}})},{"./_an-object":9,"./_metadata":69,"./_object-gpo":81}],307:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.keys,r=n.key;n.exp({getOwnMetadataKeys:function(e,t){return a(i(e),arguments.length<2?void 0:r(t))}})},{"./_an-object":9,"./_metadata":69}],308:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.get,r=n.key;n.exp({getOwnMetadata:function(e,t,o){return a(e,i(t),arguments.length<3?void 0:r(o))}})},{"./_an-object":9,"./_metadata":69}],309:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.key,l=function(e,t,o){if(r(e,t,o))return!0;var n=a(t);return null!==n&&l(e,n,o)};n.exp({hasMetadata:function(e,t,o){return l(e,i(t),arguments.length<3?void 0:s(o))}})},{"./_an-object":9,"./_metadata":69,"./_object-gpo":81}],310:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.has,r=n.key;n.exp({hasOwnMetadata:function(e,t,o){return a(e,i(t),arguments.length<3?void 0:r(o))}})},{"./_an-object":9,"./_metadata":69}],311:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_a-function"),r=n.key,s=n.set;n.exp({metadata:function(o,n){return function(e,t){s(o,n,(void 0!==t?i:a)(e),r(t))}}})},{"./_a-function":4,"./_an-object":9,"./_metadata":69}],312:[function(e,t,o){e("./_set-collection-from")("Set")},{"./_set-collection-from":99}],313:[function(e,t,o){e("./_set-collection-of")("Set")},{"./_set-collection-of":100}],314:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":22,"./_export":35}],315:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},{"./_export":35,"./_string-at":108}],316:[function(e,t,o){function i(e,t){this._r=e,this._s=t}var n=e("./_export"),a=e("./_defined"),r=e("./_to-length"),s=e("./_is-regexp"),l=e("./_flags"),d=RegExp.prototype;e("./_iter-create")(i,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(a(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),o="flags"in d?String(e.flags):l.call(e),n=new RegExp(e.source,~o.indexOf("g")?o:"g"+o);return n.lastIndex=r(e.lastIndex),new i(n,t)}})},{"./_defined":30,"./_export":35,"./_flags":39,"./_is-regexp":55,"./_iter-create":57,"./_to-length":120}],317:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),a=e("./_user-agent"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*r,"String",{padEnd:function(e,t){return i(this,e,1<arguments.length?t:void 0,!1)}})},{"./_export":35,"./_string-pad":111,"./_user-agent":127}],318:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),a=e("./_user-agent"),r=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*r,"String",{padStart:function(e,t){return i(this,e,1<arguments.length?t:void 0,!0)}})},{"./_export":35,"./_string-pad":111,"./_user-agent":127}],319:[function(e,t,o){e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":113}],320:[function(e,t,o){e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":113}],321:[function(e,t,o){e("./_wks-define")("asyncIterator")},{"./_wks-define":129}],322:[function(e,t,o){e("./_wks-define")("observable")},{"./_wks-define":129}],323:[function(e,t,o){var n=e("./_export");n(n.S,"System",{global:e("./_global")})},{"./_export":35,"./_global":43}],324:[function(e,t,o){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":99}],325:[function(e,t,o){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":100}],326:[function(e,t,o){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":99}],327:[function(e,t,o){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":100}],328:[function(e,t,o){for(var n=e("./es6.array.iterator"),i=e("./_object-keys"),a=e("./_redefine"),r=e("./_global"),s=e("./_hide"),l=e("./_iterators"),d=e("./_wks"),c=d("iterator"),u=d("toStringTag"),h=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(m),p=0;p<f.length;p++){var g,v=f[p],y=m[v],b=r[v],_=b&&b.prototype;if(_&&(_[c]||s(_,c,h),_[u]||s(_,u,v),l[v]=h,y))for(g in n)_[g]||a(_,g,n[g],!0)}},{"./_global":43,"./_hide":45,"./_iterators":61,"./_object-keys":83,"./_redefine":94,"./_wks":131,"./es6.array.iterator":144}],329:[function(e,t,o){var n=e("./_export"),i=e("./_task");n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":35,"./_task":115}],330:[function(e,t,o){function n(i){return function(e,t){var o=2<arguments.length,n=o&&s.call(arguments,2);return i(o?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}}var i=e("./_global"),a=e("./_export"),r=e("./_user-agent"),s=[].slice,l=/MSIE .\./.test(r);a(a.G+a.B+a.F*l,{setTimeout:n(i.setTimeout),setInterval:n(i.setInterval)})},{"./_export":35,"./_global":43,"./_user-agent":127}],331:[function(e,t,o){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.exec"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":25,"./modules/es6.array.copy-within":134,"./modules/es6.array.every":135,"./modules/es6.array.fill":136,"./modules/es6.array.filter":137,"./modules/es6.array.find":139,"./modules/es6.array.find-index":138,"./modules/es6.array.for-each":140,"./modules/es6.array.from":141,"./modules/es6.array.index-of":142,"./modules/es6.array.is-array":143,"./modules/es6.array.iterator":144,"./modules/es6.array.join":145,"./modules/es6.array.last-index-of":146,"./modules/es6.array.map":147,"./modules/es6.array.of":148,"./modules/es6.array.reduce":150,"./modules/es6.array.reduce-right":149,"./modules/es6.array.slice":151,"./modules/es6.array.some":152,"./modules/es6.array.sort":153,"./modules/es6.array.species":154,"./modules/es6.date.now":155,"./modules/es6.date.to-iso-string":156,"./modules/es6.date.to-json":157,"./modules/es6.date.to-primitive":158,"./modules/es6.date.to-string":159,"./modules/es6.function.bind":160,"./modules/es6.function.has-instance":161,"./modules/es6.function.name":162,"./modules/es6.map":163,"./modules/es6.math.acosh":164,"./modules/es6.math.asinh":165,"./modules/es6.math.atanh":166,"./modules/es6.math.cbrt":167,"./modules/es6.math.clz32":168,"./modules/es6.math.cosh":169,"./modules/es6.math.expm1":170,"./modules/es6.math.fround":171,"./modules/es6.math.hypot":172,"./modules/es6.math.imul":173,"./modules/es6.math.log10":174,"./modules/es6.math.log1p":175,"./modules/es6.math.log2":176,"./modules/es6.math.sign":177,"./modules/es6.math.sinh":178,"./modules/es6.math.tanh":179,"./modules/es6.math.trunc":180,"./modules/es6.number.constructor":181,"./modules/es6.number.epsilon":182,"./modules/es6.number.is-finite":183,"./modules/es6.number.is-integer":184,"./modules/es6.number.is-nan":185,"./modules/es6.number.is-safe-integer":186,"./modules/es6.number.max-safe-integer":187,"./modules/es6.number.min-safe-integer":188,"./modules/es6.number.parse-float":189,"./modules/es6.number.parse-int":190,"./modules/es6.number.to-fixed":191,"./modules/es6.number.to-precision":192,"./modules/es6.object.assign":193,"./modules/es6.object.create":194,"./modules/es6.object.define-properties":195,"./modules/es6.object.define-property":196,"./modules/es6.object.freeze":197,"./modules/es6.object.get-own-property-descriptor":198,"./modules/es6.object.get-own-property-names":199,"./modules/es6.object.get-prototype-of":200,"./modules/es6.object.is":204,"./modules/es6.object.is-extensible":201,"./modules/es6.object.is-frozen":202,"./modules/es6.object.is-sealed":203,"./modules/es6.object.keys":205,"./modules/es6.object.prevent-extensions":206,"./modules/es6.object.seal":207,"./modules/es6.object.set-prototype-of":208,"./modules/es6.object.to-string":209,"./modules/es6.parse-float":210,"./modules/es6.parse-int":211,"./modules/es6.promise":212,"./modules/es6.reflect.apply":213,"./modules/es6.reflect.construct":214,"./modules/es6.reflect.define-property":215,"./modules/es6.reflect.delete-property":216,"./modules/es6.reflect.enumerate":217,"./modules/es6.reflect.get":220,"./modules/es6.reflect.get-own-property-descriptor":218,"./modules/es6.reflect.get-prototype-of":219,"./modules/es6.reflect.has":221,"./modules/es6.reflect.is-extensible":222,"./modules/es6.reflect.own-keys":223,"./modules/es6.reflect.prevent-extensions":224,"./modules/es6.reflect.set":226,"./modules/es6.reflect.set-prototype-of":225,"./modules/es6.regexp.constructor":227,"./modules/es6.regexp.exec":228,"./modules/es6.regexp.flags":229,"./modules/es6.regexp.match":230,"./modules/es6.regexp.replace":231,"./modules/es6.regexp.search":232,"./modules/es6.regexp.split":233,"./modules/es6.regexp.to-string":234,"./modules/es6.set":235,"./modules/es6.string.anchor":236,"./modules/es6.string.big":237,"./modules/es6.string.blink":238,"./modules/es6.string.bold":239,"./modules/es6.string.code-point-at":240,"./modules/es6.string.ends-with":241,"./modules/es6.string.fixed":242,"./modules/es6.string.fontcolor":243,"./modules/es6.string.fontsize":244,"./modules/es6.string.from-code-point":245,"./modules/es6.string.includes":246,"./modules/es6.string.italics":247,"./modules/es6.string.iterator":248,"./modules/es6.string.link":249,"./modules/es6.string.raw":250,"./modules/es6.string.repeat":251,"./modules/es6.string.small":252,"./modules/es6.string.starts-with":253,"./modules/es6.string.strike":254,"./modules/es6.string.sub":255,"./modules/es6.string.sup":256,"./modules/es6.string.trim":257,"./modules/es6.symbol":258,"./modules/es6.typed.array-buffer":259,"./modules/es6.typed.data-view":260,"./modules/es6.typed.float32-array":261,"./modules/es6.typed.float64-array":262,"./modules/es6.typed.int16-array":263,"./modules/es6.typed.int32-array":264,"./modules/es6.typed.int8-array":265,"./modules/es6.typed.uint16-array":266,"./modules/es6.typed.uint32-array":267,"./modules/es6.typed.uint8-array":268,"./modules/es6.typed.uint8-clamped-array":269,"./modules/es6.weak-map":270,"./modules/es6.weak-set":271,"./modules/es7.array.flat-map":272,"./modules/es7.array.flatten":273,"./modules/es7.array.includes":274,"./modules/es7.asap":275,"./modules/es7.error.is-error":276,"./modules/es7.global":277,"./modules/es7.map.from":278,"./modules/es7.map.of":279,"./modules/es7.map.to-json":280,"./modules/es7.math.clamp":281,"./modules/es7.math.deg-per-rad":282,"./modules/es7.math.degrees":283,"./modules/es7.math.fscale":284,"./modules/es7.math.iaddh":285,"./modules/es7.math.imulh":286,"./modules/es7.math.isubh":287,"./modules/es7.math.rad-per-deg":288,"./modules/es7.math.radians":289,"./modules/es7.math.scale":290,"./modules/es7.math.signbit":291,"./modules/es7.math.umulh":292,"./modules/es7.object.define-getter":293,"./modules/es7.object.define-setter":294,"./modules/es7.object.entries":295,"./modules/es7.object.get-own-property-descriptors":296,"./modules/es7.object.lookup-getter":297,"./modules/es7.object.lookup-setter":298,"./modules/es7.object.values":299,"./modules/es7.observable":300,"./modules/es7.promise.finally":301,"./modules/es7.promise.try":302,"./modules/es7.reflect.define-metadata":303,"./modules/es7.reflect.delete-metadata":304,"./modules/es7.reflect.get-metadata":306,"./modules/es7.reflect.get-metadata-keys":305,"./modules/es7.reflect.get-own-metadata":308,"./modules/es7.reflect.get-own-metadata-keys":307,"./modules/es7.reflect.has-metadata":309,"./modules/es7.reflect.has-own-metadata":310,"./modules/es7.reflect.metadata":311,"./modules/es7.set.from":312,"./modules/es7.set.of":313,"./modules/es7.set.to-json":314,"./modules/es7.string.at":315,"./modules/es7.string.match-all":316,"./modules/es7.string.pad-end":317,"./modules/es7.string.pad-start":318,"./modules/es7.string.trim-left":319,"./modules/es7.string.trim-right":320,"./modules/es7.symbol.async-iterator":321,"./modules/es7.symbol.observable":322,"./modules/es7.system.global":323,"./modules/es7.weak-map.from":324,"./modules/es7.weak-map.of":325,"./modules/es7.weak-set.from":326,"./modules/es7.weak-set.of":327,"./modules/web.dom.iterable":328,"./modules/web.immediate":329,"./modules/web.timers":330}],332:[function(e,t,o){var n,i;n=this,i=function(){if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var p,e,t,g,o,v,n,y,b,_,i=window.navigator.userAgent,a=void 0!==navigator.mimeTypes["application/pdf"],w=void 0!==window.Promise,r=-1!==i.indexOf("irefox")&&18<parseInt(i.split("rv:")[1].split(".")[0],10),k=/iphone|ipad|ipod/i.test(i.toLowerCase());return t=function(e){var t;try{t=new ActiveXObject(e)}catch(e){t=null}return t},e=function(){return!(!t("AcroPDF.PDF")&&!t("PDF.PdfCtrl"))},p=!k&&(r||a||function(){return!!(window.ActiveXObject||"ActiveXObject"in window)}()&&e()),g=function(e){var t,o="";if(e){for(t in e)e.hasOwnProperty(t)&&(o+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&");o=o&&(o="#"+o).slice(0,o.length-1)}return o},o=function(e){"undefined"!=typeof console&&console.log&&console.log("[PDFObject] "+e)},v=function(e){return o(e),!1},y=function(e){var t=document.body;return"string"==typeof e?t=document.querySelector(e):"undefined"!=typeof jQuery&&e instanceof jQuery&&e.length?t=e.get(0):void 0!==e.nodeType&&1===e.nodeType&&(t=e),t},b=function(e,t,o,n,i){var a=n+"?file="+encodeURIComponent(t)+o,r="<div style='"+(k?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ")+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+i+" src='"+a+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return e.className+=" pdfobject-container",e.style.position="relative",e.style.overflow="auto",e.innerHTML=r,e.getElementsByTagName("iframe")[0]},_=function(e,t,o,n,i,a,r){var s="";return s=t&&t!==document.body?"width: "+i+"; height: "+a+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",e.className+=" pdfobject-container",e.innerHTML="<embed "+r+" class='pdfobject' src='"+o+n+"' type='application/pdf' style='overflow: auto; "+s+"'/>",e.getElementsByTagName("embed")[0]},n=function(e,t,o){if("string"!=typeof e)return v("URL is not valid");t=void 0!==t&&t;var n,i=(o=void 0!==o?o:{}).id&&"string"==typeof o.id?"id='"+o.id+"'":"",a=!!o.page&&o.page,r=o.pdfOpenParams?o.pdfOpenParams:{},s=void 0===o.fallbackLink||o.fallbackLink,l=o.width?o.width:"100%",d=o.height?o.height:"100%",c="boolean"!=typeof o.assumptionMode||o.assumptionMode,u="boolean"==typeof o.forcePDFJS&&o.forcePDFJS,h=!!o.PDFJS_URL&&o.PDFJS_URL,m=y(t),f="";return m?(a&&(r.page=a),n=g(r),u&&h?b(m,e,n,h,i):p||c&&w&&!k?_(m,t,e,n,l,d,i):h?b(m,e,n,h,i):(s&&(f="string"==typeof s?s:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",m.innerHTML=f.replace(/\[url\]/g,e)),v("This browser does not support embedded PDFs"))):v("Target element cannot be determined")},{embed:function(e,t,o){return n(e,t,o)},pdfobjectversion:"2.1.1",supportsPDFs:p}},"function"==typeof define&&define.amd?define([],i):"object"==typeof t&&t.exports?t.exports=i():n.PDFObject=i()},{}],333:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TKWhiteBoardManager=void 0;var D=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=s(e("./utils/Global")),a=s(e("./utils/Constant")),M=s(e("./utils/Utils")),R=s(e("./utils/Configuration")),r=s(e("./intermediateLayer/WhiteboardIntermediateLayer")),h=s(e("./view/containers/WhiteboardView"));s(e("./view/containers/AudioPlayer")),s(e("./view/containers/VideoPlayer")),s(e("./view/containers/DocumentToolbar")),s(e("./view/containers/DocumentRemark"));function s(e){return e&&e.__esModule?e:{default:e}}function W(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var m=(n(l,[{key:"getVersion",value:function(){return a.default.WHITEBOARD_SDK_VERSION}},{key:"createMainWhiteboard",value:function(e,t,o){var n=0<arguments.length&&void 0!==e?e:document.body,i=this,a=1<arguments.length&&void 0!==t?t:{},r=o;if("string"==typeof n){var s=n;if(!(n=document.getElementById(s)))return void L.Logger.warning("The node id cannot be found by node id, and createMainWhiteboard method cannot be performed , element id is "+s+".")}var l="default";L.Logger.debug("[whiteboarrd-sdk]createMainWhiteboard  parentNode and configration and receiveActionCommand:",n,a,r),this._createWhiteboard(n,l,a,function(){var e,t;if(i.documentToolbarViewList[l]&&i.documentToolbarViewList[l].receiveActionCommand&&(e=i.documentToolbarViewList[l]).receiveActionCommand.apply(e,arguments),i.documentRemarkViewList[l]&&i.documentRemarkViewList[l].receiveActionCommand&&(t=i.documentRemarkViewList[l]).receiveActionCommand.apply(t,arguments),"function"==typeof r)if(i.isInner)r.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||r.apply(void 0,arguments)}});var d=this.whiteboardViewMap.get(l);if(d&&d.getConfigration().isLoadDocumentToolBar){var c=d.getConfigration().documentToolBarConfig.parentNode||d.getWhiteboardRootElement();this.createDocumentToolBar(c,d.getConfigration().documentToolBarConfig,l)}if(d&&d.getConfigration().isLoadDocumentRemark){var u=d.getConfigration().documentRemarkConfig.parentNode||d.getWhiteboardRootElement();this.createDocumentRemark(u,d.getConfigration().documentRemarkConfig,l)}if(d&&d.getConfigration().isLoadAudioPlayer){var h=d.getConfigration().audioPlayerConfig.parentNode||d.getWhiteboardRootElement();this.createAudioPlayer(h,d.getConfigration().audioPlayerConfig)}if(d&&d.getConfigration().isLoadVideoPlayer){var m=d.getConfigration().videoPlayerConfig.parentNode||d.getWhiteboardRootElement();this.createVideoPlayer(m,d.getConfigration().videoPlayerConfig)}this._executeSaveMsglistData(l),this._executeSavePubmsgData(l)}},{key:"createExtendWhiteboard",value:function(e,t,o,n){var i=0<arguments.length&&void 0!==e?e:document.body,a=1<arguments.length&&void 0!==t?t:void 0,r=this,s=2<arguments.length&&void 0!==o?o:{},l=n;if(L.Logger.debug("[whiteboarrd-sdk]createExtendWhiteboard  parentNode  instanceId  configration and receiveActionCommand:",i,a,s,l),null!=a){if("string"==typeof i){var d=i;if(!(i=document.getElementById(d)))return void L.Logger.warning("The node id cannot be found by node id, and createExtendWhiteboard method cannot be performed , element id is "+d+".")}a||(this.randomCreateExtendWhiteboardNumber++,a="randomWhiteboard"+this.randomCreateExtendWhiteboardNumber),this._createWhiteboard(i,a,s,function(){var e,t;if(r.documentToolbarViewList[a]&&r.documentToolbarViewList[a].receiveActionCommand&&(e=r.documentToolbarViewList[a]).receiveActionCommand.apply(e,arguments),r.documentRemarkViewList[a]&&r.documentRemarkViewList[a].receiveActionCommand&&(t=r.documentRemarkViewList[a]).receiveActionCommand.apply(t,arguments),"function"==typeof l)if(r.isInner)l.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||l.apply(void 0,arguments)}});var c=this.whiteboardViewMap.get(a);if(c&&c.getConfigration().isLoadDocumentToolBar&&c.getConfigration().hasExtendDocument){var u=c.getConfigration().documentToolBarConfig.parentNode||c.getWhiteboardRootElement();this.createDocumentToolBar(u,c.getConfigration().documentToolBarConfig,a)}if(c&&c.getConfigration().isLoadDocumentRemark&&c.getConfigration().hasExtendDocument){var h=c.getConfigration().documentRemarkConfig.parentNode||c.getWhiteboardRootElement();this.createDocumentRemark(h,c.getConfigration().documentRemarkConfig,a)}this._executeSaveMsglistData(a),this._executeSavePubmsgData(a)}}},{key:"destroyMainWhiteboard",value:function(){L.Logger.debug("[whiteboarrd-sdk]destroyMainWhiteboard"),this._destroyWhiteboard("default")}},{key:"destroyExtendWhiteboard",value:function(e){L.Logger.debug("[whiteboarrd-sdk]destroyExtendWhiteboard  instanceId:",e),null!=e&&this._destroyWhiteboard(e)}},{key:"changeDocument",value:function(e,t,o){var n=1<arguments.length&&void 0!==t?t:1,i=2<arguments.length&&void 0!==o?o:"default";if("mobile"!==TK.SDKTYPE)if(null!=e&&null!=e){if(this.room&&this.whiteboardViewMap.has(i)){var a=this.whiteboardViewMap.get(i),r=void 0;if(0==e)r=this.pureWhiteboardFileinfoList[i];else{var s=this.room.getFileList(),l=!0,d=!1,c=void 0;try{for(var u,h=s[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value;if(m.fileid==e){r=m;break}}}catch(e){d=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw c}}}if(r)if(/(mp3|mp4|webm)/g.test(r.filetype)){var f=r.swfpath,p=f.lastIndexOf("."),g=f.substring(p),v=f.replace(g,"-1"+g),y=A.default.nowUseDocAddress+v,b=/(mp4|webm)/g.test(r.filetype),_=a.getConfigration().mediaShareToID,w={source:"mediaFileList",filename:r.filename,fileid:r.fileid,pauseWhenOver:b&&a.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(y,b,_,w)}else{var k=Number(r.fileprop),S=1===k||2===k,P=3===k,I=!S&&!P;if(S||P||I){I&&n>r.pagenum&&(n=r.pagenum),n<1&&(n=1);var x={name:"default"===i?"ShowPage":"ExtendShowPage",id:"default"===i?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+i,toID:"__all",data:{sourceInstanceId:i,isGeneralFile:I,isMedia:!1,isDynamicPPT:S,isH5Document:P,action:"show",mediaType:"",filedata:{currpage:n,pptslide:S?n:1,pptstep:0,steptotal:0,fileid:r.fileid,pagenum:r.pagenum,filename:r.filename,filetype:r.filetype,isContentDocument:r.isContentDocument,swfpath:S||P?r.downloadpath:r.swfpath}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},x)},i),a.getConfigration().synchronization&&a.getConfigration().isConnectedRoom&&this.pubMsg(x)}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you open file type is not support , filetype is "+r.filetype+" , fileid is "+e+" , toPage is "+n+".")}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you can't find the file by fileid , fileid is "+e+" , toPage is "+n+".")}}else L.Logger.error("changeDocument method parameter error: fileid can't be empty! ");else L.Logger.error("changeDocument method is not allowed in the mobile environment!")}},{key:"openRemoteDocument",value:function(e,t,o,n,i){var a=4<arguments.length&&void 0!==i?i:{};if(!function(e,t,o,n){return function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)}(e)?function(e){return-1!=["generalDocument","dynamicPPT","h5Document","mediaFile"].indexOf(e)}(t)?function(e){return e}(o)||(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: id is empty"),"function"==typeof n&&n("id is empty"),0):(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: type invalid"),"function"==typeof n&&n("type invalid"),0):(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: url invalid"),"function"==typeof n&&n("url invalid"),0)}(e,o,t,n)||!this.room)return!1;if(this.whiteboardViewMap.has("default")){var r=this.whiteboardViewMap.get("default"),s="unknown",l="unknown";try{var d=e.split(/(\/|\\)/g);if(d&&1<d.length){var c=d[d.length-1];if(c&&"string"==typeof c){var u=c.split(".");u&&2==u.length&&(s=u[0],l=u[1])}}}catch(e){L.Logger.error("[whiteboarrd-sdk]openRemoteDocument err:",e)}if("mediaFile"===o){var h=r.getConfigration().mediaShareToID,m="unknown"===l?/(.mp4|.webm)/g.test(e):/(mp4|webm)/g.test(l),f={source:"mediaFileList",filename:s,fileid:t,pauseWhenOver:m&&r.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(e,m,h,f)}else{var p={name:"ShowPage",id:"DocumentFilePage_ShowPage",toID:"__all",data:{isGeneralFile:"generalDocument"==o,isMedia:!1,isDynamicPPT:"dynamicPPT"==o,isH5Document:"h5Document"==o,action:"show",mediaType:"",filedata:{currpage:void 0!==a.toPage&&"number"==typeof a.toPage?a.toPage:1,pptslide:void 0!==a.toPage&&"number"==typeof a.toPage?a.toPage:1,pptstep:0,steptotal:0,fileid:t,pagenum:1,filename:s,filetype:l,isContentDocument:1,swfpath:e}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},p)}),r.getConfigration().synchronization&&r.getConfigration().isConnectedRoom&&this.pubMsg(p)}}}},{key:"changeWhiteBoardConfigration",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default",n={};for(var i in e)R.default.commonWhiteboard.hasOwnProperty(i)&&(n[i]=e[i],delete e[i]);if(Object.keys(n).length&&this.changeCommonWhiteBoardConfigration(n),Object.keys(e).length){if(L.Logger.debug("[whiteboarrd-sdk]changeWhiteBoardConfigration  configration and instanceId:",e,o),this.whiteboardViewMap.has(o)?(this.awitWhiteboardConfigrationMap.has(o)&&this.awitWhiteboardConfigrationMap.delete(o),this.whiteboardViewMap.get(o).changeWhiteBoardConfigration(e)):this.awitWhiteboardConfigrationMap.has(o)?Object.deepAssign(this.awitWhiteboardConfigrationMap.get(o),e):this.awitWhiteboardConfigrationMap.set(o,Object.deepAssign({},R.default.defaultWhiteboard,R.default.commonWhiteboard,e)),void 0!==e.isLoadDocumentToolBar&&"default"===o||e.hasExtendDocument){var a=this.whiteboardViewMap.get(o);if(e.isLoadDocumentToolBar&&!this.documentToolbarViewList[o]){if(a){var r=a.getConfigration().documentToolBarConfig.parentNode||a.getWhiteboardRootElement();this.createDocumentToolBar(r,a.getConfigration().documentToolBarConfig,o)}}else!e.isLoadDocumentToolBar&&this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].destroyView&&(this.documentToolbarViewList[o].destroyView(),this.documentToolbarViewList[o]=void 0)}if(void 0!==e.isLoadDocumentRemark&&"default"===o||e.hasExtendDocument){var s=this.whiteboardViewMap.get(o);if(e.isLoadDocumentRemark&&!this.documentRemarkViewList[o]){if(s){var l=s.getConfigration().documentRemarkConfig.parentNode||s.getWhiteboardRootElement();this.createDocumentRemark(l,s.getConfigration().documentRemarkConfig,o)}}else!e.isLoadDocumentRemark&&this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].destroyView&&(this.documentRemarkViewList[o].destroyView(),this.documentRemarkViewList[o]=void 0)}if(void 0!==e.isLoadAudioPlayer&&"default"===o){var d=this.whiteboardViewMap.get(o);if(e.isLoadAudioPlayer&&!this.audioPlayerView){if(d){var c=d.getConfigration().audioPlayerConfig.parentNode||d.getWhiteboardRootElement();this.createAudioPlayer(c,d.getConfigration().audioPlayerConfig)}}else!e.isLoadAudioPlayer&&this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0)}if(void 0!==e.isLoadVideoPlayer&&"default"===o){var u=this.whiteboardViewMap.get(o);if(e.isLoadVideoPlayer&&!this.videoPlayerView){if(u){var h=u.getConfigration().videoPlayerConfig.parentNode||u.getWhiteboardRootElement();this.createVideoPlayer(h,u.getConfigration().videoPlayerConfig)}}else!e.isLoadVideoPlayer&&this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0)}if(void 0!==e.languageType&&("default"!==o&&!e.hasExtendDocument||(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].setProps({languageType:e.languageType}),this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].setProps({languageType:e.languageType}))),void 0!==e.isMobile&&("default"!==o&&!e.hasExtendDocument||(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].setProps({isMobile:e.isMobile}),this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].setProps({isMobile:e.isMobile}))),void 0!==e.canRemark&&("default"!==o&&!e.hasExtendDocument||(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].setProps({canRemark:e.canRemark}),this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].setProps({canRemark:e.canRemark}))),void 0!==e.documentToolBarConfig&&("default"===o||e.hasExtendDocument)&&this.documentToolbarViewList[o]){if(e.documentToolBarConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentToolbarViewList[o].changeParentNode){var m=this.whiteboardViewMap.get(o),f=e.documentToolBarConfig.parentNode||(m?m.getWhiteboardRootElement():void 0);if("string"==typeof f){var p=f;if(!(f=document.getElementById(p)))return void L.Logger.warning("The node id cannot be found by node id, and  documentToolBarConfig.parentNode cannot update config, element id is "+p+".")}this.documentToolbarViewList[o].changeParentNode(f)}for(var g in e.documentToolBarConfig){var v=e.documentToolBarConfig[g];"object"===(void 0===v?"undefined":E(v))&&(e.documentToolBarConfig[g]=Object.deepAssign({},this.documentToolbarViewList[o].props[g],v))}this.documentToolbarViewList[o].setProps(Object.deepAssign({},e.documentToolBarConfig))}if(void 0!==e.documentRemarkConfig&&("default"===o||e.hasExtendDocument)&&this.documentRemarkViewList[o]){if(e.documentRemarkConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentRemarkViewList[o].changeParentNode){var y=this.whiteboardViewMap.get(o),b=e.documentRemarkConfig.parentNode||(y?y.getWhiteboardRootElement():void 0);if("string"==typeof b){var _=b;if(!(b=document.getElementById(_)))return void L.Logger.warning("The node id cannot be found by node id, and  documentRemarkConfig.parentNode cannot update config, element id is "+_+".")}this.documentRemarkViewList[o].changeParentNode(b)}for(var w in e.documentRemarkConfig){var k=e.documentRemarkConfig[w];"object"===(void 0===k?"undefined":E(k))&&(e.documentRemarkConfig[w]=Object.deepAssign({},this.documentRemarkViewList[o].props[w],k))}this.documentRemarkViewList[o].setProps(Object.deepAssign({},e.documentRemarkConfig))}if(void 0!==e.audioPlayerConfig&&this.audioPlayerView){for(var S in e.audioPlayerConfig){var P=e.audioPlayerConfig[S];"object"===(void 0===P?"undefined":E(P))&&(e.audioPlayerConfig[S]=Object.deepAssign({},this.audioPlayerView.props[S],P))}this.audioPlayerView.setProps(Object.deepAssign({},e.audioPlayerConfig))}if(void 0!==e.videoPlayerConfig&&this.videoPlayerView){for(var I in e.videoPlayerConfig){var x=e.videoPlayerConfig[I];"object"===(void 0===x?"undefined":E(x))&&(e.videoPlayerConfig[I]=Object.deepAssign({},this.videoPlayerView.props[I],x))}this.videoPlayerView.setProps(Object.deepAssign({},e.videoPlayerConfig))}e.isNativePlayAudio&&(A.default.isNativePlayAudio=!0),e.isNativePlayVideo&&(A.default.isNativePlayVideo=!0)}}},{key:"noticeWhiteboardActionCommand",value:function(e,t,o){var n=2<arguments.length&&void 0!==o?o:"default";L.Logger.debug("[whiteboarrd-sdk]noticeWhiteboardActionCommand "),this.whiteboardViewMap.has(n)&&this.whiteboardViewMap.get(n).noticeWhiteboardActionCommand(e,t)}},{key:"changeCommonWhiteBoardConfigration",value:function(e){L.Logger.debug("[whiteboarrd-sdk]changeCommonWhiteBoardConfigration common configration:",e);var t=Object.deepAssign({},e);"object"===E(t.docAddress)&&(A.default.docAddress=e.docAddress,""===A.default.docAddressKey&&(A.default.docAddressKey=e.docAddress.hostname),A.default.protocol=t.docAddress.protocol,A.default.port=t.docAddress.port,t.docAddress=e.docAddress.protocol+"://"+e.docAddress.hostname+":"+e.docAddress.port),"object"===E(t.webAddress)&&(t.webAddress=e.webAddress.protocol+"://"+e.webAddress.hostname+":"+e.webAddress.port),t.backupDocAddressList&&Array.isArray(t.backupDocAddressList)&&(A.default.backupDocAddressList=e.backupDocAddressList,R.default.commonWhiteboard.backupDocAddressList=[]),Object.deepAssign(R.default.commonWhiteboard,t);var o=!0,n=!1,i=void 0;try{for(var a,r=this.awitWhiteboardConfigrationMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Object.deepAssign(s,t)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}void 0===e.docAddress&&void 0===e.backupDocAddressList||(A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList)),A.default.hasGetDocAddressIndexByLocalStorage?(A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress):(A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress,this.getLocalStorageItem("tkDocAddressKey",function(e){e&&void 0!==e&&"string"==typeof e&&"undefined"!==e&&(A.default.docAddressKey=e,A.default.localStorageDocAddressKey=e),A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress,A.default.hasGetDocAddressIndexByLocalStorage=!0})));var l=!0,d=!1,c=void 0;try{for(var u,h=this.whiteboardViewMap[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value,f=D(m,2),p=f[0],g=f[1];this.awitWhiteboardConfigrationMap.has(p)&&this.awitWhiteboardConfigrationMap.delete(p),g.changeWhiteBoardConfigration(t)}}catch(e){d=!0,c=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw c}}var v=!0,y=!1,b=void 0;try{for(var _,w=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var k=_.value;k&&k.setProps(Object.deepAssign({},t))}}catch(e){y=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}var S=!0,P=!1,I=void 0;try{for(var x,C=Object.values(this.documentRemarkViewList)[Symbol.iterator]();!(S=(x=C.next()).done);S=!0){var T=x.value;T&&T.setProps(Object.deepAssign({},t))}}catch(e){P=!0,I=e}finally{try{!S&&C.return&&C.return()}finally{if(P)throw I}}this.audioPlayerView&&this.audioPlayerView.setProps(Object.deepAssign({},t)),this.videoPlayerView&&this.videoPlayerView.setProps(Object.deepAssign({},t))}},{key:"addPage",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]addPage "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).addPage()}},{key:"nextPage",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]nextPage "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).nextPage()}},{key:"prevPage",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]prevPage "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).prevPage()}},{key:"skipPage",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default";L.Logger.debug("[whiteboarrd-sdk]skipPage  page :",e),"number"==typeof e?this.whiteboardViewMap.has(o)&&this.whiteboardViewMap.get(o).skipPage(e):L.Logger.warning("skipPage page must is number!")}},{key:"nextStep",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]nextStep "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).nextStep()}},{key:"prevStep",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]prevStep "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).prevStep()}},{key:"enlargeWhiteboard",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]enlargeWhiteboard  instanceId:",t),this.executeZoomWhiteaord("zoom_big",t)}},{key:"narrowWhiteboard",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]narrowWhiteboard  instanceId:",t),this.executeZoomWhiteaord("zoom_small",t)}},{key:"clear",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]clear  instanceId:",t),this.executeWhiteboardAction("action_clear",t)}},{key:"undo",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]undo  instanceId:",t),this.executeWhiteboardAction("action_undo",t)}},{key:"redo",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]redo  instanceId:",t),this.executeWhiteboardAction("action_redo",t)}},{key:"fullScreen",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";if(L.Logger.debug("[whiteboarrd-sdk]fullScreen "),this.whiteboardViewMap.has(t)&&this.room){var o=this.whiteboardViewMap.get(t);if(o.getConfigration().isMobile)this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!0);else{M.default.isFullScreenStatus()&&M.default.exitFullscreen();var n=o.getWhiteboardRootElement(),i=o.getConfigration().documentToolBarConfig.fullScreenElementId;i&&("string"==typeof i?document.getElementById(i)&&(n=document.getElementById(i)):n=i),M.default.launchFullscreen(n)}}}},{key:"exitFullScreen",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]exitFullScreen "),this.whiteboardViewMap.has(t)&&this.room&&(this.whiteboardViewMap.get(t).getConfigration().isMobile?this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!1):M.default.exitFullscreen())}},{key:"updateWhiteboardSize",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]updateWhiteboardSize  instanceId:",t);var o={};if(this.whiteboardViewMap.has(t)){var n=this.whiteboardViewMap.get(t);n.resizeWhiteboardHandler(),o=n.getConfigration()}("default"===t||o.hasExtendDocument)&&this.documentRemarkViewList[t]&&M.default.isFunction(this.documentRemarkViewList[t].resize)&&this.documentRemarkViewList[t].resize(),("default"===t||o.hasExtendDocument)&&this.documentToolbarViewList[t]&&M.default.isFunction(this.documentToolbarViewList[t].resize)&&this.documentToolbarViewList[t].resize()}},{key:"updateAllWhiteboardSize",value:function(){L.Logger.debug("[whiteboarrd-sdk]updateAllWhiteboardSize ");var e=!0,t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.keys()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this.updateWhiteboardSize(a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"resetWhiteboardData",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]resetWhiteboardData  instanceId:",t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).resetWhiteboardData()}},{key:"resetAllWhiteboardData",value:function(){L.Logger.debug("[whiteboarrd-sdk]resetAllWhiteboardData ");var e=!0,t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0)n.value.resetWhiteboardData()}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"resetPureWhiteboardTotalPage",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]resetPureWhiteboardTotalPage ");var o=this.pureWhiteboardFileinfoList[t]?this.pureWhiteboardFileinfoList[t].pagenum:1;this.pureWhiteboardFileinfoList[t]&&(this.pureWhiteboardFileinfoList[t].pagenum=1);var n=this.whiteboardViewMap.get(t);n&&M.default.isFunction(n.resetPureWhiteboardTotalPage)&&n.resetPureWhiteboardTotalPage(o)}},{key:"changeDynamicPptVolume",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default";if(L.Logger.debug("[whiteboarrd-sdk]changeDynamicPptVolume volume:",e),"number"==typeof e&&this.whiteboardViewMap.has(o)){var n=this.whiteboardViewMap.get(o);e<0?e=0:100<e&&(e=100);var i={name:"default"===o?"PptVolumeControl":"ExtendPptVolumeControl",id:"default"===o?"PptVolumeControl":"PptVolumeControl_"+o,toID:"__allExceptSender",data:{sourceInstanceId:o,volume:e/100},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:i}),this.room.setPptAudioVolume&&this.room.setPptAudioVolume(e),n.getConfigration().pptVolumeSynchronization&&n.getConfigration().isConnectedRoom&&this.pubMsg(i)}}},{key:"openDocumentRemark",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]openDocumentRemark "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).changeDocumentRemarkState(!0)}},{key:"closeDocumentRemark",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]closeDocumentRemark "),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).changeDocumentRemarkState(!1)}},{key:"executeWhiteboardAction",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default";L.Logger.debug("[whiteboarrd-sdk]executeWhiteboardAction actionKey and\tinstanceId:",e,o),this.whiteboardViewMap.has(o)&&this.whiteboardViewMap.get(o).executeWhiteboardAction(e)}},{key:"executeZoomWhiteaord",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default";L.Logger.debug("[whiteboarrd-sdk]executeZoomWhiteaord \tzoomKey and\tinstanceId:",e,o),this.whiteboardViewMap.has(o)&&this.whiteboardViewMap.get(o).executeZoomWhiteaord(e)}},{key:"receiveEventRoomPubmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomPubmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name))if("ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name||"ExtendShowPage"===t.name||"ExtendWhiteboardMarkTool"===t.name||"ExtendH5DocumentAction"===t.name||"ExtendPptVolumeControl"===t.name||"ExtendNewPptTriggerActionClick"===t.name)"ShowPage"!==t.name&&"ExtendShowPage"!==t.name||("string"==typeof t.data&&(t.data=M.default.toJsonParse(t.data)),t.data.isGeneralFile&&t.data.filedata&&0==t.data.filedata.fileid&&("ShowPage"===t.name&&this.pureWhiteboardFileinfoList.default?t.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===t.name&&this.pureWhiteboardFileinfoList[t.data.sourceInstanceId]&&(t.data.filedata.pagenum=this.pureWhiteboardFileinfoList[t.data.sourceInstanceId].pagenum))),"ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name?this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomPubmsg(e):this.savePubmsgData.default&&Array.isArray(this.savePubmsgData.default)?this.savePubmsgData.default.push(e):this.savePubmsgData.default=[e]:"ExtendShowPage"!==t.name&&"ExtendWhiteboardMarkTool"!==t.name&&"ExtendPptVolumeControl"!==t.name&&"ExtendH5DocumentAction"!==t.name&&"ExtendNewPptTriggerActionClick"!==t.name||t.data&&(this.whiteboardViewMap.has(t.data.sourceInstanceId)?this.whiteboardViewMap.get(t.data.sourceInstanceId).receiveEventRoomPubmsg(e):this.savePubmsgData[t.data.sourceInstanceId]&&Array.isArray(this.savePubmsgData[t.data.sourceInstanceId])?this.savePubmsgData[t.data.sourceInstanceId].push(e):this.savePubmsgData[t.data.sourceInstanceId]=[e]);else{var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0)a.value.receiveEventRoomPubmsg(e)}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomConnected",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomConnected \trecvEventData:",e),this.saveMsglistData={},this.savePubmsgData={},this.resetAllWhiteboardData(),this.resetPureWhiteboardTotalPage();var t=e.message;this.receiveEventRoomMsglist(JSON.stringify({type:"room-msglist",message:t}))}},{key:"receiveEventRoomDisconnected",value:function(){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDisconnected "),A.default.laterAddressList=[];var e=!(A.default.hasGetDocAddressIndexByLocalStorage=!1),t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a&&a.getConfigration()&&a.getConfigration().isDisconnectedClearWhiteboardData&&M.default.isFunction(a.resetWhiteboardData)&&a.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"receiveEventRoomDelmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDelmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name)&&"SharpsChange"!==t.name){var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0)a.value.receiveEventRoomDelmsg(e)}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomMsglist",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomMsglist \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t={},o=e.message;for(var n in o)this._isWhiteboardCorrelationSignalling(o[n].name)&&(o[n].data&&"string"==typeof o[n].data&&(o[n].data=JSON.parse(o[n].data)),null!==t[o[n].name]&&void 0!==t[o[n].name]||(t[o[n].name]=[]),t[o[n].name].push(o[n]));var i=!0,a=!1,r=void 0;try{for(var s,l=["ShowPage","whiteboardMarkTool","NewPptTriggerActionClick","PptVolumeControl","H5DocumentAction","ExtendShowPage","ExtendWhiteboardMarkTool","ExtendPptVolumeControl","ExtendH5DocumentAction","ExtendNewPptTriggerActionClick"][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=t[d];if(("ShowPage"===d||"ExtendShowPage"===d)&&c&&c.length){var u=!0,h=!1,m=void 0;try{for(var f,p=c[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value;"ShowPage"!==g.name&&"ExtendShowPage"!==g.name||("string"==typeof g.data&&(g.data=M.default.toJsonParse(g.data)),g.data.isGeneralFile&&g.data.filedata&&0==g.data.filedata.fileid&&("ShowPage"===g.name&&this.pureWhiteboardFileinfoList.default?g.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===g.name&&this.pureWhiteboardFileinfoList[g.data.sourceInstanceId]&&(g.data.filedata.pagenum=this.pureWhiteboardFileinfoList[g.data.sourceInstanceId].pagenum)))}}catch(e){h=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw m}}}if(null!=c&&0<c.length)if("ShowPage"===d||"whiteboardMarkTool"===d||"NewPptTriggerActionClick"===d||"PptVolumeControl"===d||"H5DocumentAction"===d)this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomMsglist(d,c[c.length-1]):this.saveMsglistData.default&&Array.isArray(this.saveMsglistData.default)?this.saveMsglistData.default.push(c[c.length-1]):this.saveMsglistData.default=[c[c.length-1]];else if("ExtendShowPage"===d||"ExtendWhiteboardMarkTool"===d||"ExtendPptVolumeControl"===d||"ExtendH5DocumentAction"===d||"ExtendNewPptTriggerActionClick"===d){var v=!0,y=!1,b=void 0;try{for(var _,w=c[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var k=_.value;k.data&&(this.whiteboardViewMap.has(k.data.sourceInstanceId)?this.whiteboardViewMap.get(k.data.sourceInstanceId).receiveEventRoomMsglist(d,k):this.saveMsglistData[k.data.sourceInstanceId]&&Array.isArray(this.saveMsglistData[k.data.sourceInstanceId])?this.saveMsglistData[k.data.sourceInstanceId].push(k):this.saveMsglistData[k.data.sourceInstanceId]=[k])}}catch(e){y=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}}t[d]=null,delete t[d]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfilestateChanged recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfilestateChanged",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfileattributesUpdate recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfileattributesUpdate",e)}},{key:"receiveEventRoomErrorNotice",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomErrorNotice recvEventData:",e),this._forwardingStreamEvents("receiveEventRoomErrorNotice",e)}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomReceiveActionCommand \trecvEventData:",e);var t=e.message,o=t.action,n=t.cmd;switch(o){case"transmitWindowSize":this._windowResizeCallback()}var i=!0,a=!1,r=void 0;try{for(var s,l=this.whiteboardViewMap.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value.reveiveEventRoomReceiveActionCommand(o,n)}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"registerRoomDelegate",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]registerRoomDelegate \troom and  sdkReceiveActionCommand:",e,t),this.room=e,this.sdkReceiveActionCommand=t,this._addRoomEvent()}},{key:"getRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getRoomDelegate "),this.room}},{key:"hasRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]hasRoomDelegate "),!!this.room}},{key:"sendActionCommandToSdk",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]sendActionCommandToSdk \taction and\tcmd:",e,t),this.sdkReceiveActionCommand&&"function"==typeof this.sdkReceiveActionCommand&&(void 0!==t&&!E(t)||Array.isArray(t)||(t=JSON.parse(JSON.stringify(t))),this.sdkReceiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]pubMsg \tparams :",e),this.room&&this.room.pubMsg&&("string"==typeof e&&(e=JSON.parse(e)),e.data&&"object"===E(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.pubMsg(e))}},{key:"delMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]delMsg params :",e),this.room&&this.room.delMsg&&(e.data&&"object"===E(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.delMsg(e))}},{key:"startShareMedia",value:function(e,t,o,n){var i=3<arguments.length&&void 0!==n?n:{};if(L.Logger.debug("[whiteboarrd-sdk]startShareMedia url  isVideo  toID  and  attrs:",e,t,o,i),this.stopShareMedia(),this.stopShareLocalMedia(),this.room&&this.room.startShareMedia){var a=this.whiteboardViewMap.get("default");t&&a&&a.getConfigration()&&a.getConfigration().mediaSharePauseWhenOver&&(i.pauseWhenOver=a.getConfigration().mediaSharePauseWhenOver),a&&a.getConfigration()&&void 0!==a.getConfigration().myUserId&&!a.getConfigration().synchronization&&(o=a.getConfigration().myUserId),"mobile"!==TK.SDKTYPE?this.room.startShareMedia(e,t,function(e){L.Logger.warning("[whiteboard-sdk]startShareMedia fail , fail info:"+e)},{toID:o,attrs:i}):this.room.startShareMedia(e,t,o,i)}}},{key:"stopShareMedia",value:function(){L.Logger.debug("[whiteboarrd-sdk]stopShareMedia "),this.room&&this.room.stopShareMedia&&this.room.stopShareMedia()}},{key:"stopShareLocalMedia",value:function(){"mobile"!==TK.SDKTYPE&&this.room&&this.room.stopShareLocalMedia&&(L.Logger.debug("[whiteboarrd-sdk]stopShareLocalMedia "),this.room.stopShareLocalMedia())}},{key:"createAudioPlayer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};if(L.Logger.debug("[whiteboarrd-sdk]createAudioPlayer parentNode and config :",e,o),window.TalkAudioPlayer){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createAudioPlayer method cannot be performed , element id is "+n+".")}var i=this.whiteboardViewMap.get("default"),a=e||(i?i.getWhiteboardRootElement():document.body);this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0),this.audioPlayerView=new window.TalkAudioPlayer(a,"default",this,Object.deepAssign({},o,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile},R.default.commonWhiteboard),i?i.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createAudioPlayer methods.")}},{key:"createVideoPlayer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};if(L.Logger.debug("[whiteboarrd-sdk]createVideoPlayer parentNode and config :",e,o),window.TalkVideoPlayer){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createVideoPlayer method cannot be performed , element id is "+n+".")}var i=this.whiteboardViewMap.get("default"),a=e||(i?i.getWhiteboardRootElement():document.body);this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0),this.videoPlayerView=new window.TalkVideoPlayer(a,"default",this,Object.deepAssign({},o,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile},R.default.commonWhiteboard),i?i.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createVideoPlayer methods.")}},{key:"createDocumentRemark",value:function(e,t,o){var n=1<arguments.length&&void 0!==t?t:{},i=o;if(L.Logger.debug("[whiteboarrd-sdk]createDocumentRemark parentNode and config :",e,n),window.TalkDocumentRemark){if("string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentRemark method cannot be performed , element id is "+a+".")}var r=this.whiteboardViewMap.get(i),s=e||(r?r.getWhiteboardRootElement():document.body);if(this.documentRemarkViewList[i]&&this.documentRemarkViewList[i].destroyView&&(this.documentRemarkViewList[i].destroyView(),delete this.documentRemarkViewList[i]),this.documentRemarkViewList[i]=new window.TalkDocumentRemark(s,i,this,Object.deepAssign({},n,{languageType:r?r.getConfigration().languageType:"ch",isMobile:!!r&&r.getConfigration().isMobile,canRemark:!!r&&r.getConfigration().canRemark},R.default.commonWhiteboard),r?r.getConfigration():void 0),r){var l=this.getWhiteboardViewState(i);if(this.documentRemarkViewList[i]&&this.documentRemarkViewList[i].receiveActionCommand&&l&&Object.keys(l.page).length&&Object.keys(l.zoom).length){var d={viewState:l,updateViewState:{}};this.documentRemarkViewList[i].receiveActionCommand("viewStateUpdate",d)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentRemark methods.")}},{key:"createDocumentToolBar",value:function(e,t,o){var n=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==o?o:"default";if(L.Logger.debug("[whiteboarrd-sdk]createDocumentToolBar parentNode and config :",e,n),window.TalkDocumentToolbar){if("string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentToolBar method cannot be performed , element id is "+a+".")}var r=this.whiteboardViewMap.get(i),s=e||(r?r.getWhiteboardRootElement():document.body);if(this.documentToolbarViewList[i]&&this.documentToolbarViewList[i].destroyView&&(this.documentToolbarViewList[i].destroyView(),delete this.documentToolbarViewList[i]),this.documentToolbarViewList[i]=new window.TalkDocumentToolbar(s,i,this,Object.deepAssign({},n,{languageType:r?r.getConfigration().languageType:"ch",isMobile:!!r&&r.getConfigration().isMobile,canRemark:!!r&&r.getConfigration().canRemark},R.default.commonWhiteboard),r?r.getConfigration():void 0),r){var l=this.getWhiteboardViewState(i);if(this.documentToolbarViewList[i]&&this.documentToolbarViewList[i].receiveActionCommand&&l&&Object.keys(l.page).length&&Object.keys(l.zoom).length){var d={viewState:l,updateViewState:{}};this.documentToolbarViewList[i].receiveActionCommand("viewStateUpdate",d)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentToolBar methods.")}},{key:"getWhiteboardViewState",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]getWhiteboardViewState ");var o=this.whiteboardViewMap.get(t);return o?o.getWhiteboardViewState():void 0}},{key:"getWhiteboardIntermediateLayerInstance",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getWhiteboardIntermediateLayerInstance "),r.default}},{key:"nativeUpdateDoc",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"default",n=e.protocal,i=e.hostname,a=e.port;A.default.backupDocAddressList=[e],A.default.nowUseDocAddress=n+"://"+i+":"+a,A.default.protocol=n,A.default.port=a,A.default.docAddressKey=i;var r=this.whiteboardViewMap.get(o);r&&r.reloadCurrentDocument()}},{key:"switchDocAddress",value:function(e,t,o,n){var i=1<arguments.length&&void 0!==t&&t,a=2<arguments.length&&void 0!==o&&o,r=3<arguments.length&&void 0!==n?n:"default";if(L.Logger.debug("[whiteboarrd-sdk]call switchDocAddress method , docAddressKey is "+e),e&&"string"==typeof e){if(A.default.localStorageDocAddressKey=e,A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),A.default.docAddressKey!==e){var s=M.default.getItem(A.default.docAddressList,A.default.docAddressKey);A.default.docAddressKey=e,A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress,i&&this.setLocalStorageItem("tkDocAddressKey",A.default.docAddressKey);var l=this.whiteboardViewMap.get(r);l&&(l.reloadCurrentDocument(),l.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(W(A.default.docAddressList)),docAddressKey:A.default.docAddressKey,oldDocAddress:s||A.default.docAddress,nowDocAddress:A.default.docAddressList[A.default.docAddressKey]||R.default.commonWhiteboard.docAddress||A.default.docAddress}))}else if(a){var d=this.whiteboardViewMap.get(r);d&&d.reloadCurrentDocument()}}else if(a){var c=this.whiteboardViewMap.get(r);c&&c.reloadCurrentDocument()}}},{key:"setLocalStorageItem",value:function(e,t){"mobile"===TK.SDKTYPE?this.room&&M.default.isFunction(this.room.setLocalStorageItem)&&this.room.setLocalStorageItem(e,t):M.default.setLocalStorageItem(e,t)}},{key:"getLocalStorageItem",value:function(e,t){if(M.default.isFunction(t))if("mobile"===TK.SDKTYPE){if(this.room&&M.default.isFunction(this.room.getLocalStorageItem))try{this.room.getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("[whiteboard-sdk]getLocalStorageItem error:",e)}}else t(M.default.getLocalStorageItem("tkDocAddressKey"))}},{key:"_executeSaveMsglistData",value:function(o){var n=this;this.saveMsglistData[o]&&this.whiteboardViewMap.get(o)&&(this.saveMsglistData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomMsglist(e.name,e)}),delete this.saveMsglistData[o])}},{key:"_executeSavePubmsgData",value:function(o){var n=this;this.savePubmsgData[o]&&this.whiteboardViewMap.get(o)&&(this.savePubmsgData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomPubmsg(e)}),delete this.savePubmsgData[o])}},{key:"_createWhiteboard",value:function(e,t,o,n){var i=0<arguments.length&&void 0!==e?e:document.body,a=1<arguments.length&&void 0!==t?t:"default",r=this,s=2<arguments.length&&void 0!==o?o:{},l=n;if(L.Logger.debug("[whiteboarrd-sdk]_createWhiteboard  parentNode  instanceId  configration  and\treceiveActionCommand:",i,a,s,l),"string"==typeof i){var d=i;if(!(i=document.getElementById(d)))return void L.Logger.warning("The node id cannot be found by node id, and createWhiteboard method cannot be performed , element id is "+d+".")}this.pureWhiteboardFileinfoList[a]={fileid:0,companyid:"",filename:"whiteboard",uploaduserid:"",uploadusername:"",downloadpath:"",swfpath:"",filetype:"whiteboard",pagenum:1,dynamicppt:0,filecategory:0,fileprop:0};var c=void 0;this.awitWhiteboardConfigrationMap.has(a)?(c=this.awitWhiteboardConfigrationMap.get(a),this.awitWhiteboardConfigrationMap.delete(a)):c=Object.deepAssign({},R.default.defaultWhiteboard,R.default.commonWhiteboard);var u=Object.deepAssign({},c,s);this.whiteboardViewMap.has(a)&&this._destroyWhiteboard(a),this.whiteboardViewMap.set(a,new h.default(i,a,u,function(){"function"==typeof l&&l.apply(void 0,arguments)},this)),M.default.onElementResize(i,function(){r.updateWhiteboardSize(a)})}},{key:"_destroyWhiteboard",value:function(e){var t=0<arguments.length&&void 0!==e?e:"default";L.Logger.debug("[whiteboarrd-sdk]_destroyWhiteboard    instanceId  :",t),this.whiteboardViewMap.has(t)&&(this.whiteboardViewMap.get(t).destroyWhiteboardView(),this.whiteboardViewMap.delete(t)),this.awitWhiteboardConfigrationMap.has(t)&&this.awitWhiteboardConfigrationMap.delete(t)}},{key:"_isWhiteboardCorrelationSignalling",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_isWhiteboardCorrelationSignalling    name  :",e);var t=!1;switch(e){case"ShowPage":case"ExtendShowPage":case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":case"PptVolumeControl":case"ExtendPptVolumeControl":case"H5DocumentAction":case"ExtendH5DocumentAction":case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t=!0}return t}},{key:"_windowResizeCallback",value:function(){var e=this;return L.Logger.debug("[whiteboarrd-sdk]_windowResizeCallback "),this.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1}},{key:"_windowMessageCallback",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_windowMessageCallback"),e=e||window.event;var t=!0,o=!1,n=void 0;try{for(var i,a=this.whiteboardViewMap.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.receiveWindowMessageEvent(e)}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}var r=!0,s=!1,l=void 0;try{for(var d,c=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value;u&&u.receiveWindowMessageEvent(e)}}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}return!1}},{key:"_documentKeydownCallback",value:function(e){var t=this;switch(L.Logger.debug("[whiteboarrd-sdk]_documentKeydownCallback"),(e=e||window.event).keyCode){case 27:M.default.isFullScreenStatus()&&M.default.exitFullscreen()}function o(){if(!A.default.isSkipPageing&&t.whiteboardViewMap.has("default")&&t.whiteboardViewMap.get("default").getConfigration().isUseKeyboardPage&&!t.whiteboardViewMap.get("default").isWhiteboardTextEditing())switch(e.keyCode){case 37:t.whiteboardViewMap.get("default").prevPage();break;case 38:t.whiteboardViewMap.get("default").prevStep();break;case 39:t.whiteboardViewMap.get("default").nextPage();break;case 40:t.whiteboardViewMap.get("default").nextStep()}}return clearTimeout(this.documentKeydownTimer),this.documentKeydownDateTime&&500<(new Date).getTime()-this.documentKeydownDateTime?o():this.documentKeydownTimer=setTimeout(function(){o()},300),this.documentKeydownDateTime=(new Date).getTime(),!1}},{key:"_documentFullscreenchangeCallback",value:function(e){var t=this;L.Logger.debug("[whiteboarrd-sdk]_documentFullscreenchangeCallback");var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;if(M.default.isFullScreenStatus()){var l=s.getWhiteboardRootElement(),d=s.getConfigration().documentToolBarConfig.fullScreenElementId;d&&("string"==typeof d?document.getElementById(d)&&(l=document.getElementById(d)):l=d),M.default.getFullscreenElement()&&M.default.getFullscreenElement().id===l.id?s.changeFullScreenState(!0):s.changeFullScreenState(!1)}else s.changeFullScreenState(!1)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}return this.videoPlayerView&&this.videoPlayerView.receiveEventFullScreenChange&&this.videoPlayerView.receiveEventFullScreenChange(e),this.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize()},250)},50),!1}},{key:"_registerEvent",value:function(){var e=this;L.Logger.debug("[whiteboarrd-sdk]_registerEvent"),M.default.addEvent(window,"resize",this._windowResizeCallback.bind(this)),M.default.addEvent(window,"message",this._windowMessageCallback.bind(this)),M.default.addEvent(document,"keyup",this._documentKeydownCallback.bind(this)),M.default.addFullscreenchange(this._documentFullscreenchangeCallback.bind(this));var t,o,n,i=((n=o=t=void 0)!==document.hidden?(t="hidden",n="visibilitychange",o="visibilityState"):void 0!==document.mozHidden?(t="mozHidden",n="mozvisibilitychange",o="mozVisibilityState"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange",o="msVisibilityState"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange",o="webkitVisibilityState"),{hidden:t,state:o,visibilityChange:n}),a=i.state,r=i.visibilityChange;M.default.addEvent(document,r,function(){if("visible"===document[a])return e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1},!1)}},{key:"_addRoomEvent",value:function(){L.Logger.debug("[whiteboarrd-sdk]_addRoomEvent"),this.room&&(this.room.removeBackupListerner&&this.room.removeBackupListerner(this.listernerBackupid),this.room.addEventListener("room-receiveActionCommand",this.reveiveEventRoomReceiveActionCommand.bind(this),this.listernerBackupid),this.room.addEventListener("room-pubmsg",this.receiveEventRoomPubmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-delmsg",this.receiveEventRoomDelmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-connected",this.receiveEventRoomConnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-disconnected",this.receiveEventRoomDisconnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-msglist",this.receiveEventRoomMsglist.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediastate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfilestate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediaattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfileattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-error-notice",this.receiveEventRoomErrorNotice.bind(this),this.listernerBackupid))}},{key:"_forwardingStreamEvents",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]_forwardingStreamEvents handlerName and recvEventData:",e,t),this.audioPlayerView&&this.audioPlayerView[e]&&M.default.isFunction(this.audioPlayerView[e])&&this.audioPlayerView[e](t),this.videoPlayerView&&this.videoPlayerView[e]&&M.default.isFunction(this.videoPlayerView[e])&&this.videoPlayerView[e](t)}}]),l);function l(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.className="TKWhiteBoardManagerInner",this.isInner=o,this.room=e,this.sdkReceiveActionCommand=t,this.whiteboardViewMap=new Map,this.awitWhiteboardConfigrationMap=new Map,this.randomCreateExtendWhiteboardNumber=0,this.audioPlayerView=void 0,this.videoPlayerView=void 0,this.documentRemarkViewList={},this.documentToolbarViewList={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.pureWhiteboardFileinfoList={},this.saveMsglistData={},this.savePubmsgData={},this._registerEvent(),this._addRoomEvent()}var f=["createMainWhiteboard","destroyMainWhiteboard","createExtendWhiteboard","destroyExtendWhiteboard","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","updateWhiteboardSize","updateAllWhiteboardSize","resetAllWhiteboardData","resetPureWhiteboardTotalPage","changeDynamicPptVolume","openDocumentRemark","closeDocumentRemark","getWhiteboardIntermediateLayerInstance","changeCommonWhiteBoardConfigration","registerRoomDelegate","changeDocument","stopShareLocalMedia","switchDocAddress","getVersion","openRemoteDocument","noticeWhiteboardActionCommand","nativeUpdateDoc"],p=["createMainWhiteboard","destroyMainWhiteboard","changeDocument","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","registerRoomDelegate","changeCommonWhiteBoardConfigration","getVersion","openRemoteDocument","noticeWhiteboardActionCommand","nativeUpdateDoc"];function d(e,t,o){function n(e){i[e]=function(){return a[e].apply(a,arguments)}}var i={className:"TKWhiteBoardManager"},a=new m(e,t,o),r=o?f:p,s=!0,l=!1,d=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){n(c.value)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}return i}window.TKWhiteBoardManager=d,o.TKWhiteBoardManager=d,o.default=d},{"./intermediateLayer/WhiteboardIntermediateLayer":336,"./utils/Configuration":337,"./utils/Constant":338,"./utils/Global":340,"./utils/Utils":344,"./view/containers/AudioPlayer":349,"./view/containers/DocumentRemark":350,"./view/containers/DocumentToolbar":351,"./view/containers/VideoPlayer":353,"./view/containers/WhiteboardView":354}],334:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.defaultProductionOptions={synchronizationDynamicPpt:!0,dynamicPptActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.dynamicPptInstanceIDPrefix="dynamicPpt_",this.dynamicPptInstanceDefaultID="dynamicPpt_default",this.dynamicPptInstanceStore={},this.uniqueDynamicPpt=!1,this.specialDynamicPptInstanceIDPrefix="specialDynamicPptInstanceIDPrefix_"}var a=new(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(i,[{key:"productionDynamicPpt",value:function(e){var t=this,o=0<arguments.length&&void 0!==e?e:{},n=o.dynamicPptElementId,i=o.productionOptions,a=void 0===i?{}:i,r=o.handler,s=void 0===r?{}:r,l=o.id;if(n){var d=this._getDynamicPptInstanceID(l),c=this.getDynamicPptInstanceByID(d);if(c)return L.Logger.error("The production dynamicPpt(dynamicPptInstanceID:"+d+") fails, the dynamicPpt already exists!"),c;c={},a=Object.deepAssign({},this.defaultProductionOptions,a);var u=document.getElementById(n);if(!u)return L.Logger.error("DynamicPpt elements do not exist , element id is:"+n+"!"),c;var h=document.createElement("div"),m=n+"_dynamicPptInstance";h.className="dynamicPpt-instance-element",h.id=m,h.style.width="100%",h.style.height="100%";var f=document.createElement("iframe"),p=n+"_dynamicPptIframe";f.className="dynamicPpt-iframe-element",f.id=p,f.name=n+"_dynamicPptIframeName",f.allowFullScreen=!0,f.frameborder=0,f.scrolling="no",f.allow="autoplay",f.width="100%",f.height="100%",f.style.width="100%",f.style.height="100%",f.style.border="none",f.style.padding="0",f.style.margin="0",h.appendChild(f);var g=document.createElement("div"),v=n+"_dynamicPptLoading";g.className="dynamicPpt-loading-element talkcloud-loading",g.id=v;var y=document.createElement("span");y.className="tk-loading-reload-number",y.style.display="none",g.appendChild(y),h.appendChild(g);var b=document.createElement("div"),_=n+"_dynamicPptAction";return b.className="dynamicPpt-action-element talkcloud-action",b.style.width="100%",b.style.height="100%",b.style.zIndex=98,b.style.display=a.dynamicPptActionClick?"none":"block",b.style.position="absolute",b.style.top="0",b.style.left="0",b.id=_,h.appendChild(b),h.appendChild(b),u.appendChild(h),(this.dynamicPptInstanceStore[d]=c).dynamicPptInstanceID=d,c.handler={},c.handler.sendSignallingToServer=s.sendSignallingToServer,c.handler.delSignallingToServer=s.delSignallingToServer,c.handler.receiveActionCommandCallback=s.receiveActionCommandCallback,c.dynamicPptElementId=n,c.dynamicPptElement=u,c.dynamicPptInstanceElementId=m,c.dynamicPptInstanceElement=h,c.dynamicPptIframeElementId=p,c.dynamicPptIframeElement=f,c.dynamicPptLoadingElementId=v,c.dynamicPptLoadingElement=g,c.dynamicPptReloadNumberElement=y,c.dynamicPptActionElementId=_,c.dynamicPptActionElement=b,c.id=l,c.remoteData={},c.awitExecutePostMessageArray=[],c.dynamicPptActionJson={},c.associatedMsgID=a.associatedMsgID,c.associatedUserID=a.associatedUserID,c.synchronizationDynamicPpt=a.synchronizationDynamicPpt,c.dynamicPptActionClick=a.dynamicPptActionClick,c.forceReloadNumber=0,c.maxForceReloadNumber=a.maxForceReloadNumber,c.forceReloadInterval=a.forceReloadInterval,c.isShowReloadFileTip=a.isShowReloadFileTip,c.languageType=a.languageType,c.againreconnectNum=0,a.againreconnectElementParentNode&&(c.againreconnectElementParentNode=a.againreconnectElementParentNode),c.dynamicPptIframeElement.onload=function(){clearTimeout(c.forceReloadNumberTimer),c.forceReloadNumberTimer=null,c.iframeSrc&&!c.isLoadFinished&&c.forceReloadNumber<c.maxForceReloadNumber&&t._iframeReloadMonitor(c,"dynamicPptLoaded")},c}L.Logger.error("dynamicPptElementId is required!")}},{key:"destroyDynamicPptInstance",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?this._destroyDynamicPptInstance(t):L.Logger.error("[destroy]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?t.source===o.dynamicPptIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"changeDynamicPptSize",value:function(e){var t=this,o=this.getDynamicPptInstanceByID(e);if(o){var n={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};this._postMessage(o,n),setTimeout(function(){var e={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};t._postMessage(o,e)},250)}else L.Logger.error("[changeDynamicPptSize]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"hasDynamicPptById",value:function(e){var t=this.getDynamicPptInstanceByID(e);return null!=t}},{key:"setDynamicPptIframeSrc",value:function(e,t,o,n,i){var a=2<arguments.length&&void 0!==o?o:{},r=3<arguments.length&&void 0!==n?n:{},s=4<arguments.length&&void 0!==i?i:{},l=this.getDynamicPptInstanceByID(e);if(l){var d="";l.isLoadFinished=!1,l.awitExecutePostMessageArray.length=0,clearTimeout(l.forceReloadNumberTimer),l.forceReloadNumberTimer=null,l.forceReloadNumber=s.forceReloadNumber||0;var c=r.fileid,u=r.pptslide,h=r.pptstep;if(l.playback=s.playback,l.againreconnectElement&&(l.againreconnectElement.parentNode&&l.againreconnectElement.parentNode.removeChild(l.againreconnectElement),l.againreconnectElement=void 0),c==l.fileid&&t&&s.isAgainreconnect||(l.againreconnectNum=0),l.fileid=c,l.awitJumpToAnimPptslide=u,l.awitJumpToAnimPptstep=h,t){d=t;var m=!1,f=!0,p=!1,g=void 0;try{for(var v,y=Object.entries(a)[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value,_=S(b,2),w=_[0],k=_[1];null!=k&&(m?d+="&"+w+"="+k:(m=!0,d+=(/\?/g.test(d)?"&":"?")+w+"="+k))}}catch(e){p=!0,g=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw g}}l.iframeSrc=d,this._showLoading(l),this._iframeReloadMonitor(l,"setDynamicPptIframeSrc")}else l.iframeSrc=d;s.isAgainreconnect&&(l.dynamicPptIframeElement.src=""),l.dynamicPptIframeElement.src=d,L.Logger.debug("set dynamic ppt src:",d)}else L.Logger.error("[setDynamicPptIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"jumpToAnimation",value:function(e,t,o,n,i,a){var r=this.getDynamicPptInstanceByID(e);r?this._jumpToAnimation(r,t,o,n,i,a):L.Logger.error("[jumpToAnimation]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide>=o.remoteData.pptslidesCount?L.Logger.warning("[nextPage]dynamic ppt is on the last page , cannot execute nextPage method."):this._postMessage(o,{action:"gotoNextSlide",autoStart:t}):L.Logger.info("[nextPage]dynamic ppt is not load finished  , cannot execute nextPage method"):L.Logger.error("[nextPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide<=1?L.Logger.warning("[prevPage]dynamic ppt is  on page 1 , cannot execute prevPage method."):this._postMessage(o,{action:"gotoPreviousSlide",autoStart:t}):L.Logger.info("[prevPage]dynamic ppt is not load finished  , cannot execute prevPage method"):L.Logger.error("[prevPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoNextStep"}):L.Logger.info("[nextStep]dynamic ppt is not load finished  , cannot execute nextStep method"):L.Logger.error("[nextStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoPreviousStep"}):L.Logger.info("[prevStep]dynamic ppt is not load finished  , cannot execute prevStep method"):L.Logger.error("[prevStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"updateDynamicPptProperty",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationDynamicPpt&&(o.synchronizationDynamicPpt=t.synchronizationDynamicPpt,this._postMessage(o,{action:"changePublishDynamicPptMediaPermission_video",publishDynamicPptMediaPermission_video:o.synchronizationDynamicPpt})),void 0!==t.dynamicPptActionClick&&(o.dynamicPptActionClick=t.dynamicPptActionClick,o.dynamicPptActionElement.style.display=o.dynamicPptActionClick?"none":"block",this._postMessage(o,{action:"changeDynamicPptActionClick",dynamicPptActionClick:o.dynamicPptActionClick})),void 0!==t.canPage&&this._postMessage(o,{action:"changeNewpptPagingPage",newpptPagingPage:t.canPage}),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o),o.againreconnectElement&&this._setAgainreconnectInfo(o))):L.Logger.error("[updateDynamicPptProperty]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessageDynamicPptTriggerAction",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);if(o){var n=t.slide,i=t.fileid;o.fileid!=i||o.remoteData.pptslide!==n+1?(o.dynamicPptActionJson[n+1]=o.dynamicPptActionJson[n+1]||[],o.dynamicPptActionJson[n+1].push(t)):this._postMessage(o,t)}else L.Logger.error("[postMessageDynamicPptTriggerAction]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getDynamicPptInstanceByID",value:function(e){var t=this._getDynamicPptInstanceID(e);return this.dynamicPptInstanceStore[t]}},{key:"_jumpToAnimation",value:function(e,t,o,n,i,a){e.isLoadFinished&&(e.remoteData.pptslide>e.remoteData.pptslidesCount||e.remoteData.pptslide<1)&&(e.remoteData.pptslide>e.remoteData.pptslidesCount&&(t=e.remoteData.pptslidesCount,e.remoteData.pptslide=e.remoteData.pptslidesCount),e.remoteData.pptslide<1&&(t=1,e.remoteData.pptslide=1),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}));var r={action:"jumpToAnim",data:{slide:t,step:o,timeOffset:i,autoStart:a,initiative:n}};this._postMessage(e,r)}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.dynamicPptIframeElement&&e.dynamicPptIframeElement.src){var o={source:"tk_dynamicPPT",data:t};o=JSON.stringify(o),e.dynamicPptIframeElement&&e.dynamicPptIframeElement.contentWindow&&e.dynamicPptIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]dynamic ppt postMessage instanceId is "+e.id+",sendData:"+o),e.dynamicPptIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] dynamic ppt postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.dynamicPptLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.dynamicPptLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getDynamicPptInstanceID",value:function(e){var t=this.uniqueDynamicPpt||null==e?this.dynamicPptInstanceDefaultID:this.dynamicPptInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialDynamicPptInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_destroyDynamicPptInstance",value:function(e){var t=e.dynamicPptInstanceID,o=e.dynamicPptElement;o?o.innerHTML="":L.Logger.warning("[destroy] dynamicPpt elements do not exist , element id is:"+e.dynamicPptElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.dynamicPptInstanceStore[t]=null,delete this.dynamicPptInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){var n=this;if(o.data){var i=void 0,a=void 0;try{i=(a=JSON.parse(o.data)).data}catch(e){return void L.Logger.warning("dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(a&&"tk_dynamicPPT"===a.source)switch(L.Logger.debug("[dynamicPpt]receive remote iframe data form "+o.origin+":",o),i.action){case"initEvent":this._handleIframeMessage_initEvent(t,i);break;case"slideChangeEvent":case"stepChangeEvent":this._handleIframeMessage_slideOrStepChangeEvent(t,i,i.action);break;case"autoPlayVideoInNewPpt":this._handleIframeMessage_autoPlayVideoInNewPpt(t,i);break;case"clinetAudioPlayer":this._handleIframeMessage_autoPlayAudioInNative(t,i);break;case"clickNewpptTriggerEvent":this._handleIframeMessage_clickNewpptTriggerEvent(e,t,i);break;case"allVideoAndAudio":case"clickLink":break;case"againReconnect":if(L.Logger.warning("[dynamic ppt]again reconnect info from dynamic ppt inner, again reconnect number is "+t.againreconnectNum),t.againreconnectNum++,t.againreconnectNum<=1)t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("reloadCurrentDocument",{id:t.id,iframeSrc:t.iframeSrc,fileid:t.fileid,forceReloadNumber:t.forceReloadNumber,isAgainreconnect:!0});else{if(t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.playback)return;t.againreconnectElement=document.createElement("div"),t.againreconnectElement.className="againreconnect-container";var r=document.createElement("div");r.className="againreconnect-box";var s=document.createElement("span");s.className="top-box title";var l=document.createElement("span");l.className="middle-box point-icon";var d=document.createElement("span");d.className="bottom-box ok-container";var c=document.createElement("button");c.className="ok-btn",c.onclick=function(){n._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},c.ontouchend=function(){n._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},d.appendChild(c),r.appendChild(s),r.appendChild(l),r.appendChild(d),t.againreconnectElement.appendChild(r),(t.againreconnectElementParentNode||t.dynamicPptInstanceElement).appendChild(t.againreconnectElement),this._setAgainreconnectInfo(t)}}}}},{key:"_handleIframeMessage_initEvent",value:function(e,t){if(clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.remoteData.pptview=t.view,e.remoteData.pptslidesCount=t.slidesCount,e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&(e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),e.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height}),e.handler.receiveActionCommandCallback("dynamicPptLoadEnd",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height,reloadNumber:e.forceReloadNumber,success:!0})),e.isLoadFinished||(e.isLoadFinished=!0,void 0!==e.awitJumpToAnimPptslide&&(this._jumpToAnimation(e,e.awitJumpToAnimPptslide,e.awitJumpToAnimPptstep),e.awitJumpToAnimPptslide=void 0,e.awitJumpToAnimPptstep=void 0,delete e.awitJumpToAnimPptslide,delete e.awitJumpToAnimPptstep)),e.awitExecutePostMessageArray&&0<e.awitExecutePostMessageArray.length){var o=!0,n=!1,i=void 0;try{for(var a,r=e.awitExecutePostMessageArray[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;this._postMessage(e,s)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}e.awitExecutePostMessageArray.length=0,this._hideLoading(e)}},{key:"_handleIframeMessage_slideOrStepChangeEvent",value:function(e,t,o){if(e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("slideChangeEvent"===o?"dynamicPptSlideChange":"dynamicPptStepChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),0<Object.keys(e.dynamicPptActionJson).length&&e.dynamicPptActionJson[e.remoteData.pptslide]&&0!==e.dynamicPptActionJson[e.remoteData.pptslide].length){var n=!0,i=!1,a=void 0;try{for(var r,s=e.dynamicPptActionJson[e.remoteData.pptslide][Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;this._postMessage(e,l)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}e.dynamicPptActionJson[e.remoteData.pptslide].length=0,delete e.dynamicPptActionJson[e.remoteData.pptslide]}t.externalData&&t.externalData.initiative&&(this._sendSignalling_ShowPage(e,{data:{action:"slideChangeEvent"===o?"slide":"step"}}),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("closeAllSelectBox",{id:e.id}))}},{key:"_handleIframeMessage_autoPlayVideoInNewPpt",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=t.isvideo,n=t.url,i=t.fileid,a={id:e.id,url:n,video:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:i}};e.handler.receiveActionCommandCallback("publishDymanicPptNetworkMedia",a)}}},{key:"_handleIframeMessage_autoPlayAudioInNative",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=t.isPlay,n=t.url,i=t.fileid,a=function(e,t){var o={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(t,["isPlay","url","fileid"]),r={id:e.id,url:n,isPlay:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:i,type:"audio",other:a,currentPage:e.remoteData.pptslide}};e.handler.receiveActionCommandCallback("publishDymanicPptNetworkAudio",r)}}},{key:"_handleIframeMessage_clickNewpptTriggerEvent",value:function(e,t,o){o.externalData&&o.externalData.initiative&&(o.fileid=t.fileid,o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"NewPptTriggerActionClick":"ExtendNewPptTriggerActionClick",id:"default"===e?"NewPptTriggerActionClick":"NewPptTriggerActionClick_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id}))}},{key:"_sendSignallingToServer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.name,i=o.id,a=o.toID,r=void 0===a?"__all":a,s=o.data,l=o.do_not_save,d=o.expiresabs,c=o.associatedMsgID,u=o.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(c=c||e.associatedMsgID,u=u||e.associatedUserID,e.handler.sendSignallingToServer(n,i,r,s,l,d,c,u))}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptFail",{id:e.id,forceReloadNumber:e.maxForceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:o})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.dynamicPptReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"ja":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.dynamicPptReloadNumberElement.innerHTML=t||""}},{key:"_setAgainreconnectInfo",value:function(e){if(e.againreconnectElement){var t=e.againreconnectElement.getElementsByClassName("top-box")[0],o=e.againreconnectElement.getElementsByClassName("ok-btn")[0];if(t||o){var n="加载有点慢......",i="点此继续";switch(e.languageType){case"tw":n="加載有點慢......",i="點此繼續";break;case"en":n="Loading a bit slow...",i="Click to continue";break;case"ja":n="インストールに時間がかかっています。...",i="続行する"}t&&(t.innerHTML=n),o&&(o.innerHTML=i)}}}}]),i);o.default=a},{}],335:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){var o={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.defaultProductionOptions={synchronizationH5Document:!0,h5DocumentActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.h5DocumentInstanceIDPrefix="h5Document_",this.h5DocumentInstanceDefaultID="h5Document_default",this.h5DocumentInstanceStore={},this.uniqueH5Document=!1,this.specialH5DocumentInstanceIDPrefix="specialH5DocumentInstanceIDPrefix_",this.isH5MediaOutputDominant=!1}var a=new(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(i,[{key:"productionH5Document",value:function(e){var t=this,o=0<arguments.length&&void 0!==e?e:{},n=o.h5DocumentElementId,i=o.productionOptions,a=void 0===i?{}:i,r=o.handler,s=void 0===r?{}:r,l=o.id;if(n){var d=this._getH5DocumentInstanceID(l),c=this.getH5DocumentInstanceByID(d);if(c)return L.Logger.error("The production h5Document(h5DocumentInstanceID:"+d+") fails, the h5Document already exists!"),c;c={},a=Object.deepAssign({},this.defaultProductionOptions,a);var u=document.getElementById(n);if(!u)return L.Logger.error("H5Document elements do not exist , element id is:"+n+"!"),c;var h=document.createElement("div"),m=n+"_h5DocumentInstance";h.className="h5Document-instance-element",h.id=m,h.style.width="100%",h.style.height="100%";var f=document.createElement("iframe"),p=n+"_h5DocumentIframe";f.className="h5Document-iframe-element",f.id=p,f.name=n+"_h5DocumentIframeName",f.allowFullScreen=!0,f.allow="autoplay",f.frameborder=0,f.scrolling="no",f.width="1px",f.height="1px",f.style.width="1px",f.style.minWidth="100%",f.style.height="1px",f.style.minHeight="100%",f.style.border="none",f.style.padding="0",f.style.margin="0",h.appendChild(f);var g=document.createElement("div"),v=n+"_h5DocumentLoading";g.className="h5Document-loading-element talkcloud-loading",g.id=v;var y=document.createElement("span");y.className="tk-loading-reload-number",y.style.display="none",g.appendChild(y),h.appendChild(g);var b=document.createElement("div"),_=n+"_h5DocumentAction";return b.className="h5Document-action-element talkcloud-action",b.style.width="100%",b.style.height="100%",b.style.zIndex=98,b.style.display=a.h5DocumentActionClick?"none":"block",b.style.position="absolute",b.style.top="0",b.style.left="0",b.id=_,h.appendChild(b),h.appendChild(b),u.appendChild(h),(this.h5DocumentInstanceStore[d]=c).h5DocumentInstanceID=d,c.handler={},c.handler.sendSignallingToServer=s.sendSignallingToServer,c.handler.delSignallingToServer=s.delSignallingToServer,c.handler.receiveActionCommandCallback=s.receiveActionCommandCallback,c.h5DocumentElementId=n,c.h5DocumentElement=u,c.h5DocumentInstanceElementId=m,c.h5DocumentInstanceElement=h,c.h5DocumentIframeElementId=p,c.h5DocumentIframeElement=f,c.h5DocumentLoadingElementId=v,c.h5DocumentLoadingElement=g,c.h5DocumentReloadNumberElement=y,c.h5DocumentActionElementId=_,c.h5DocumentActionElement=b,c.id=l,c.awitExecutePostMessageArray=[],c.h5DocumentActionJson={},c.associatedMsgID=a.associatedMsgID,c.associatedUserID=a.associatedUserID,c.synchronizationH5Document=a.synchronizationH5Document,c.h5DocumentActionClick=a.h5DocumentActionClick,c.forceReloadNumber=0,c.maxForceReloadNumber=a.maxForceReloadNumber,c.forceReloadInterval=a.forceReloadInterval,c.isShowReloadFileTip=a.isShowReloadFileTip,c.languageType=a.languageType,c.isH5MediaOutputDominant=a.isH5MediaOutputDominant,this.isH5MediaOutputDominant=a.isH5MediaOutputDominant,c.h5DocumentIframeElement.onload=function(){clearTimeout(c.forceReloadNumberTimer),c.forceReloadNumberTimer=null,c.iframeSrc&&!c.isLoadFinished&&c.forceReloadNumber<c.maxForceReloadNumber&&t._iframeReloadMonitor(c,"h5DocumentLoaded")},c}L.Logger.error("h5DocumentElementId is required!")}},{key:"destroyH5DocumentInstance",value:function(e){var t=this.getH5DocumentInstanceByID(e);t?this._destroyH5DocumentInstance(t):L.Logger.error("[destroy]There are no h5 document Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?t.source===o.h5DocumentIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no h5 document Numbers that belong to id "+e)}},{key:"hasH5DocumentById",value:function(e){var t=this.getH5DocumentInstanceByID(e);return null!=t}},{key:"setH5DocumentIframeSrc",value:function(e,t,o,n,i){var a=2<arguments.length&&void 0!==o?o:{},r=3<arguments.length&&void 0!==n?n:{},s=4<arguments.length&&void 0!==i?i:{},l=this.getH5DocumentInstanceByID(e);if(l){var d="";l.isLoadFinished=!1,l.isReceivePagenum=!1,clearTimeout(l.h5DocumentActionTimer),clearTimeout(l.forceReloadNumberTimer),l.forceReloadNumberTimer=null,l.forceReloadNumber=s.forceReloadNumber||0;var c=r.fileid;if(this.isH5MediaOutputDominant=a.isH5MediaOutput&&0==a.role,l.fileid=c,t){d=t;var u=!1,h=!0,m=!1,f=void 0;try{for(var p,g=Object.entries(a)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value,y=w(v,2),b=y[0],_=y[1];u?d+="&"+b+"="+_:(u=!0,d+=(/\?/g.test(d)?"&":"?")+b+"="+_)}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}l.iframeSrc=d,this._showLoading(l),this._iframeReloadMonitor(l,"setH5DocumentIframeSrc")}else l.iframeSrc=d,this._hideLoading(l);l.h5DocumentIframeElement.src=d,L.Logger.debug("set h5 document src:",d)}else L.Logger.error("[setH5DocumentIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"jumpToPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._jumpToPage(o,t):L.Logger.error("[jumpToPage]There are no h5 document Numbers that belong to id "+e)}},{key:"nextPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage>=o.pagenum)L.Logger.warning("[nextPage]h5 document is on the last page , cannot execute nextPage method.");else{var n={currpage:o.currpage+1};this._postMessage(t,{method:"onJumpPage",toPage:n.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,n),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[nextPage]h5 document is not load finished  , cannot execute nextPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"prevPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage<=1)L.Logger.warning("[nextPage]h5 document is on page 1, cannot execute prevPage method.");else{var n={currpage:o.currpage-1};this._postMessage(t,{method:"onJumpPage",toPage:n.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,n),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[prevPage]h5 document is not load finished  , cannot execute prevPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"skipPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o)if(o.isLoadFinished){var n=this._getWhiteboardFiledata(o);n&&t>n.pagenum&&(L.Logger.info("[skipPage]h5 document skip to page exceeds the maximum number of pages , change skip page  to 5(max page number)."),t=n.pagenum),t<1&&(L.Logger.info("[skipPage]h5 document skip to page less than the minimum page , change skip page  to 1(min page number)."),t=1),this._saveFiledataAndLoadCurrpageWhiteboardData(o,{currpage:t}),this._jumpToPage(o,t),this._sendSignalling_ShowPage(o)}else L.Logger.info("[skipPage]h5 document is not load finished  , cannot execute skipPage method");else L.Logger.error("[skipPage]There are no h5 document Numbers that belong to id "+e)}},{key:"updateH5DocumentProperty",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationH5Document&&(o.synchronizationH5Document=t.synchronizationH5Document),void 0!==t.h5DocumentActionClick&&(o.h5DocumentActionClick=t.h5DocumentActionClick,o.h5DocumentActionElement.style.display=o.h5DocumentActionClick?"none":"block"),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o)),void 0!==t.isH5MediaOutputDominant&&(o.isH5MediaOutputDominant=t.isH5MediaOutputDominant)):L.Logger.error("[updateH5DocumentProperty]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessageH5DocumentTriggerAction",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o){var n=this._getWhiteboardFiledata(o);!t||null==t.fileid||void 0===t.currpage||n.fileid==t.fileid&&n.currpage===t.currpage?this._postMessage(o,t):(o.h5DocumentActionJson[t.currpage]=o.h5DocumentActionJson[t.currpage]||[],o.h5DocumentActionJson[t.currpage].push(t))}else L.Logger.error("[postMessageH5DocumentTriggerAction]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no h5 document Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no h5 document Numbers that belong to id "+e)}},{key:"getH5DocumentInstanceByID",value:function(e){var t=this._getH5DocumentInstanceID(e);return this.h5DocumentInstanceStore[t]}},{key:"_jumpToPage",value:function(e,t){if(e.isLoadFinished){var o=this._getWhiteboardFiledata(e),n=!1,i=t;if(o&&(o.currpage>o.pagenum&&(o.currpage=o.pagenum,n=!0,t=o.currpage),o.currpage<1&&(o.currpage=1,n=!0,t=o.currpage),i=o.currpage),n){var a={};n&&(a.currpage=i),this._saveFiledataAndLoadCurrpageWhiteboardData(e,a)}if(null!=t&&!isNaN(t)){var r={method:"onJumpPage",toPage:t};this._postMessage(e,r)}}}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.h5DocumentIframeElement&&e.h5DocumentIframeElement.src){var o=t;o=JSON.stringify(o),e.h5DocumentIframeElement&&e.h5DocumentIframeElement.contentWindow&&e.h5DocumentIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]h5 document postMessage instanceId is "+e.id+",sendData:"+o),e.h5DocumentIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] h5 document postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.h5DocumentLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.h5DocumentLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getH5DocumentInstanceID",value:function(e){var t=this.uniqueH5Document||null==e?this.h5DocumentInstanceDefaultID:this.h5DocumentInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialH5DocumentInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_destroyH5DocumentInstance",value:function(e){var t=e.h5DocumentInstanceID,o=e.h5DocumentElement;o?o.innerHTML="":L.Logger.warning("[destroy] h5Document elements do not exist , element id is:"+e.h5DocumentElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.h5DocumentInstanceStore[t]=null,delete this.h5DocumentInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){if(o.data){var n=void 0;try{n=JSON.parse(o.data)}catch(e){return void L.Logger.warning("h5 document receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(n.method||"tk_h5Document"===n.source)switch(L.Logger.debug("[h5Document]receive remote iframe data form "+o.origin+":",o),n.method){case"onLoadComplete":this._handleIframeMessage_onLoadComplete(t,n);break;case"onPagenum":this._handleIframeMessage_onPagenum(t,n);break;case"onFileMessage":this._handleIframeMessage_onFileMessage(e,t,n);break;case"onJumpPage":if(!n.toPage||"number"!=typeof n.toPage)return void L.Logger.warning("h5 document toPage is not a number , toPage:",n.toPage);t.handler.receiveActionCommandCallback("h5DocumentOnJumpPage",{id:t.id,toPage:n.toPage});break;case"clinetAudioPlayer":if(!t.isH5MediaOutputDominant)return;this._handleIframeMessage_autoPlayAudioInNative(t,n.data);break;case"clinetVideoPlayer":if(!t.isH5MediaOutputDominant)return;this._handleIframeMessage_autoPlayVideoInNative(t,n.data)}}}},{key:"_handleIframeMessage_autoPlayAudioInNative",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=this._getWhiteboardFiledata(e),n=t.isPlay,i=t.url,a=t.fileid,r=t.status,s=c(t,["isPlay","url","fileid","status"]),l={id:e.id,url:i,isPlay:n,status:r,audio:!0,attributes:{source:"h5Document",filename:"",fileid:a,type:"audio",other:s,currentPage:o.currpage}};e.handler.receiveActionCommandCallback("publishH5DocumentNetworkMedia",l)}}},{key:"_handleIframeMessage_autoPlayVideoInNative",value:function(e,t){var o=this._getWhiteboardFiledata(e),n=t.isPlay,i=t.url,a=t.status,r=c(t,["isPlay","url","status"]),s=o.fileid;if(r.position){var l=e.h5DocumentIframeElement;r.position.height=r.position.height/l.offsetHeight||1,r.position.width=r.position.width/l.offsetWidth||1,r.position.top=r.position.top/l.offsetHeight||0,r.position.left=r.position.left/l.offsetWidth||0}var d={id:e.id,url:i,video:!0,isPlay:n,status:a,audio:!0,attributes:{source:"h5Document",filename:"",fileid:s,type:"video",other:r,currentPage:o.currpage}};e.handler.receiveActionCommandCallback("publishH5DocumentNetworkMedia",d)}},{key:"_handleIframeMessage_onLoadComplete",value:function(r,e){var s=this;if(clearTimeout(r.forceReloadNumberTimer),r.forceReloadNumberTimer=null,r.handler&&r.handler.receiveActionCommandCallback&&(r.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:r.id,scale:e.coursewareRatio||16/9}),r.handler.receiveActionCommandCallback("h5DocumentLoadEnd",{id:r.id,scale:e.coursewareRatio||16/9,reloadNumber:r.forceReloadNumber,success:!0})),!r.isLoadFinished&&(r.isLoadFinished=!0,r.isReceivePagenum)){var l=this._getWhiteboardFiledata(r);l&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n,i=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100))}if(r.awitExecutePostMessageArray&&0<r.awitExecutePostMessageArray.length){var t=!0,o=!1,n=void 0;try{for(var i,a=r.awitExecutePostMessageArray[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var d=i.value;this._postMessage(r,d)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}r.awitExecutePostMessageArray.length=0,this._hideLoading(r)}},{key:"_handleIframeMessage_onPagenum",value:function(r,e){var s=this,t=e.totalPages,o=!1,n=1,l=this._getWhiteboardFiledata(r);l&&(l.pagenum=t,l.currpage>l.pagenum&&(l.currpage=l.pagenum,o=!0),l.currpage<1&&(l.currpage=1,o=!0),n=l.currpage);var i={pagenum:t};o&&(i.currpage=n),o?this._saveFiledataAndLoadCurrpageWhiteboardData(r,i):this._updateWhiteboardFiledata(r,i),r.isLoadFinished&&!r.isReceivePagenum&&(l=this._getWhiteboardFiledata(r))&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n,i=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100)),r.isReceivePagenum=!0}},{key:"_handleIframeMessage_onFileMessage",value:function(e,t,o){o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"H5DocumentAction":"ExtendH5DocumentAction",id:"default"===e?"H5DocumentAction":"H5DocumentAction_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id})}},{key:"_sendSignallingToServer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.name,i=o.id,a=o.toID,r=void 0===a?"__all":a,s=o.data,l=o.do_not_save,d=o.expiresabs,c=o.associatedMsgID,u=o.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(c=c||e.associatedMsgID,u=u||e.associatedUserID,e.handler.sendSignallingToServer(n,i,r,s,l,d,c,u))}},{key:"_getWhiteboardFiledata",value:function(e){var t=void 0;return e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("getWhiteboardFiledata",{id:e.id,callback:function(e){t=e}}),t}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("saveFiledataAndLoadCurrpageWhiteboardData",{id:e.id,updateFileData:o})}},{key:"_updateWhiteboardFiledata",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardFiledata",{id:e.id,updateFileData:o})}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadH5DocumentIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("h5DocumentReloadFail",{id:e.id,reloadNumber:e.forceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:o})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.h5DocumentReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"en":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.h5DocumentReloadNumberElement.innerHTML=t||""}}]),i);o.default=a},{}],336:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("pdfobject"),c=(a=r)&&a.__esModule?a:{default:a};if(window.PDFObject=c.default,window.L&&window.L.Logger&&window.L.Logger.debug&&window.L.Logger.trace&&window.L.Logger.info&&window.L.Logger.warning&&window.L.Logger.error||(window.L=window.L||{},window.L.Logger=window.L.Logger||{},window.L.Logger.debug=window.L.Logger.debug||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)},window.L.Logger.trace=window.L.Logger.trace||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},window.L.Logger.info=window.L.Logger.info||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},window.L.Logger.warning=window.L.Logger.warning||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},window.L.Logger.error=window.L.Logger.error||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)}),!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var s=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){var o=void 0;try{o=Array.isArray(t)?t.slice(0):JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var a in i)o[a]=i[a]}if("object"===(void 0===o?"undefined":f(o)))for(var r in o)t[r]=o[r];return t}};Object&&Object.shallowAssign||(Object.shallowAssign=s),Object&&Object.customAssign||(Object.customAssign=s)}Object&&Object.deepAssign||(Object.deepAssign=function(t){var o=void 0;if("object"!==(void 0===t?"undefined":f(t))||Array.isArray(t))o="object"===(void 0===t?"undefined":f(t))&&Array.isArray(t)?t.slice(0):t;else try{o=JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var i in n)void 0===o[i]?"object"===f(n[i])?Array.isArray(n[i])?o[i]=n[i].slice(0):o[i]=JSON.parse(JSON.stringify(n[i])):o[i]=n[i]:"object"===f(n[i])?o[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===f(o[i])?o[i]:Array.isArray(n[i])?[]:{},n[i]):o[i]=n[i]}if("object"===(void 0===o?"undefined":f(o)))for(var a in o)t[a]=o[a];return t}),String.prototype.colorHex=function(){if(/^(rgb|RGB)/.test(this)){for(var e=this.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),t="#",o=0;o<e.length;o++){var n=Number(e[o]).toString(16);"0"===n&&(n+=n),t+=n}return 7!==t.length&&(t=this),t}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(this))return this;var i=this.replace(/#/,"").split("");if(6===i.length)return this;if(3===i.length){for(var a="#",r=0;r<i.length;r+=1)a+=i[r]+i[r];return a}},String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",o=1;o<4;o+=1)t+=e.slice(o,o+1).concat(e.slice(o,o+1));e=t}for(var n=[],i=1;i<7;i+=2)n.push(parseInt("0x"+e.slice(i,i+2)));return"RGB("+n.join(",")+")"}return e};var l=function(e,t,o,n){n=null!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,o,n):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},p=function(e,t,o,n){e.addEventListener?e.removeEventListener(t,o,n):e.attachEvent?e.detachEvent("on"+t,o):e["on"+t]=null};function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,defaultWhiteboardScale:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!0,saveUndoStack:!0,remindContentTime:3e3,showShapeAuthor:!1,showMyselfRemindContent:!1,isOnlyUndoRedoClearMyselfShape:!1,synchronizationWhiteboard:!0},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.historyPenTool=void 0,this.historyShapeTool=void 0,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={}}var u=new(n(d,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){/^tool_/.test(e)&&(this.commonActiveTool=e);var t=!0,o=!1,n=void 0;try{for(var i,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;if(!r.proprietaryTools){var s=r.id;this.activeWhiteboardTool(e,s)}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,o=this._getWhiteboardInstanceById(t);if(!o)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,o);else{var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var i=n.split("_");n=i[0]+"_"+i[1]+"_"+i[2];var a=i[1],r=i[2],s=this.getWhiteboardFiledata(t);s.fileid==a&&s.currpage==r&&(this._receiveSnapshot(e,o),e.remindContent=e.data&&e.data.nickname||e.remindContent,o.showShapeAuthor&&e.remindContent&&e.fromID!=o.myselfId&&this._handlerShowRemoteRemindContentFromPubmsgData(o,e)),null!==o.waitingProcessShapeData[n]&&void 0!==o.waitingProcessShapeData[n]||(o.waitingProcessShapeData[n]=[]),o.waitingProcessShapeData[n].push(e)}}}}},{key:"preloadWhiteboardImg",value:function(t,e){if(t){var o=new Image;o.onload=function(){e&&"function"==typeof e&&e()},o.onerror=function(e){L.Logger.error("preload img  fail , img url is "+t)},o.src=t}else L.Logger.warning("preload img url is not esixt!")}},{key:"productionWhiteboard",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},o=t.whiteboardElementId,n=t.thumbnailId,i=t.productionOptions,a=void 0===i?{}:i,r=t.handler,s=void 0===r?{}:r,l=t.id,d=this;if(o){var c=d._getWhiteboardInstanceID(l),u=d._getWhiteboardInstanceByID(c);if(u)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+c+") fails, the whiteboard already exists!"),u;u={};var h=document.getElementById(o);if(!h)return L.Logger.error("Whiteboard elements do not exist , element id is:"+o+"!"),u;var m=document.createElement("div"),f=o+"_whiteboardInstance";return m.className="whiteboard-instance-element",m.id=f,h.appendChild(m),a=Object.deepAssign({},d.defaultProductionOptions,a),(d.whiteboardInstanceStore[c]=u).filedata=a.filedata||this.getWhiteboardDefaultFiledata({fileid:"whiteboard_default"===c?0:l}),u.baseWhiteboardWidth=a.baseWhiteboardWidth,u.whiteboardInstanceID=c,u.parcelAncestorElementId=a.parcelAncestorElementId,u.isBaseboard=a.isBaseboard,u.needLooadBaseboard=a.needLooadBaseboard,u.dependenceBaseboardWhiteboardID=a.dependenceBaseboardWhiteboardID,u.defaultWhiteboardScale=a.defaultWhiteboardScale,u.watermarkImageScale=a.defaultWhiteboardScale,u.whiteboardMagnification=a.whiteboardMagnification,u.remindContentTime=a.remindContentTime,u.showShapeAuthor=a.showShapeAuthor,u.showMyselfRemindContent=a.showMyselfRemindContent,u.associatedMsgID=a.associatedMsgID,u.associatedUserID=a.associatedUserID,u.proprietaryTools=a.proprietaryTools,u.minHeight=a.minHeight,u.rotateDeg=a.rotateDeg,u.deawPermission=a.deawPermission,u.tempDeawPermission=a.tempDeawPermission,u.nickname=a.nickname,u.userid=a.userid,u.insertPictureRule=a.insertPictureRule||"default",u.synchronizationWhiteboard=a.synchronizationWhiteboard,u.whiteboardToolsInfo=Object.deepAssign({},d.whiteboardToolsInfo),a.primaryColor&&(u.whiteboardToolsInfo.primaryColor=a.primaryColor),a.secondaryColor&&(u.whiteboardToolsInfo.secondaryColor=a.secondaryColor),a.backgroundColor&&(u.whiteboardToolsInfo.backgroundColor=a.backgroundColor),a.pencilWidth&&(u.whiteboardToolsInfo.pencilWidth=a.pencilWidth),a.shapeWidth&&(u.whiteboardToolsInfo.shapeWidth=a.shapeWidth),a.eraserWidth&&(u.whiteboardToolsInfo.eraserWidth=a.eraserWidth),a.fontSize&&(u.whiteboardToolsInfo.fontSize=a.fontSize),a.fontFamily&&(u.whiteboardToolsInfo.fontFamily=a.fontFamily),a.fontStyle&&(u.whiteboardToolsInfo.fontStyle=a.fontStyle),a.fontWeight&&(u.whiteboardToolsInfo.fontWeight=a.fontWeight),u.saveRedoStack=a.saveRedoStack,u.saveUndoStack=a.saveUndoStack,u.imageThumbnailId=a.imageThumbnailId,u.imageThumbnailTipContent=a.imageThumbnailTipContent,u.registerWhiteboardToolsList={},u.stackStorage={},u.handler={},u.handler.sendSignallingToServer=s.sendSignallingToServer,u.handler.delSignallingToServer=s.delSignallingToServer,u.handler.resizeWhiteboardSizeCallback=s.resizeWhiteboardSizeCallback,u.handler.noticeUpdateToolDescCallback=s.noticeUpdateToolDescCallback,u.handler.noticeUpdateWhiteboardFiledataCallback=s.noticeUpdateWhiteboardFiledataCallback,u.handler.whiteboardWatermarkImageOnloadCallback=s.whiteboardWatermarkImageOnloadCallback,u.handler.whiteboardWatermarkImageOnFailureCallback=s.whiteboardWatermarkImageOnFailureCallback,u.handler.receiveActionCommandCallback=s.receiveActionCommandCallback,u.active=!0,u.containerWidthAndHeight=a.containerWidthAndHeight,u.useImgOriginalSizeToContainerWidthAndHeight=a.useImgOriginalSizeToContainerWidthAndHeight,u.myselfId=a.myselfId,u.isOnlyUndoRedoClearMyselfShape=a.isOnlyUndoRedoClearMyselfShape,u.historyPenTool=this.historyPenTool,u.historyShapeTool=this.historyShapeTool,u.useToolKey=a.useToolKey,u.waitingProcessShapeData={},u.whiteboardElementId=o,u.whiteboardElement=h,u.whiteboardInstanceElementId=f,u.whiteboardInstanceElement=m,u.id=l,u.thumbnailId=n,u.lc=window.LC.init(u.whiteboardInstanceElement),u.lc.backingScale=1,u.lc.setColor("primary",u.whiteboardToolsInfo.primaryColor),u.lc.setColor("secondary",u.whiteboardToolsInfo.secondaryColor),u.lc.setColor("background",u.whiteboardToolsInfo.backgroundColor),u.lc.setWatermarkImageToLcBackground(!1),u.lc.setZoom(1),u.lc.setPan(0,0),u.lc.on("shapeSave",d._handlerShapeSaveEvent.bind(d,u)),u.lc.on("sendUndo",d._handlerUndoEvent.bind(d,u)),u.lc.on("sendRedo",d._handlerRedoEvent.bind(d,u)),u.lc.on("sendClear",d._handlerClearEvent.bind(d,u)),u.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(d,u)),u.activeTool=void 0,u.lc.myselfId=u.myselfId,u.lc.isOnlyUndoRedoClearMyselfShape=u.isOnlyUndoRedoClearMyselfShape,a.whiteboardClear&&d.clearWhiteboardAllDataById(l),d._changeWhiteboardDeawPermission(u.deawPermission,u),d._changeWhiteboardTemporaryDeawPermission(u.tempDeawPermission,u),d._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(u),d.activeWhiteboardTool(u.proprietaryTools?u.useToolKey?u.useToolKey:"tool_pencil":d.commonActiveTool,l),d._zoomIsDisable(u),d._actionIsDisable(u),d._noticeUpdateToolDesc(u),d._resizeWhiteboardHandler(u),d._noticeNpdateWhiteboardToolsInfo(u),u}L.Logger.error("whiteboardElementId is required!")}},{key:"changeWhiteboardExclusiveAttribute",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[changeWhiteboardExclusiveAttribute]There are no white board Numbers that belong to id "+e);for(var n in t)o.hasOwnProperty(n)&&(o[n]=t[n],"myselfId"===n||"isOnlyUndoRedoClearMyselfShape"===n?o.lc&&(o.lc[n]=o[n]):"defaultWhiteboardScale"===n?o.currentWatermarkImageUrl||(o.watermarkImageScale=o.defaultWhiteboardScale,o.lc.watermarkImage=null,this._resizeWhiteboardHandler(o)):"insertPictureRule"===n&&this._resizeWhiteboardHandler(o))}}},{key:"updateImageThumbnailId",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?(o.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(o)):L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var o=t.saveRedoStack,n=t.saveUndoStack,i=this._getWhiteboardInstanceById(e);i?(i.saveRedoStack=void 0!==o?o:i.saveRedoStack,i.saveUndoStack=void 0!==n?n:i.saveUndoStack):L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.isBaseboard=t:L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.dependenceBaseboardWhiteboardID=t:L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateShowRemindContent",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?(n.showShapeAuthor=t||n.showShapeAuthor,n.showMyselfRemindContent=o||n.showMyselfRemindContent):L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedMsgID=t:L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedUserID=t:L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){var t=this._getWhiteboardInstanceById(e);return null!=t}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._clearWhiteboardAllDataByInstance(t):L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._destroyWhiteboardInstance(t):L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._clearRedoAndUndoStack(o,t):L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t.whiteboardMagnification=this.defaultProductionOptions.whiteboardMagnification,this._zoomIsDisable(t),this._resizeWhiteboardHandler(t)):L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.whiteboardMagnification=t:L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScale",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:this.defaultProductionOptions.watermarkImageScale,n=this._getWhiteboardInstanceById(e);n?this._updateWhiteboardWatermarkImageScale(n,o):L.Logger.error("[updateWhiteboardWatermarkImageScale]There are no white board Numbers that belong to id "+e)}},{key:"getFileExt",value:function(e){if(""!=e)return"."+e.replace(/.+\./,"")}},{key:"setWhiteboardWatermarkImage",value:function(e,o,t){var n=2<arguments.length&&void 0!==t?t:{},i=n.resetDedaultWhiteboardMagnification,a=void 0===i||i,r=n.loadSucceedCallback,s=n.loadFailureCallback,l=this;L.Logger.debug("[setWhiteboardWatermarkImage]setWhiteboardWatermarkImage watermarkImageUrl:"+o);var d=l._getWhiteboardInstanceById(e);if(d)if(d.currentWatermarkImageUrl=o,a&&l.resetDedaultWhiteboardMagnification(e),o){if(l.showWhiteboardCanvasBackground(e),l._showWhiteboardLoading(d),".pdf"==l.getFileExt(o)&&c.default.supportsPDFs&&window.PDFObject)return d.lc.setPdf(o,function(){l._hideWhiteboardLoading(d)}),!1;clearTimeout(d.setWhiteboardWatermarkImageTimer),d.setWhiteboardWatermarkImageTimer=setTimeout(function(){var t=new Image;t.onload=function(){if(d.currentWatermarkImageUrl){var e=t.width/t.height;d.useImgOriginalSizeToContainerWidthAndHeight&&(d.containerWidthAndHeight={width:t.width,height:t.height}),d.lc.setWatermarkImage(t),l._resizeWhiteboardByScale(d,{watermarkImage:t,watermarkImageScale:e}),d.handler.whiteboardWatermarkImageOnloadCallback&&"function"==typeof d.handler.whiteboardWatermarkImageOnloadCallback&&d.handler.whiteboardWatermarkImageOnloadCallback({width:t.width,height:t.height})}else d.lc.watermarkImage=null,l._resizeWhiteboardHandler(d);l._hideWhiteboardLoading(d),r&&"function"==typeof r&&r(o)},t.onerror=function(e){L.Logger.error("img load fail , img url is "+o),s&&"function"==typeof s&&s(o),d&&d.handler&&d.handler.whiteboardWatermarkImageOnFailureCallback&&d.currentWatermarkImageUrl&&d.currentWatermarkImageUrl===o&&d.handler.whiteboardWatermarkImageOnFailureCallback(o)},t.src=o},150)}else l.hideWhiteboardCanvasBackground(e),d.lc.watermarkScale=1,l._resizeWhiteboardByScale(d,{isChangeWatermarkScale:!1}),l._hideWhiteboardLoading(d),d.lc.watermarkImage=null,d.lc.customCanvasBackgroundElement.style.backgroundImage="";else L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){if(void 0===e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this._resizeWhiteboardHandler(r)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else{var s=this._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);this._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.width,i=o.height,a=this._getWhiteboardInstanceById(e);a?void 0!==n&&void 0!==i?(a.containerWidthAndHeight={width:n,height:i},this._resizeWhiteboardHandler(a)):L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+n+" , height:"+i+"]!"):L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="none",t.lc.customCanvasBackgroundElement.style.display="none"):L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="",t.lc.customCanvasBackgroundElement.style.display=""):L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.fontSize,i=o.fontFamily,a=o.fontStyle,r=o.fontWeight,s=this._getWhiteboardInstanceById(e);s?(s.whiteboardToolsInfo.fontSize=void 0!==n?n:s.whiteboardToolsInfo.fontSize,s.whiteboardToolsInfo.fontFamily=void 0!==i?i:s.whiteboardToolsInfo.fontFamily,s.whiteboardToolsInfo.fontStyle=void 0!==a?a:s.whiteboardToolsInfo.fontStyle,s.whiteboardToolsInfo.fontWeight=void 0!==r?r:s.whiteboardToolsInfo.fontWeight,this._noticeNpdateWhiteboardToolsInfo(s),this._updateTextFont(s)):L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e,t){var o=(1<arguments.length&&void 0!==t?t:{}).eraserWidth,n=this._getWhiteboardInstanceById(e);n?(n.whiteboardToolsInfo.eraserWidth=void 0!==o?o:n.whiteboardToolsInfo.eraserWidth,this._noticeNpdateWhiteboardToolsInfo(n),this._updateEraserWidth(n)):L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e,t){var o=(1<arguments.length&&void 0!==t?t:{}).pencilWidth,n=this._getWhiteboardInstanceById(e);n?(n.whiteboardToolsInfo.pencilWidth=void 0!==o?o:n.whiteboardToolsInfo.pencilWidth,this._noticeNpdateWhiteboardToolsInfo(n),this._updatePencilWidth(n)):L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?t&&"object"===(void 0===t?"undefined":f(t))&&(Object.deepAssign(o.whiteboardToolsInfo,t),this._noticeNpdateWhiteboardToolsInfo(o)):L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e,t){var o=(1<arguments.length&&void 0!==t?t:{}).shapeWidth,n=this._getWhiteboardInstanceById(e);n?(n.whiteboardToolsInfo.shapeWidth=void 0!==o?o:n.whiteboardToolsInfo.shapeWidth,this._noticeNpdateWhiteboardToolsInfo(n),this._updateShapeWidth(n)):L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=y(d,2),u=c[0],h=c[1],m=u.replace(/Color/g,"");n[m]=h,o.whiteboardToolsInfo[m+"Color"]=h,this._noticeNpdateWhiteboardToolsInfo(o)}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}this._updateColor(o,n)}}},{key:"getActiveTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return t.activeTool;L.Logger.error("[getActiveTool]There are no white board Numbers that belong to id "+e)}},{key:"activeWhiteboardTool",value:function(e,t){var o=this;if(void 0!==o.useWhiteboardTool[e])if(null!=t){var n=o._getWhiteboardInstanceById(t);if(n)if(/^tool_/.test(e)){if("tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"===e||"tool_dashed"===e?n.historyPenTool=e:"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||(n.historyShapeTool=e),n.activeTool=e,o._setWhiteboardTools(e,n),o._handlerActiveToolLaser(e,n),"tool_text"===e?o._updateTextFont(n):"tool_eraser"===e?o._updateEraserWidth(n):"tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"==e||"tool_dashed"===e?o._updatePencilWidth(n):"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||o._updateShapeWidth(n),"tool_ellipse_empty"===e||"tool_rectangle_empty"===e?n.lc.setColor("secondary","transparent"):"tool_rectangle"===e||"tool_ellipse"===e||"tool_polygon"===e?n.lc.setColor("secondary",n.whiteboardToolsInfo.primaryColor):n.lc.setColor("secondary",n.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var i=n.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");n.lc.setColor("primary",i)}else n.lc.setColor("primary",n.whiteboardToolsInfo.primaryColor);n.handler.receiveActionCommandCallback&&n.handler.receiveActionCommandCallback("changeWhiteboardActiveTool",{id:n.id,activeTool:n.activeTool}),this._toolIsUse(n)}else if(/^action_/.test(e)){if("action_undo"===e){var a=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendUndo(a):n.lc.undo()}else if("action_redo"===e){var r=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendRedo(r):n.lc.redo()}else if("action_clear"===e){var s=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendClear(s):n.lc.clear()}o._actionIsDisable(n)}else/^zoom_/.test(e)&&("zoom_big"===e?n.whiteboardMagnification<o.maxMagnification&&(n.whiteboardMagnification+=.5):"zoom_small"===e?n.whiteboardMagnification>o.minMagnification&&(n.whiteboardMagnification-=.5):"zoom_default"===e&&(n.whiteboardMagnification=o.defaultProductionOptions.whiteboardMagnification),n.whiteboardMagnification>o.maxMagnification?n.whiteboardMagnification=o.maxMagnification:n.whiteboardMagnification<o.minMagnification&&(n.whiteboardMagnification=o.minMagnification),o._zoomIsDisable(n),o._resizeWhiteboardHandler(n));else L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t)}else L.Logger.error("[activeWhiteboardTool]id is undefined or null ");else L.Logger.error("The whiteboard does not have the "+e+" tool!")}},{key:"useHistoryPenTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyPenTool||"tool_pencil";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryPenTool]There are no white board Numbers that belong to id "+e)}},{key:"useHistoryShapeTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyShapeTool||"tool_rectangle";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryShapeTool]There are no white board Numbers that belong to id "+e)}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardTemporaryDeawPermission(e,o):L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"updateWhiteboardProperty",value:function(e,t){var o=this;if(t&&"object"===(void 0===t?"undefined":f(t))){var n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardProperty]There are no white board Numbers that belong to id "+e);if(void 0!==t.deawPermission&&o.changeWhiteboardDeawPermission(t.deawPermission,e),void 0!==t.showShapeAuthor&&o.changeWhiteboardExclusiveAttribute(e,{showShapeAuthor:t.showShapeAuthor}),void 0!==t.myselfId&&o.changeWhiteboardExclusiveAttribute(e,{myselfId:t.myselfId}),void 0!==t.isOnlyUndoRedoClearMyselfShape&&o.changeWhiteboardExclusiveAttribute(e,{isOnlyUndoRedoClearMyselfShape:t.isOnlyUndoRedoClearMyselfShape}),void 0!==t.nickname&&o.changeWhiteboardExclusiveAttribute(e,{nickname:t.nickname}),void 0!==t.primary||void 0!==t.secondary||void 0!==t.background||void 0!==t.primaryColor||void 0!==t.secondaryColor||void 0!==t.backgroundColor){var i={};for(var a in t)"primary"!==a&&"secondary"!==a&&"background"!==a&&"primaryColor"!==a&&"secondaryColor"!==a&&"backgroundColor"!==a||(i[a]=t[a]);o.updateColor(e,i)}if(void 0!==t.synchronizationWhiteboard&&o.changeWhiteboardExclusiveAttribute(e,{synchronizationWhiteboard:t.synchronizationWhiteboard}),void 0!==t.defaultWhiteboardScale&&o.changeWhiteboardExclusiveAttribute(e,{defaultWhiteboardScale:t.defaultWhiteboardScale}),void 0!==t.associatedMsgID&&o.updateWhiteboardAssociatedMsgID(e,t.associatedMsgID),void 0!==t.associatedUserID&&o.updateWhiteboardAssociatedUserID(e,t.associatedUserID),void 0!==t.pencilWidth||void 0!==t.shapeWidth||void 0!==t.eraserWidth||void 0!==t.fontSize||void 0!==t.fontFamily){var r={};void 0!==t.pencilWidth&&(r.pencilWidth=Number(t.pencilWidth)),void 0!==t.shapeWidth&&(r.shapeWidth=Number(t.shapeWidth)),void 0!==t.eraserWidth&&(r.eraserWidth=Number(t.eraserWidth)),void 0!==t.fontSize&&(r.fontSize=Number(t.fontSize)),void 0!==t.fontFamily&&(r.fontFamily=t.fontFamily),this.updateWhiteboardToolsInfo(e,r),void 0===t.fontSize&&void 0===t.fontFamily||this.updateTextFont(e),void 0!==t.pencilWidth&&("tool_pencil"!==n.activeTool&&"tool_highlighter"!==n.activeTool&&"tool_line"!==n.activeTool&&"tool_arrow"!==n.activeTool&&"tool_dashed"!==n.activeTool||this.updatePencilWidth(e)),void 0!==t.shapeWidth&&("tool_rectangle"!==n.activeTool&&"tool_rectangle_empty"!==n.activeTool&&"tool_ellipse"!==n.activeTool&&"tool_ellipse_empty"!==n.activeTool&&"tool_polygon"!==n.activeTool||this.updateShapeWidth(e)),void 0!==t.eraserWidth&&"tool_eraser"===n.activeTool&&this.updateEraserWidth(e)}void 0!==t.insertPictureRule&&o.changeWhiteboardExclusiveAttribute(e,{insertPictureRule:t.insertPictureRule})}}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardDeawPermission(e,o):L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(o){var n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=y(d,2),u=c[0],h=c[1];void 0!==this.useWhiteboardTool[u]?(n[u]=this._productionToolDesc(u,h),this.useWhiteboardTool[u]=!0):L.Logger.warning("The whiteboard does not have the "+u+" tool!")}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}o.registerWhiteboardToolsList=n,o.isRegisterWhiteboardTool=!0,this._zoomIsDisable(o),this._zoomIsDisable(o),this._noticeUpdateToolDesc(o)}else L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e)}else L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!")}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return!!(t.filedata&&"object"===f(t.filedata)&&0<Object.keys(t.filedata).length);L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardFiledata",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardFiledata(o,t):L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getRegisterWhiteboardToolsList",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.registerWhiteboardToolsList);L.Logger.error("[getRegisterWhiteboardToolsList]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"number"!=typeof t.filedata.currpage&&(t.filedata.currpage=Number(t.filedata.currpage)),"number"!=typeof t.filedata.pagenum&&(t.filedata.pagenum=Number(t.filedata.pagenum)),"number"!=typeof t.filedata.pptslide&&(t.filedata.pptslide=Number(t.filedata.pptslide)),"number"!=typeof t.filedata.pptstep&&(t.filedata.pptstep=Number(t.filedata.pptstep)),"number"!=typeof t.filedata.steptotal&&(t.filedata.steptotal=Number(t.filedata.steptotal)),Object.deepAssign({},t.filedata);L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"clearWhiteboardDataByFileidAndCurrpage",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?null!=t&&null!==o&&(n.waitingProcessShapeData["SharpsChange_"+t+"_"+o]=void 0,n.stackStorage["redoStack_"+t+"_"+o]=void 0,n.stackStorage["undoStack_"+t+"_"+o]=void 0,delete n.waitingProcessShapeData["SharpsChange_"+t+"_"+o],delete n.stackStorage["redoStack_"+t+"_"+o],delete n.stackStorage["undoStack_"+t+"_"+o]):L.Logger.error("[clearWhiteboardDataByFileidAndCurrpage]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.loadRedoStack,i=void 0===n||n,a=o.callback,r=this._getWhiteboardInstanceById(e);if(r){this._clearRedoAndUndoStack(r),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(r);var s=r.filedata,l=s.fileid,d=s.currpage;if(void 0===r.waitingProcessShapeData||null===r.waitingProcessShapeData)r.waitingProcessShapeData={};else{var c=r.waitingProcessShapeData["SharpsChange_"+l+"_"+d];null!=c&&0<c.length&&this._batchReceiveSnapshot(c,r)}if(i){var u=r.stackStorage["redoStack_"+l+"_"+d];u&&0<u.length&&(r.lc.redoStack=u)}this._actionIsDisable(r),a&&"function"==typeof a&&a()}else L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e)}},{key:"saveWhiteboardStackToStorage",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.saveRedoStack,i=o.saveUndoStack,a=this._getWhiteboardInstanceById(e);if(a){n=void 0!==n?n:a.saveRedoStack,i=void 0!==i?i:a.saveUndoStack;var r=this.getWhiteboardFiledata(e),s=r.fileid,l=r.currpage;n&&(a.stackStorage["redoStack_"+s+"_"+l]=a.lc.redoStack.slice(0))}else L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._showWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._hideWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e,t){var o=(1<arguments.length&&void 0!==t?t:{}).isResize,n=void 0!==o&&o,i=this._getWhiteboardInstanceById(e);if(i)return i.lc&&i.lc.canvas?(0===i.lc.canvas.width||0===i.lc.canvas.height)&&(n&&this._resizeWhiteboardHandler(i),!0):void 0;L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"png",n=this._getWhiteboardInstanceById(e);if(n){var i=this._convertCanvasToImageBase64(n,o);!function(e,t){var o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=e,o.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(n)}(i=i.replace("image/"+o.toLocaleLowerCase().replace(/jpg/i,"jpeg").match(/png|jpeg|bmp|gif/)[0],"image/octet-stream"),(n.nickname?n.nickname+"_":"")+n.id+"_"+(new Date).getTime()+"."+o)}else L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardToolsInfo",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.whiteboardToolsInfo);L.Logger.error("[getWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"_clearRedoAndUndoStack",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.clear,i=void 0===n||n,a=o.redo,r=void 0===a||a,s=o.undo,l=void 0===s||s,d=this;i&&d._clearLc(e,{triggerEvent:!1}),r&&d._clearLcRedoStack(e),l&&d._clearLcUndoStack(e),d._actionIsDisable(e),setTimeout(function(){d._resizeWhiteboardHandler(e)},0)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":f(t))&&(void 0!==t.currpage&&(t.currpage=Number(t.currpage)),void 0!==t.pagenum&&(t.pagenum=Number(t.pagenum)),void 0!==t.pptslide&&(t.pptslide=Number(t.pptslide)),void 0!==t.pptstep&&(t.pptstep=Number(t.pptstep)),void 0!==t.steptotal&&(t.steptotal=Number(t.steptotal)),Object.deepAssign(e.filedata,t),e.filedata.baseurl=t.baseurl,e&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler.noticeUpdateWhiteboardFiledataCallback(e.filedata))}},{key:"_batchReceiveSnapshot",value:function(n,i){var a=this;Array.isArray(n)?(n.forEach(function(e,t){var o=!0;t===n.length-1&&(o=!1),a._handlerRemoteDataToWhiteboard(e,o,i)}),a._actionIsDisable(i)):L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){this._handlerRemoteDataToWhiteboard(e,!1,t),this._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e,t,o){var n=1<arguments.length&&void 0!==t&&t,i=o;if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(i.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(i,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&i.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":if(i&&i.lc&&i.lc.undoStack&&0<i.lc.undoStack.length)for(var a=!1,r=i.lc.undoStack.length-1;0<=r;r--){var s=i.lc.undoStack[r];switch(s.actionName){case"AddShapeAction":s.shapeId===e.data.shapeId&&(s.undo&&s.undo(),i.lc.undoStack.splice(r,1),a=!0)}if(a)break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data)),i.lc.saveShape(e.data.data,!1,null,n,e.fromID,e.seq);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(i.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(i,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&i.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var l=!0,d=i.lc.undoStack.length-1;0<=d;d--)if(e.data.shapeId===i.lc.undoStack[d].shapeId){l=!1;break}if(l){for(var c=!1,u=i.lc.redoStack.length-1;0<=u;u--)if(e.data.shapeId===i.lc.redoStack[u].shapeId){c=!0;break}if(c)i.lc.redo(!1,e.data.shapeId);else{e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data));var h=e.data.otherInfo,m=void 0===h?{authorUserId:e.fromID,seq:e.seq}:h;i.lc.saveShape(e.data.data,!1,null,n,m.authorUserId,m.seq)}}}else if(e.data.actionName&&"ClearAction"===e.data.actionName){for(var f=!0,p=i.lc.undoStack.length-1;0<=p;p--)if(e.data.clearActionId===i.lc.undoStack[p].id){f=!1;break}if(f){for(var g=!1,v=i.lc.redoStack.length-1;0<=v;v--)if(e.data.clearActionId===i.lc.redoStack[v].id){g=!0;break}if(g)i.lc.redo(!1,e.data.clearActionId),this._removeAllRemindContent(i);else{var y=e.data.otherInfo,b=void 0===y?{authorUserId:e.fromID,toAuthorUserId:void 0,seq:e.seq}:y;i.lc.clear(!1,e.data.clearActionId,b.authorUserId,b.toAuthorUserId,b.seq),this._removeAllRemindContent(i)}}}break;case"clearEvent":i.lc.clear(!1,e.data.clearActionId,e.fromID,e.data.toAuthorUserId,e.seq),this._removeAllRemindContent(i);break;case"laserMarkEvent":var _=i.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":_.style.display="block";break;case"hide":_.style.display="none";break;case"move":if(e.data&&e.data.laser){var w=e.data.laser.left,k=e.data.laser.top;_.style.left=w+"%",_.style.top=k+"%"}}}}},{key:"_productionToolDesc",value:function(e){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)}},{key:"_updateToolDesc",value:function(e,t,o){if(e.registerWhiteboardToolsList[t]){var n=!0,i=!1,a=void 0;try{for(var r,s=Object.entries(o)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value,d=y(l,2),c=d[0],u=d[1];void 0!==e.registerWhiteboardToolsList[t][c]&&(e.registerWhiteboardToolsList[t][c]=u)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}var h=!0,m=!1,f=void 0;try{for(var p,g=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value;/tool_/g.test(v)?e.registerWhiteboardToolsList[v].isUse=v===e.activeTool:/zoom_/g.test(v)&&(e.registerWhiteboardToolsList[v].zoom=e.whiteboardMagnification)}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}}},{key:"_batchUpdateToolDesc",value:function(e,t){if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Array.isArray(s)&&this._updateToolDesc(e,s[0],s[1])}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}else L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!")}},{key:"_setWhiteboardTools",value:function(o,e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){var t=n._productionToolByCore(o,e);e.lc.setTool(t)})}},{key:"_productionToolByCore",value:function(e,t){var o=void 0;if(void 0===this.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":case"tool_highlighter":o=new window.LC.tools.Pencil(t.lc);break;case"tool_line":o=new window.LC.tools.Line(t.lc);break;case"tool_arrow":(o=new window.LC.tools.Line(t.lc)).hasEndArrow=!0;break;case"tool_dashed":(o=new window.LC.tools.Line(t.lc)).isDashed=!0;break;case"tool_eraser":o=new window.LC.tools.Eraser(t.lc);break;case"tool_text":o=new window.LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":o=new window.LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":o=new window.LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new window.LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new window.LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new window.LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this.uniqueWhiteboard||null==e?this.whiteboardInstanceDefaultID:this.whiteboardInstanceIDPrefix+e;return e&&"string"==typeof e&&new RegExp(this.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(t=e),t}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this._getWhiteboardInstanceID(e);return this.whiteboardInstanceStore[t]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScale",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.watermarkImage,i=o.isChangeCanvas,a=void 0===i||i,r=o.isChangeWatermarkScale,s=void 0===r||r,l=o.watermarkImageScale;l=void 0!==l?l:e.watermarkImageScale;var d=e.lc;if(d){var c=e.whiteboardElement,u=e.whiteboardInstanceElement,h=e.containerWidthAndHeight.width,m=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId){var f=document.getElementById(e.parcelAncestorElementId);f&&(h=f.clientWidth,m=f.clientHeight)}var p={},g={},v=0,y=0,b=0,_=0;if(m*l<h?(v=Math.round(m*l*e.whiteboardMagnification),y=Math.round(m*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&n&&n.width<h&&n.height<m&&(v=n.width,y=n.height),c.style.width=v+"px",c.style.height=y+"px",u.style.width=v+"px",u.style.height=y+"px",void 0!==e.minHeight&&null!==e.minHeight&&(b=e.minHeight*l,_=e.minHeight,c.style.minWidth=b+"px",c.style.minHeight=_+"px",u.style.minWidth=b+"px",u.style.minHeight=_+"px",g.minWidth=b+"px",g.minHegiht=_+"px"),g.top="0%",g.left="50%",g.marginTop="0px",g.marginLeft=-v/2+"px"):(v=Math.round(h*e.whiteboardMagnification),y=Math.round(h/l*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&n&&n.width<h&&n.height<m&&(v=n.width,y=n.height),c.style.width=v+"px",c.style.height=y+"px",u.style.width=v+"px",u.style.height=y+"px",void 0!==e.minHeight&&null!==e.minHeight&&(b=e.minHeight*l,_=e.minHeight,c.style.minWidth=b+"px",c.style.minHeight=_+"px",u.style.minWidth=b+"px",u.style.minHeight=_+"px",g.minWidth=b+"px",g.minHegiht=_+"px"),g.top="50%",g.left="0%",g.marginTop=-y/2+"px",g.marginLeft="0px"),g.width=v+"px",g.height=y+"px",a){d.respondToSizeChange();var w=u.clientWidth,k=u.clientHeight,S=(w+k)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*l);if(d.setZoom(S),d.setPan(0,0),s&&n){var P=(w/n.width+k/n.height)/2;"relativeOriginalSize"===e.insertPictureRule&&n&&n.width<h&&n.height<m&&(P=1),d.watermarkScale=P,d.setWatermarkImage(n)}}p.style=g,p.addClassName=1<e.whiteboardMagnification?"custom-scroll-bar":"",p.loadScrollBar=1<e.whiteboardMagnification,e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback?e.handler.resizeWhiteboardSizeCallback(p):p=null}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){var t=this;e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e),setTimeout(function(){t._resizeWhiteboardHandler(e)},0)):L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){if(e&&e.lc){var t=e.lc.watermarkImage;if(t&&t.src){var o=t.width/t.height;this._resizeWhiteboardByScale(e,{watermarkImage:t,watermarkImageScale:o})}else this._resizeWhiteboardByScale(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScale",value:function(e,t){e.watermarkImageScale=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,o,n,i){var a=this;if(e&&n)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var r=e.lc.drawingCoordsToClientCoords(t,o);if(r){var s=document.createElement("span");s.className="remind-content",s.style.position="absolute",s.style.left=r.x+"px",s.style.top=r.y+"px",s.innerHTML=n;var l=i?"whiteboard_remind_"+i:"whiteboard_remind_"+(new Date).getTime();s.setAttribute("data-position-x",t),s.setAttribute("data-position-y",o),s.setAttribute("id",l),e.lc.containerEl.parentNode.appendChild(s),setTimeout(function(){a._removeRemindContentByElementId(e,l),s=null},e.remindContentTime)}}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o],i=Number(n.getAttribute("data-position-x")),a=Number(n.getAttribute("data-position-y")),r=e.lc.drawingCoordsToClientCoords(i,a);n.style.left=r.x+"px",n.style.top=r.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var o=document.getElementById(t);o&&(o.innerHTML="",e.lc.containerEl.parentNode.removeChild(o),o=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=t.length-1;0<=o;o--){var n=t[o];n.innerHTML="",e.lc.containerEl.parentNode.removeChild(n),n=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var o=this._convertCanvasToImageBase64(e,"jpg");t.src=o,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),this.basicTemplateWhiteboardSignallingList[e.id]&&(this.basicTemplateWhiteboardSignallingList[e.id]=null,delete this.basicTemplateWhiteboardSignallingList[e.id]),this._clearWhiteboardAllDataByInstance(e);var t=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var n=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;n&&(n.innerHTML="");var i=!0,a=!1,r=void 0;try{for(var s,l=Object.keys(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value;e[d]=null,delete e[d]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}this.whiteboardInstanceStore[t]=null,delete this.whiteboardInstanceStore[t]}},{key:"_clearLc",value:function(e,t){(1<arguments.length&&void 0!==t?t:{}).triggerEvent,e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(n,e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.lc;if(t.isTmpDrawAble!==n){t.isTmpDrawAble=n;var o=t.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];t.isTmpDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_changeWhiteboardDeawPermission",value:function(n,e){this._automaticTraverseWhiteboardInstance(e,function(e){e.deawPermission=n;var t=e.lc;if(t.isDrawAble!==n){t.isDrawAble=n;var o=t.containerEl.parentNode.getElementsByClassName("draw-permission")[0];t.isDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_handlerActiveToolLaser",value:function(e,t){var m=this;m._automaticTraverseWhiteboardInstance(t,function(c){var t=c.lc.containerEl.parentNode,u=t.getElementsByClassName("temporary-draw-permission")[0],h=t.getElementsByClassName("laser-mark")[0];"tool_laser"===e?(p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),c._laserEventHandler_mousemove=function(e){if("tool_laser"!==c.activeTool)return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(u,"mousemove",c._laserEventHandler_mousemove),!1;var t=e.pageX,o=e.pageY,n=u.getBoundingClientRect(),i=void 0,a=void 0,r=u.clientWidth,s=u.clientHeight;switch(c.rotateDeg){case 0:i=t-n.left,a=o-n.top;break;case 90:i=o-n.top,a=s-(t-n.left);break;case 180:i=r-(t-n.left),a=s-(o-n.top);break;case 270:i=r-(o-n.top),a=t-n.left;break;default:i=t-n.left,a=o-n.top}var l=i/r*100,d=a/s*100;return h.style.left=l+"%",h.style.top=d+"%",clearTimeout(c.laserTimer),c.laserTimer=setTimeout(function(){if(c.laserPosition&&(.3<Math.abs(l-c.laserPosition.left)||.3<Math.abs(d-c.laserPosition.top))){var e={laser:{left:l,top:d},action:{actionName:"move"}};c.laserPosition=e.laser,m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",e)}},100),!1},c._laserEventHandler_mouseenter=function(e){return"tool_laser"!==c.activeTool?(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(t,"mouseenter",c._laserEventHandler_mouseenter),!1):(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"show"}}),!(h.style.display="block"))},c._laserEventHandler_mouseleave=function(e){return m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none","tool_laser"!==c.activeTool&&p(t,"mouseleave",c._laserEventHandler_mouseleave),!1},m._changeWhiteboardTemporaryDeawPermission(!1,c),c.selectLaserTool=!0,p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),u.className+=" cursor-none",c.laserPosition=c.laserPosition||{left:0,top:0},l(u,"mousemove",c._laserEventHandler_mousemove),l(t,"mouseenter",c._laserEventHandler_mouseenter),l(t,"mouseleave",c._laserEventHandler_mouseleave)):(m._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,c),p(u,"mousemove",c._laserEventHandler_mousemove),p(t,"mouseenter",c._laserEventHandler_mouseenter),p(t,"mouseleave",c._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),h.style.display="none",c.selectLaserTool&&(m._sendWhiteboardMessageToSignallingServer(c,"laserMarkEvent",{action:{actionName:"hide"}}),c.selectLaserTool=!1))})}},{key:"_sendSignallingToServer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.idPrefix,i=o.data,a=o.name,r=o.assignId,s=o.do_not_save,l=o.expiresabs,d=o.associatedMsgID,c=o.associatedUserID;if(e){if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var u=e.filedata,h=u.currpage,m=u.fileid;if(void 0===h||void 0===m)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+h+","+m+"]!");i&&"string"==typeof i&&(i=JSON.parse(i)),i.whiteboardID=e.id,i.isBaseboard=e.isBaseboard,i.nickname=e.nickname,void 0!==e.dependenceBaseboardWhiteboardID&&(i.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),d=d||e.associatedMsgID,c=c||e.associatedUserID;var f=r||n+"###_"+a+"_"+m+"_"+h,p="__allExceptSender";"shapeSaveEvent"!==i.eventType&&"undoEvent"!==i.eventType&&"redoEvent"!==i.eventType&&"clearEvent"!==i.eventType||(p="__all");var g=Object.deepAssign({},i);"__all"!==p&&this._saveBasicTemplateWhiteboardSignallingData({name:a,id:f,toID:p,data:g,do_not_save:s,expiresabs:l,associatedMsgID:d,associatedUserID:c},"pubmsg"),e.handler.sendSignallingToServer(a,f,p,i,s,l,d,c)}}else L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!")}},{key:"_delSignallingToServer",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{},n=o.idPrefix,i=o.data,a=o.name,r=o.assignId;if(e){if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var s=e.filedata,l=s.currpage,d=s.fileid;if(void 0===l||void 0===d)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+l+","+d+"]!");i.whiteboardID=e.id,i.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(i.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var c=r||n+"###_"+a+"_"+d+"_"+l,u="__allExceptSender";"shapeSaveEvent"!==i.eventType&&"undoEvent"!==i.eventType&&"redoEvent"!==i.eventType&&"clearEvent"!==i.eventType||(u="__all");var h=Object.deepAssign({},i);"__all"!==u&&this._saveBasicTemplateWhiteboardSignallingData({name:a,id:c,toID:u,data:h},"delmsg"),e.handler.delSignallingToServer(a,c,u,i)}}else L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!")}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,o){var n=void 0,i=void 0,a=void 0,r=void 0,s=void 0,l=void 0,d=void 0;switch(t){case"shapeSaveEvent":null==(l=window.LC.shapeToJSON(o.shape))||null==l.className||"LinePath"!=l.className&&"ErasedLinePath"!=l.className||(l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])})),d={eventType:t,actionName:o.action.actionName,shapeId:o.shapeId,data:l},n=o.shapeId,i=d,a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===o.action.actionName){var c=o.action.shapeId;n=c,i=d={eventType:t,actionName:o.action.actionName,shapeId:c},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r})}else if("ClearAction"===o.action.actionName){var u=o.action.id;n=u,i=d={eventType:t,actionName:o.action.actionName,clearActionId:u},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r})}break;case"redoEvent":if("AddShapeAction"===o.action.actionName){null==(l=window.LC.shapeToJSON(o.action.shape))||null==l.className||"LinePath"!=l.className&&"ErasedLinePath"!=l.className||(l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])}));var h=o.action.shapeId,m={authorUserId:o.action.authorUserId,seq:o.action.seq},f=h,p=d={eventType:t,actionName:o.action.actionName,shapeId:h,data:l,otherInfo:m};this._sendSignallingToServer(e,{idPrefix:f,data:p,name:"SharpsChange",assignId:void 0,do_not_save:void 0})}else if("ClearAction"===o.action.actionName){var g=o.action.id,v={authorUserId:o.action.authorUserId,seq:o.action.seq,toAuthorUserId:o.action.toAuthorUserId};n=g,i=d={eventType:t,actionName:o.action.actionName,clearActionId:g,otherInfo:v},a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s})}break;case"clearEvent":var y=o.clearActionId;n=y,i=d={eventType:t,actionName:o.action.actionName,clearActionId:y},a="SharpsChange",s=r=void 0,e&&e.isOnlyUndoRedoClearMyselfShape&&e.myselfId&&(d.toAuthorUserId=e.myselfId),this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s});break;case"laserMarkEvent":d={eventType:t,actionName:o.action.actionName},o&&o.laser&&(d.laser=o.laser),n="laserMarkEvent",i=d,a="SharpsChange",s=!(r=void 0),this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.fontSize,o=e.whiteboardToolsInfo.fontFamily,n=e.whiteboardToolsInfo.fontStyle,i=e.whiteboardToolsInfo.fontWeight,a=e.lc.tool;"Text"===a.name&&(a.font=n+" "+i+" "+t+"px "+o)})}},{key:"_updateEraserWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updatePencilWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateShapeWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateColor",value:function(e,l){l&&"object"===(void 0===l?"undefined":f(l))&&this._automaticTraverseWhiteboardInstance(e,function(e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.keys(l)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value.replace(/Color/g,"");if(e.lc.setColor(r,e.whiteboardToolsInfo[r+"Color"]),"primary"!==r&&"secondary"!==r||"tool_rectangle"!==e.activeTool&&"tool_rectangle_empty"!==e.activeTool&&"tool_ellipse"!==e.activeTool&&"tool_ellipse_empty"!==e.activeTool&&"tool_polygon"!==e.activeTool||("tool_ellipse_empty"===e.activeTool||"tool_rectangle_empty"===e.activeTool?e.lc.setColor("secondary","transparent"):e.lc.setColor("secondary",e.whiteboardToolsInfo.primaryColor)),"primary"===r&&"tool_highlighter"===e.activeTool){var s=e.whiteboardToolsInfo[r+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(r,s)}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}})}},{key:"_actionIsDisable",value:function(e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){if(e.active){if(0===e.lc.shapes.length)n._batchUpdateToolDesc(e,[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]]),n._noticeUpdateToolDesc(e);else{var t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];if(e.isOnlyUndoRedoClearMyselfShape&&e.myselfId){t=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];for(var o=0;o<e.lc.shapes.length;o++)if(e.lc.shapes[o].authorUserId==e.myselfId){t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];break}}n._batchUpdateToolDesc(e,t),n._noticeUpdateToolDesc(e)}e.lc.canRedo()?n._updateToolDesc(e,"action_redo",{disabled:!1}):n._updateToolDesc(e,"action_redo",{disabled:!0}),n._noticeUpdateToolDesc(e),e.lc.canUndo()?n._updateToolDesc(e,"action_undo",{disabled:!1}):n._updateToolDesc(e,"action_undo",{disabled:!0}),n._noticeUpdateToolDesc(e)}})}},{key:"_zoomIsDisable",value:function(e){var t=this;t._automaticTraverseWhiteboardInstance(e,function(e){e.active&&(e.whiteboardMagnification<=t.minMagnification?t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]]):t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]]),t._noticeUpdateToolDesc(e),e.whiteboardMagnification>=t.maxMagnification?t._updateToolDesc(e,"zoom_big",{disabled:!0}):t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))})}},{key:"_toolIsUse",value:function(e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;/tool_/g.test(r)?e.registerWhiteboardToolsList[r].isUse=r===e.activeTool:/zoom_/g.test(r)&&(e.registerWhiteboardToolsList[r].zoom=e.whiteboardMagnification)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}this._noticeUpdateToolDesc(e)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){if(e)t&&"function"==typeof t&&t(e);else{var o=!0,n=!1,i=void 0;try{for(var a,r=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;t&&"function"==typeof t&&t(s)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,o=0;o<this.awaitSaveToWhiteboardInstanceSignallingArray.length;o++){var n=this.awaitSaveToWhiteboardInstanceSignallingArray[o];if(n.data&&"string"==typeof n.data&&(n.data=JSON.parse(n.data)),n.data.whiteboardID===e.id){var i=n.id.substring(n.id.lastIndexOf("###_")+4);if(i){var a=i.split("_");i=a[0]+"_"+a[1]+"_"+a[2],e.waitingProcessShapeData[i]||(e.waitingProcessShapeData[i]=[]),e.waitingProcessShapeData[i].push(n),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(o,1,null)}}}if(t)for(var r=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;0<=r;r--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[r]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(r,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:"png";if(e&&e.lc&&e.lc.canvas){var n=e.lc.canvas,i=new Image;return i.src=n.toDataURL("image/"+o),i}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var o=void 0,n=void 0,i=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var a=t.data.data.points.length;0<a&&(o=t.data.data.points[a-1].x,n=t.data.data.points[a-1].y,i=t.remindContent),this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(0<t.data.data.width&&0<t.data.data.height?(o=t.data.data.x+t.data.data.width,n=t.data.data.y):0<t.data.data.width&&t.data.data.height<0?(o=t.data.data.x+t.data.data.width,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(o=t.data.data.x,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&0<t.data.data.height&&(o=t.data.data.x,n=t.data.data.y),i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)):"Text"==t.data.data.className?(o=t.data.data.x+t.data.data.renderer.metrics.width,n=t.data.data.y+20*t.data.data.renderer.metricses.length,i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)):"Line"==t.data.data.className&&(o=t.data.data.x2,n=t.data.data.y2,i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId))}},{key:"_noticeNpdateWhiteboardToolsInfo",value:function(e){e.handler&&"function"==typeof e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardToolsInfo",{id:e.id,whiteboardToolsInfo:Object.deepAssign({},e.whiteboardToolsInfo)})}}]),d);o.default=u},{pdfobject:332}],337:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n={commonWhiteboard:{webAddress:"",docAddress:"",backupDocAddressList:[],myUserId:void 0,myRole:void 0,myName:void 0,isConnectedRoom:!1,isPlayback:!1,deviceType:void 0,clientType:void 0},defaultWhiteboard:{sendH5DocumentRoomInfo:{},isBackEvent:!1,hasExtendDocument:!1,showpageNotice:!1,loadDynamicPptView:!0,loadH5DocumentView:!0,isMobile:!1,mediaShareToID:void 0,associatedMsgID:void 0,associatedUserID:void 0,clientMediaShare:!1,mediaSharePauseWhenOver:!1,isLoadAudioPlayer:!0,isLoadVideoPlayer:!0,isLoadDocumentRemark:!0,canRemark:!1,secondaryColor:"#ffffff",initWhiteboardProductionOptions:{},isH5MediaOutput:!1,isH5MediaOutputDominant:!1,documentToolBarConfig:{parentNode:void 0,isDrag:!0,isLoadFullScreen:!0,isLoadRemark:!1,isLoadVolume:!1,initDragPosition:{left:50,top:98},fullScreenElementId:void 0},documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:98}},whiteboardToolBarConfig:{parentNode:void 0,isDrag:!0,pencilWidthScale:1,eraserWidthScale:2,initDragPosition:{left:2,top:2},loadWhiteboardTools:{mouse:!0,laser:!0,pen:!0,text:!0,shape:!0,eraser:!0,clear:!0,undo:!0,redo:!0,setting:!0}},isShowReloadFileTip:!0,pptVolumeSynchronization:!1,insertPictureRule:"default",languageType:"ch",rootBackgroundColor:"transparent",primaryColor:"#000000",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",showShapeAuthor:!1,synchronization:!0,isOnlyUndoRedoClearMyselfShape:!1,canDraw:!0,canPage:!0,addPage:!0,actionClick:!0,defaultWhiteboardScale:16/9,isUseKeyboardPage:!0,isLoadDocumentToolBar:!0,isLoadWhiteboardToolBar:!0,isDisconnectedClearWhiteboardData:!1,isNativePlayAudio:!1,isNativePlayVideo:!1,audioPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}},videoPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}}}};o.default=n},{}],338:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),window.WhiteboardGlobalShare=window.WhiteboardGlobalShare||{};var n={WHITEBOARD_SDK_VERSION:"v2.1.0",WHITEBOARD_SDK_TIME:"2018102313",dynamicPptVersions:2017091401,remoteDynamicPptUpdateTime:2018042223,dynamicPptDebugLog:!1};console.info("[whiteboard-sdk]whiteboard sdk version is "+n.WHITEBOARD_SDK_VERSION+" , update time is "+n.WHITEBOARD_SDK_TIME),o.default=n},{}],339:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var P=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=(function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}(a,[{key:"createElement",value:function(e,t,o,n,i){var a=document.createElement(e);if(void 0!==t&&a.setAttribute("id",t),void 0!==o&&(a.className=o),n&&"object"===(void 0===n?"undefined":I(n))){var r=!0,s=!1,l=void 0;try{for(var d,c=Object.entries(n)[Symbol.iterator]();!(r=(d=c.next()).done);r=!0){var u=d.value,h=P(u,2),m=h[0],f=h[1];a.style[m]=f}}catch(e){s=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(s)throw l}}}if(i&&"object"===(void 0===i?"undefined":I(i))){var p=!0,g=!1,v=void 0;try{for(var y,b=Object.entries(i)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var _=y.value,w=P(_,2),k=w[0],S=w[1];a.setAttribute(k,S)}}catch(e){g=!0,v=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw v}}}return a}},{key:"appendChild",value:function(e,t){try{e&&t&&e.appendChild&&e.appendChild(t)}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.appendChild error ",e)}}},{key:"removeChild",value:function(e,t){try{e&&(t&&t.removeChild?t.removeChild(e):e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e))}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.removeChild error ",e)}}},{key:"removeAllChild",value:function(e){e&&(e.innerHTML="")}},{key:"hasClass",value:function(e,t){return!(!e||"string"!=typeof t)&&(new RegExp(" "+t+" ").test(e.className)||new RegExp(" "+t).test(e.className)||new RegExp(t+" ").test(e.className))}},{key:"resetClass",value:function(e,t){e&&"string"==typeof t&&(e.className=" "+t)}},{key:"addClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),"")+" "+t:e.className=" "+t;else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),"")+" "+s:e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"removeClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),""):e.className=" ";else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),""):e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"updateStyle",value:function(e,t){if(e&&t&&"object"===(void 0===t?"undefined":I(t))){var o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(t)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=P(s,2),d=l[0],c=l[1];e.style[d]=c}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"show",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this.updateStyle(r,{display:""})}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:""})}},{key:"hide",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this.updateStyle(r,{display:"none"})}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:"none"})}},{key:"getNodePosition",value:function(e){if(!e||"body"===e.tagName.toLowerCase())return[0,0];var t=e,o=this.getOffset(t),n=P(o,2),i=n[0],a=void 0===i?0:i,r=n[1],s=void 0===r?0:r;return a||s?(t=null,[a,s]):this.getNodePosition(t.offsetParent)}},{key:"getOffset",value:function(e){var t=e.getBoundingClientRect();return[t.top+window.pageYOffset-document.documentElement.clientTop,t.left+window.pageXOffset-document.documentElement.clientLeft]}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}o.default=new i},{}],340:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./Utils"),a=(n=i)&&n.__esModule?n:{default:n};var r={newpptVersions:2017091401,remoteNewpptUpdateTime:2018032113,isSkipPageing:!1,isPlayVideoing:!1};r.allDocumentRemarkInfoMap=new Map,r.docAddress="",r.laterAddressList=[],r.backupDocAddressList=[],r.docAddressList=[],r.hasGetDocAddressIndexByLocalStorage=!1,r.docAddressKey="",r.localStorageDocAddressKey="",r.nowUseDocAddress=a.default.getItem(r.docAddressList,r.docAddressKey)||r.docAddress,r.showPageFromId=void 0,r.preloadFile=null,r.extendShowPageFromId=void 0,r.protocol="",r.port="",r.isNativePlayAudio=!1,r.isNativePlayVideo=!1,window.WBGlobal=r,o.default=r},{"./Utils":344}],341:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=new Map;n.set("ch",{documentToolbar:{prevPage:"上一页",nextPage:"下一页",prevStep:"上一页",nextStep:"下一页",addPage:"加页",enlargeWhiteboard:"放大",narrowWhiteboard:"缩小",pptVolume:"音量",onRemark:"打开备注",offRemark:"关闭备注",onGeneralDocumentFullScreen:"绘制区域全屏",offGeneralDocumentFullScreen:"绘制区域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5课件全屏",offH5DocumentFullScreen:"H5课件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字样式",options:{Msyh:"微软雅黑",Ming:"宋体",Arial:"Arial"}},fontSizeText:"号",pencilWidthTitle:"线条宽度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠标",tool_laser:"激光笔",penList:"笔",tool_pencil:"铅笔",tool_highlighter:"荧光笔",tool_line:"线条",tool_arrow:"箭头",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心椭圆",tool_ellipse:"椭圆",tool_eraser:"橡皮檫",action_undo:"撤销",action_redo:"恢复",action_clear:"清屏",settingList:"更多设置"}},documentRemark:{name:"备注",closeTitle:"关闭备注"}}),n.set("tw",{documentToolbar:{prevPage:"上壹頁",nextPage:"下壹頁",prevStep:"上壹頁",nextStep:"下壹頁",addPage:"加頁",enlargeWhiteboard:"放大",narrowWhiteboard:"縮小",pptVolume:"音量",onRemark:"打開備註",offRemark:"關閉備註",onGeneralDocumentFullScreen:"繪制區域全屏",offGeneralDocumentFullScreen:"繪制區域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5課件全屏",offH5DocumentFullScreen:"H5課件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字樣式",options:{Msyh:"微軟雅黑",Ming:"宋體",Arial:"Arial"}},fontSizeText:"號",pencilWidthTitle:"線條寬度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠標",tool_laser:"激光筆",penList:"筆",tool_pencil:"鉛筆",tool_highlighter:"熒光筆",tool_line:"線條",tool_arrow:"箭頭",tool_text:"文字",shapeList:"形狀",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心橢圓",tool_ellipse:"橢圓",tool_eraser:"橡皮檫",action_undo:"撤銷",action_redo:"恢復",action_clear:"清屏",settingList:"更多設置"}},documentRemark:{name:"備註",closeTitle:"關閉備註"}}),n.set("en",{documentToolbar:{prevPage:"Previous Page",nextPage:"Next Page",prevStep:"Previous Page",nextStep:"Next Page",addPage:"Add Page",enlargeWhiteboard:"Zoom In",narrowWhiteboard:"Zoom Out",pptVolume:"Volume",onRemark:"Open Courseware Remarks",offRemark:"Close Courseware Remarks",onGeneralDocumentFullScreen:"Full Screen of Drawing Area",offGeneralDocumentFullScreen:"Cancel Full Screen of Drawing Area",onDynamicPPTFullScreen:"Full Screen  of PPT",offDynamicPPTFullScreen:"Cancel Full Screen  of PPT",onH5DocumentFullScreen:"Full Screen  of Courseware",offH5DocumentFullScreen:"Cancel Full Screen  of Courseware"},whiteboardToolbar:{fontFamily:{title:"Font Format",options:{Msyh:"Microsoft YaHei",Ming:"SimSun",Arial:"Arial"}},fontSizeText:"Font",pencilWidthTitle:"Line Width",eraserWidthTitle:"Eraser Size",toolTextList:{tool_mouse:"Mouse",tool_laser:"Laser Pen",penList:"Pen",tool_pencil:"Pencil",tool_highlighter:"Highlighter",tool_line:"Line",tool_arrow:"Arrow",tool_text:"Text Input",shapeList:"Shape",tool_rectangle_empty:"Square",tool_rectangle:"Solid Square",tool_ellipse_empty:"Circle",tool_ellipse:"Solid Circle",tool_eraser:"Eraser",action_undo:"Undo",action_redo:"Recover",action_clear:"Clear Screen",settingList:"More"}},documentRemark:{name:"Courseware Remarks",closeTitle:"Close Courseware Remarks"}}),n.set("ja",{documentToolbar:{prevPage:"前のページ",nextPage:"次のページ",prevStep:"前のページ",nextStep:"次のページ",addPage:"ページを追加する",enlargeWhiteboard:"拡大",narrowWhiteboard:"縮小",pptVolume:"ボリューム",onRemark:"備考を開く",offRemark:"備考を閉じる",onGeneralDocumentFullScreen:"描画領域全画面",offGeneralDocumentFullScreen:"手書き部分全画面表示の終了",onDynamicPPTFullScreen:"PPT全画面",offDynamicPPTFullScreen:"PPT全画面表示の終了",onH5DocumentFullScreen:"h5教材全画面",offH5DocumentFullScreen:"H5教材全画面の終了"},whiteboardToolbar:{fontFamily:{title:"フォント様式",options:{Msyh:"Microsoft　Yahei",Ming:"宋体",Arial:"Arial"}},fontSizeText:"番号",pencilWidthTitle:"線の太さ",eraserWidthTitle:"消しゴムの大きさ",toolTextList:{tool_mouse:"マウス",tool_laser:"レーザーペン",penList:"鉛筆",tool_pencil:"鉛筆",tool_highlighter:"蛍光ペン",tool_line:"線",tool_arrow:"矢印",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"長方形（塗りつぶしなし）",tool_rectangle:"長方形",tool_ellipse_empty:"楕円（塗りつぶしなし）",tool_ellipse:"楕円",tool_eraser:"消しゴム",action_undo:"キャンセル",action_redo:"元に戻す",action_clear:"クリア",settingList:"詳細設定"}},documentRemark:{name:"備考",closeTitle:"关闭备注"}}),o.default=n},{}],342:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("./Utils"),r=(n=a)&&n.__esModule?n:{default:n};var s=window.Log||{error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},warning:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.debug.apply(console,e)}};window.Log=s,o.default=s},{"./Utils":344}],343:[function(e,t,o){var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=void 0,i=function(){function i(e){return e||null}function a(e,t,o,n){var i=["then","catch","always"].reduce(function(t,o){return t[o]=function(e){return t[o]=e,t},t},{}),a=new XMLHttpRequest,r=function(e,t,o){if("get"!==o.toLowerCase()||!t)return e;var n=l(t),i=-1<e.indexOf("?")?"&":"?";return e+i+n}(t,o,e);return a.open(e,r,!0),a.withCredentials=n.hasOwnProperty("withCredentials"),function(t,o){!function(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}(o=o||{})&&(o["Content-Type"]="application/x-www-form-urlencoded");Object.keys(o).forEach(function(e){o[e]&&t.setRequestHeader(e,o[e])})}(a,n.headers),a.addEventListener("readystatechange",function(t,o){return function e(){o.readyState===o.DONE&&(o.removeEventListener("readystatechange",e,!1),t.always.apply(t,s(o)),200<=o.status&&o.status<300?t.then.apply(t,s(o)):t.catch.apply(t,s(o)))}}(i,a),!1),a.send(l(o)),i.abort=function(){return a.abort()},i}function s(t){var o;try{o=JSON.parse(t.responseText)}catch(e){o=t.responseText}return[o,t]}function l(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)?function(o){return Object.keys(o).reduce(function(e,t){return(e?e+"&":"")+n(t)+"="+n(o[t])},"")}(e):e}function n(e){return encodeURIComponent(e)}return function(n){return(n=n||{}).baseUrl=n.baseUrl||"",n.method&&n.url?a(n.method,n.baseUrl+n.url,i(n.data),n):["get","post","put","delete"].reduce(function(e,o){return e[o]=function(e,t){return a(o,n.baseUrl+e,i(t),n)},e},{})}},"function"==typeof define&&define.amd?define("ajax",i):"object"===(void 0===o?"undefined":a(o))?o=t.exports=i():n.ajax=i()},{}],344:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}if(!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var r=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){for(var o=t,n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var a in i)o[a]=i[a]}return t}};Object&&Object.shallowAssign||(Object.shallowAssign=r),Object&&Object.customAssign||(Object.customAssign=r)}Object&&Object.deepAssign||(Object.deepAssign=function(e){for(var t=e,o=1;o<arguments.length;o++){var n=arguments[o];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var i in n)void 0===t[i]?"object"===f(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]:"object"===f(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===f(t[i])?t[i]:Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]}return e});var p=!1;try{var s=Object.defineProperty({},"passive",{get:function(){p={passive:!0}}});window.addEventListener("test",null,s)}catch(e){console.error("[whiteboarrd-sdk]passiveEvents err:",e)}var l=(n(d,[{key:"addEvent",value:function(t,o,e,n){var i=3<arguments.length&&void 0!==n&&n;try{t.addEventListener?t.addEventListener(o,e,i):t.attachEvent?t.attachEvent("on"+o,e):t["on"+o]=e}catch(e){L.Logger.error("add dom event fail , event type is "+o+" , element:",t)}}},{key:"removeEvent",value:function(t,o,e,n){try{t.addEventListener?t.removeEventListener(o,e,n):t.attachEvent?t.detachEvent("on"+o,e):t["on"+o]=null}catch(e){L.Logger.error("remove dom event fail , event type is "+o+" , element:",t)}}},{key:"isEmptyJson",value:function(e){return 0===Object.keys(e).length}},{key:"isFullScreenStatus",value:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1}},{key:"launchFullscreen",value:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()}},{key:"getFullscreenElement",value:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}},{key:"addFullscreenchange",value:function(e){this.addEvent(document,"fullscreenchange",e,!1),this.addEvent(document,"webkitfullscreenchange",e,!1),this.addEvent(document,"mozfullscreenchange",e,!1),this.addEvent(document,"MSFullscreenChange",e,!1),this.addEvent(document,"msfullscreenchange",e,!1),this.addEvent(document,"fullscreeneventchange",e,!1)}},{key:"removeFullscreenchange",value:function(e){this.removeEvent(document,"fullscreenchange",e,!1),this.removeEvent(document,"webkitfullscreenchange",e,!1),this.removeEvent(document,"mozfullscreenchange",e,!1),this.removeEvent(document,"MSFullscreenChange",e,!1),this.removeEvent(document,"msfullscreenchange",e,!1),this.removeEvent(document,"fullscreeneventchange",e,!1)}},{key:"shallowCompareJson",value:function(e,t){return e===t}},{key:"deepCompareJson",value:function(e,t){if("object"!==(void 0===e?"undefined":f(e))||Array.isArray(e)||"object"!==(void 0===e?"undefined":f(e))||Array.isArray(e))return L.Logger.warning("deepCompareJson arguments must is json!"),e===t;var o=Object.deepAssign({},t),n=!0,i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=m(d,2),u=c[0],h=c[1];if(!o.hasOwnProperty(u)){n=!1;break}if(h!==o[u]){n=!1,delete o[u];break}delete o[u]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}return n&&!Object.keys(o).length}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isJson",value:function(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}},{key:"setLocalStorageItem",value:function(e,t){try{window.localStorage?window.localStorage.setItem?window.localStorage.setItem(e,t):L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.setItem , key is "+e+" , value is "+t+"!"):this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!"))}catch(e){this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e))}}},{key:"getLocalStorageItem",value:function(e){try{return window.localStorage?window.localStorage.getItem?window.localStorage.getItem(e):(L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.getItem , key is "+e+" !"),""):(this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!")),"")}catch(e){return this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e)),""}}},{key:"toJsonStringify",value:function(e){if(!e)return e;try{if(!a(e))return e;var t=JSON.stringify(e);t&&(e=t)}catch(e){}return e}},{key:"toJsonParse",value:function(e){if(!e)return e;try{if("string"!=typeof e)return e;var t=JSON.parse(e);t&&(e=t)}catch(e){}return e}},{key:"getPcSDKVersion",value:function(){return TK&&TK.getSdkVersion&&TK.getSdkVersion()?Number(TK.getSdkVersion().replace(/./g,"").replace(/v/g,"")):0}},{key:"getItem",value:function(o,n,e){var t,i,a,r=void 0,s=void 0;if(Array.isArray(o))return r=o.find(function(e,t){return s=t+1===o.length?-1:t,e.hostname===n}),e?s&&!isNaN(s)&&o[s+1]?o[s+1].hostname:"":r&&r.protocol&&r.hostname&&r.port?(t=r.protocol,i=r.hostname,a=r.port,t+"://"+i+":"+a):""}},{key:"onElementResize",value:function(e,t){try{if(!(e instanceof HTMLElement))throw new TypeError("Parameter 1 is not instance of 'HTMLElement'.");if(/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr|script|style|textarea|title)$/i.test(e.tagName))throw new TypeError("Unsupported tag type. Change the tag or wrap it in a supported tag(e.g. div).");if("function"!=typeof t)throw new TypeError("Parameter 2 is not of type 'function'.");var o=e.offsetWidth||1,n=e.offsetHeight||1,i=1e4*o,a=1e4*n,r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;z-index=-10000;overflow:hidden;visibility:hidden;";var s=r.cloneNode(!1),l=document.createElement("div");l.style.cssText="transition:0s;animation:none;";var d=l.cloneNode(!1);l.style.width=i+"px",l.style.height=a+"px",d.style.width="250%",d.style.height="250%",r.appendChild(l),s.appendChild(d),e.appendChild(r),e.appendChild(s),r.offsetParent!==e&&(e.style.position="relative"),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i;var c=0,u=0,h=function(){c===o&&u===n||(o=c,n=u,t())},m=function(){c=e.offsetWidth||1,u=e.offsetHeight||1,c===o&&u===n||requestAnimationFrame(h),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i};r.addEventListener("scroll",m,p),s.addEventListener("scroll",m,p)}catch(e){L.Logger.error("[whiteboarrd-sdk]onElementResize err:",e)}}}]),d);function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d)}o.default=new l},{}],345:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=l(e("../components/TalkcloudReact")),f=l(e("../../utils/DomUtils")),s=l(e("../../utils/Utils"));function l(e){return e&&e.__esModule?e:{default:e}}var d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,a.default),n(c,[{key:"shouldComponentUpdateProps",value:function(e){if(e.streamInfo!==this.props.streamInfo&&e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(this.props.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),d=l[0],c=l[1];if("position"!==d&&c!==e.streamInfo.attributes[d]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateProps",value:function(e){var t=this;if(e.streamInfo!==this.props.streamInfo){var o=void 0===e.streamInfo&&this.props.streamInfo,n=!this.props.streamInfo,i=e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes&&e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position;if(o||n||i){var a=(new Date).getTime();!this.updateTime||500<a-this.updateTime?(this.updateTime=a,clearTimeout(this._updateProgressTimer),this._updateProgress()):(clearTimeout(this._updateProgressTimer),this._updateProgressTimer=setTimeout(function(){a=(new Date).getTime(),t.updateTime=a,t._updateProgress()},750))}}e.volume!==this.props.volume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.volume)),e.muteVolume!==this.props.muteVolume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.muteVolume?0:this.props.volume)),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?f.default.addClass(this.elements.mediaTotalControlElement,"tk-playback"):f.default.removeClass(this.elements.mediaTotalControlElement,"tk-playback")),(e.myUserId!==this.props.myUserId||e.streamInfo!==this.props.streamInfo&&!e.streamInfo&&this.props.streamInfo)&&this._updateControlByPermissions(),s.default.deepCompareJson(e.controlPermissions,this.props.controlPermissions)&&this._updateControlByPermissions()}},{key:"destroyView",value:function(){for(var e in f.default.removeChild(this.elements.mediaTotalControlElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"playOrPauseClick",value:function(){"function"==typeof this.props.onPlayOrPauseClick&&this.props.onPlayOrPauseClick()}},{key:"closeClick",value:function(){"function"==typeof this.props.onCloseClick&&this.props.onCloseClick()}},{key:"fullScreenClick",value:function(){"function"==typeof this.props.onFullScreenClick&&this.props.onFullScreenClick()}},{key:"volumeMuteClick",value:function(){"function"==typeof this.props.onVolumeMuteClick&&this.props.onVolumeMuteClick()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_createElements",value:function(){this.elements.mediaTotalControlElement=f.default.createElement("article",this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"TalkMediaPlayerTotalControl","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control "+(this.props.isVideoPlayer?"video-player-control-container ":"audio-player-control-container ")+(this.props.isPlayback?"tk-playback ":" "))}},{key:"_connectElements",value:function(){var t=this;f.default.appendChild(this.parentNode,this.elements.mediaTotalControlElement);var e=(this.props.streamInfo||{}).attributes,o=void 0===e?{}:e,n=o.filename,i=void 0===n?"":n,a=o.position,r=void 0===a?0:a,s=o.duration,l=void 0===s?0:s,d=o.pause;this.elements.mediaTotalControlElement&&(this.elements.mediaTotalControlElement.innerHTML=' \n                <article class="media-player-box clear-float " >\n                    <span class="media-player-icon add-fl '+(d?"play":"pause")+'" ></span>\n                    <div class="media-player-control-container add-fl clear-float"> \n                        <button  class="play-pause-btn add-cursor-pointer add-fl '+(d?"play":"pause")+'"  ></button>\n                        <div class="media-player-info-container add-fl"> \n                            <div class="media-player-name-time-container clear-float"> \n                                <span class="media-player-name add-fl add-nowrap" >'+i+'</span>\n                                <span class="media-player-time-container add-fr" > \n                                    <em class="curr-time" >'+this._formatTime(r/1e3)+'</em> / <em class="total-time" >'+this._formatTime(l/1e3)+'</em>\n                                </span>\n                            </div>\n                            <div class="media-player-progress-container" id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerProgressBar" >                              \n                            </div>\n                        </div>\n                        <div class="volume-info-container add-fl clear-float" > \n                            <button  class="volume-icon add-cursor-pointer add-fl" ></button>\n                            <div class="volume-bar-container add-fl"  id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerVolumeBar" ></div>\n                        </div>\n                        <button  class="close-btn add-cursor-pointer add-fl" ></button>\n                        <button  class="full-screen-btn add-cursor-pointer add-fl" ></button>\n                    </div>\n                </article> \n            ',this.elements.playPauseBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("play-pause-btn")[0],this.elements.playPauseIconElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-icon")[0],this.elements.volumeMuteBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("volume-icon")[0],this.elements.closeBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("close-btn")[0],this.elements.fullScreenBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("full-screen-btn")[0],this.elements.filenameElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-name")[0],this.elements.currTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("curr-time")[0],this.elements.totalTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("total-time")[0],this.elements.mediaPlayerProgressElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-progress-container")[0],this.elements.playPauseBtnElement.onclick=this.playOrPauseClick.bind(this),this.elements.volumeMuteBtnElement.onclick=this.volumeMuteClick.bind(this),this.elements.closeBtnElement.onclick=this.closeClick.bind(this),this.elements.fullScreenBtnElement.onclick=this.fullScreenClick.bind(this),window.TalkSlider&&(this.progressSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerProgressBar",direction:"horizontal"},onBeforeChange:function(){t.mediaPlayerProgressSlidering=!0},onAfterChange:function(e){t.mediaPlayerProgressSlidering=!1,"function"==typeof t.props.onChangeProgress&&t.props.onChangeProgress(e),t._updateProgress(),t.tempStopUpdatePosition=!0,setTimeout(function(){t.tempStopUpdatePosition=!1},500)}}),this.volumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerVolumeBar",direction:"horizontal"},onAfterChange:function(e){"function"==typeof t.props.onChangeVolume&&t.props.onChangeVolume(e)}})),this._updateControlByPermissions())}},{key:"_updateControlByPermissions",value:function(){var e=!1,t=this.props.streamInfo||{};"file"===t.streamType&&t.userid!=this.props.myUserId&&(e=!0),f.default.updateStyle(this.elements.playPauseBtnElement,{display:!this.props.controlPermissions.hasPlayOrPause||e?"none":""}),this.elements.playPauseBtnElement.disabled=!this.props.controlPermissions.hasPlayOrPause||e,f.default.updateStyle(this.elements.closeBtnElement,{display:this.props.controlPermissions.hasClose?"":"none"}),this.elements.closeBtnElement.disabled=!this.props.controlPermissions.hasClose,this.progressSlider&&s.default.isFunction(this.progressSlider.updateDisabled)&&this.progressSlider.updateDisabled(!this.props.controlPermissions.hasChangeProgress||e),!this.props.controlPermissions.hasChangeProgress||e?f.default.addClass(this.elements.mediaPlayerProgressElement,"disabled"):f.default.removeClass(this.elements.mediaPlayerProgressElement,"disabled")}},{key:"_updateProgress",value:function(){if(this.props.streamInfo&&!this.mediaPlayerProgressSlidering&&!this.tempStopUpdatePosition&&this.progressSlider&&"function"==typeof this.progressSlider.setProgress){var e=0,t=this.props.streamInfo&&this.props.streamInfo.attributes?this.props.streamInfo.attributes:{},o=t.position,n=void 0===o?0:o,i=t.duration,a=void 0===i?0:i;0!==a&&(e=n/a*100,isNaN(e)&&(e=0)),e<0?e=0:100<e&&(e=100),this.elements.currTimeElement.innerHTML=this._formatTime(n/1e3),this.progressSlider.setProgress(e)}}},{key:"render",value:function(){var e=this.props,t=e.streamInfo,o=void 0===t?{}:t,n=e.muteVolume,i=e.isFullScreen,a=o.attributes,r=void 0===a?{}:a,s=r.filename,l=void 0===s?"":s,d=r.position,c=void 0===d?0:d,u=r.duration,h=void 0===u?0:u,m=r.pause;this.elements.filenameElement.innerHTML=l,this.elements.currTimeElement.innerHTML=this._formatTime(c/1e3),this.elements.totalTimeElement.innerHTML=this._formatTime(h/1e3),m?(f.default.removeClass(this.elements.playPauseBtnElement,"pause"),f.default.addClass(this.elements.playPauseBtnElement,"play"),f.default.removeClass(this.elements.playPauseIconElement,"pause"),f.default.addClass(this.elements.playPauseIconElement,"play")):(f.default.removeClass(this.elements.playPauseBtnElement,"play"),f.default.addClass(this.elements.playPauseBtnElement,"pause"),f.default.removeClass(this.elements.playPauseIconElement,"play"),f.default.addClass(this.elements.playPauseIconElement,"pause")),n?f.default.addClass(this.elements.volumeMuteBtnElement,"mute"):f.default.removeClass(this.elements.volumeMuteBtnElement,"mute"),i?f.default.addClass(this.elements.fullScreenBtnElement,"yes"):f.default.removeClass(this.elements.fullScreenBtnElement,"yes")}}]),c);function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,n));return i.parentNode=e,i.instanceId=t,i.whiteBoardManagerInstance=o,i.elements={},i.videoDumb=void 0,i._createElements(),i._connectElements(),i.render(),i}o.default=d},{"../../utils/DomUtils":339,"../../utils/Utils":344,"../components/TalkcloudReact":347}],346:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(e("./TalkcloudReact")),d=r(e("../../utils/DomUtils"));function r(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a.default),n(l,[{key:"componentDidUpdateState",value:function(e){e.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow)}},{key:"componentDidUpdateProps",value:function(e){if(e.selectOptions!==this.state.selectOptions){var t=this.props,o=t.optionClassName,n=t.selectOptions,i=void 0===n?[]:n,a=t.disabled,r=t.currentValue;d.default.removeAllChild(this.elements.selectListViewElement);for(var s=0;s<i.length;s++){var l=d.default.createElement("li",void 0,"select-option "+(o||" ")+(r===i[s].value?" selected":" "));l.innerHTML=i[s].value,l.onclick=a?void 0:this.optionOnClick.bind(this,i[s].value,s),d.default.appendChild(this.elements.selectListViewElement,l)}}}},{key:"destroyView",value:function(){for(var e in d.default.removeChild(this.elements.selectViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"forceHideSelectExtendList",value:function(){this.setState({extendShow:!1})}},{key:"currentTextOnClick",value:function(e){return this.props.disabled||(this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation())),!1}},{key:"optionOnClick",value:function(e,t,o){return this.props.disabled||(e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),this.setState({extendShow:!1}),o&&(o.preventDefault(),o.stopPropagation())),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),o=document.documentElement.clientTop,n=document.documentElement.clientLeft;return{top:t.top-o,bottom:t.bottom-o,left:t.left-n,right:t.right-n,width:t.width,height:t.height}}},{key:"_createConnectElements",value:function(){this.elements.selectViewRootElement=d.default.createElement("article",this.props.id,void 0,{}),this.elements.currentSelectTextElement=d.default.createElement("button",void 0,void 0,{}),this.elements.arrowElement=d.default.createElement("span"),this.elements.arrowElement.innerHTML='<em class="arrow "></em>',this.elements.selectListViewElement=d.default.createElement("ol"),d.default.appendChild(this.elements.selectViewRootElement,this.elements.currentSelectTextElement),d.default.appendChild(this.elements.selectViewRootElement,this.elements.arrowElement),d.default.appendChild(this.elements.selectViewRootElement,this.elements.selectListViewElement),d.default.appendChild(this.parentNode,this.elements.selectViewRootElement),this.elements.currentSelectTextElement.onclick=this.currentTextOnClick.bind(this),this.elements.selectViewRootElement.onmouseleave=this.selectContainerOnMouseLeave.bind(this)}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.disabled,n=e.currentValue,i=void 0===n?"":n;if(d.default.updateStyle(this.elements.selectListViewElement,{display:o?"none":this.state.extendShow?"block":"none"}),this.listDirection=this.props.listDirection||this.listDirection,d.default.resetClass(this.elements.selectViewRootElement,"talkcloud-sdk-whiteboard  select-root tk-select-container clear-float "+(o?" disabled ":"  ")+(t||"")+(o?" hideExtendList":this.state.extendShow?" showExtendList":" hideExtendList")),d.default.resetClass(this.elements.currentSelectTextElement,"talkcloud-sdk-whiteboard  select-btn current-select-text-btn current-select-text "+(o?"disabled ":" ")),d.default.resetClass(this.elements.arrowElement,"arrow-container "+(o?"disabled ":" ")),d.default.resetClass(this.elements.selectListViewElement,"select-extend-list-container "+(this.props.isMobile?" ":"custom-scroll-bar")+(o?" disabled ":"  ")+(o?" hide":this.state.extendShow?" show":" hide")),o?this.elements.currentSelectTextElement.setAttribute("disabled","true"):this.elements.currentSelectTextElement.removeAttribute("disabled"),this.elements.currentSelectTextElement.value=i,this.elements.currentSelectTextElement.innerText=i,this.props.parentNode&&this.state.extendShow&&!this.props.disabled&&!this.props.listDirection){var a=this._getRect(this.props.parentNode),r=this._getRect(this.elements.selectListViewElement);r.top-a.top>a.height-r.height+5?this.listDirection="up":this.listDirection="down",d.default.removeClass(this.elements.selectViewRootElement,["down","up"]),d.default.removeClass(this.elements.selectListViewElement,["down","up"]),d.default.addClass(this.elements.selectViewRootElement,this.listDirection),d.default.addClass(this.elements.selectListViewElement,this.listDirection)}else d.default.removeClass(this.elements.selectViewRootElement,["down","up"]),d.default.removeClass(this.elements.selectListViewElement,["down","up"]),d.default.addClass(this.elements.selectViewRootElement,this.listDirection),d.default.addClass(this.elements.selectListViewElement,this.listDirection)}}]),l);function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return o.parentNode=e,o.elements={},o.state={extendShow:!1},o.listDirection="down",o._createConnectElements(),o.render(),o}o.default=s},{"../../utils/DomUtils":339,"./TalkcloudReact":347}],347:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=(function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}(r,[{key:"setState",value:function(e){var t=Object.deepAssign({},this.state);Object.shallowAssign(this.state,e);var o=!1;this.shouldComponentUpdateState&&"function"==typeof this.shouldComponentUpdateState&&(o=this.shouldComponentUpdateState(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateState&&"function"==typeof this.componentDidUpdateState&&this.componentDidUpdateState(t)}},{key:"setProps",value:function(e){var t=Object.deepAssign({},this.props);Object.shallowAssign(this.props,e);var o=!1;this.shouldComponentUpdateProps&&"function"==typeof this.shouldComponentUpdateProps&&(o=this.shouldComponentUpdateProps(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateProps&&"function"==typeof this.componentDidUpdateProps&&this.componentDidUpdateProps(t)}}]),r);function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),"object"!==(void 0===e?"undefined":n(e))||Array.isArray(e)?this.props={}:this.props=Object.shallowAssign({},e),this.state="object"!==n(this.state)||Array.isArray(this.state)?{}:this.state}o.default=a},{}],348:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=s(e("./TalkcloudReact")),r=s(e("../../utils/DomUtils"));function s(e){return e&&e.__esModule?e:{default:e}}var l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,a.default),n(d,[{key:"componentDidUpdateProps",value:function(e){this.props.volume===e.volume&&this.props.muteVolume===e.muteVolume||this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"destroyView",value:function(){for(var e in this._unplayAV(),r.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"getElementId",value:function(){return this.elements.rootElement.id}},{key:"_changeVolume",value:function(e){if(void 0!==e&&"number"==typeof e&&this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.props.streamInfo||{},o=t.userid,n=t.streamType;this.whiteBoardManagerInstance.getRoomDelegate().setVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setVolume(o,n,e)}}},{key:"_createElements",value:function(){var e=(this.props.streamInfo||{}).userid;this.elements.rootElement=r.default.createElement("div",this.props.videoDumbElementIdPrefix+e,"tk-audio-or-video-player  tk-audio-player-video-dumb")}},{key:"_connectElements",value:function(){r.default.appendChild(this.parentNode,this.elements.rootElement)}},{key:"_playAV",value:function(){if(this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.elements.rootElement&&this.elements.rootElement.id){var e=this.props.streamInfo||{},t=e.userid;switch(e.streamType){case"media":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia){var o=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia(t,o)}break;case"file":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile){var n=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile(t,n)}}}this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"_unplayAV",value:function(){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.streamType){case"media":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia(this.userid);break;case"file":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile(this.userid)}}},{key:"render",value:function(){}}]),d);function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,n));return i.parentNode=e,i.instanceId=t,i.whiteBoardManagerInstance=o,i.elements={},i.userid=i.props.streamInfo?i.props.streamInfo.userid:void 0,i.streamType=i.props.streamInfo?i.props.streamInfo.streamType:void 0,i._createElements(),i._connectElements(),i._playAV(),i}o.default=l},{"../../utils/DomUtils":339,"./TalkcloudReact":347}],349:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkAudioPlayer=void 0;var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,r=e("./MediaPlayer");var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,((a=r)&&a.__esModule?a:{default:a}).default),n(l,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,a=void 0===i?{}:i,r=t.published;if(("media"===o||"file"===o)&&a.audio&&!a.video)if(r){this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:a.audio,video:a.video,attributes:a}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e)}else this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,i=void 0===n?{}:n,a=t.updateAttributes,r=void 0===a?{}:a;"media"!==o&&"file"!==o||!i.audio||i.video||this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===n||"file"===n)&&r.audio&&!r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,d={playerType:"audioPlayer",userid:i,streamType:n,audio:r.audio,video:r.video,attributes:r,isDynamicPptVideo:!1};l=Object.deepAssign({type:e,fileid:d.attributes.fileid},d),s.sendActionCommand("mediaPlayerNotice",l)}}}}]),l);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,t,o,n,i,!1))}window.TalkAudioPlayer=s,o.TalkAudioPlayer=s,o.default=s},{"./MediaPlayer":352}],350:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentRemark=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=h(e("../components/TalkcloudReact")),d=h(e("../../utils/DomUtils")),c=h(e("../../utils/Utils")),u=h(e("../../utils/Global")),s=h(e("../../utils/Language")),l=h(e("../../utils/TalkAjax"));function h(e){return e&&e.__esModule?e:{default:e}}var m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,r.default),i(f,[{key:"componentDidUpdateState",value:function(e){this.state.autoOpenRemark&&e.viewState.fileid==this.state.viewState.fileid&&0!=this.state.viewState.fileid&&e.viewState.page.currentPage!==this.state.viewState.page.currentPage&&this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),e.viewState.fileid!=this.state.viewState.fileid&&(this.state.autoOpenRemark&&0!=this.state.viewState.fileid&&this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),this._ajaxDocumentRemark()),e.viewState.remark!==this.state.viewState.remark&&this._ajaxDocumentRemark()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0)),!c.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,n=void 0===o?50:o,i=t.top,a=void 0===i?100:i;this.documentRemarkTalkDrag.setPosition(n,a)}}},{key:"changeParentNode",value:function(e){e&&(d.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.parentNode=e,d.default.appendChild(this.parentNode,this.elements.remarkViewRootElement))}},{key:"destroyView",value:function(){for(var e in d.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"resize",value:function(){this.documentRemarkTalkDrag&&c.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentRemark]receive whiteboard view action command（action,cmd）:",e,t),e){case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"closeDocumentRemarkOnClick",value:function(){this.whiteBoardManagerInstance&&c.default.isFunction(this.whiteBoardManagerInstance.closeDocumentRemark)&&this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId)}},{key:"_createConnectElements",value:function(){this.elements.remarkViewRootElement=d.default.createElement("div",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" talk-cloud-remark-container remark-container",{position:"absolute",left:0,top:0,display:"none",zIndex:3}),this.elements.remarkViewRootElement.innerHTML='\n            <div class="remark-head"> \n                <span class="name"></span>\n                <button class="close"></button>\n            </div>\n            <div class="content-container"> \n                <span class="content-text  custom-scroll-bar" >  </span>\n            </div>\n        ',d.default.appendChild(this.parentNode,this.elements.remarkViewRootElement),this.elements.remarkNameElement=this.elements.remarkViewRootElement.getElementsByClassName("name")[0],this.elements.remarkCloseElement=this.elements.remarkViewRootElement.getElementsByClassName("close")[0],this.elements.remarkContentElement=this.elements.remarkViewRootElement.getElementsByClassName("content-text")[0],this.elements.remarkCloseElement.onclick=this.closeDocumentRemarkOnClick.bind(this),this._addTalkDrag()}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var o=s.default.get(t).documentRemark,n=o.name,i=o.closeTitle;this.elements.remarkNameElement.innerHTML=n,this.elements.remarkCloseElement.setAttribute("title",i)}},{key:"_addTalkDrag",value:function(){window.TalkDrag&&this.elements.remarkViewRootElement&&(this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0),this.documentRemarkTalkDrag=new window.TalkDrag(this.elements.remarkViewRootElement,{containerData:{left:50,top:90}}))}},{key:"_ajaxDocumentRemark",value:function(){var i=this,e=this.state.viewState,t=e.remark,a=e.fileid,r=this,o=!1;this.ajaxRequestingList["documentRemark_"+a]&&(new Date).getTime()-this.ajaxRequestingList["documentRemark_"+a].requestTime<5e3&&(o=!0),this.props.isConnectedRoom&&!o&&this.props.canRemark&&t&&0!=a&&!u.default.allDocumentRemarkInfoMap.has("documentRemark_"+a)&&(this.ajaxRequestingList["documentRemark_"+a]&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr&&c.default.isFunction(this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort)&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort(),this.ajaxRequestingList["documentRemark_"+a]={requestTime:(new Date).getTime(),ajaxXhr:void 0},this.ajaxRequestingList["documentRemark_"+a].ajaxXhr=(0,l.default)().post(this.props.webAddress+"/ClientAPI/getfileremark?ts="+(new Date).getTime(),{fileid:a}).then(function(e){if(i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],e&&0===e.result)for(var t in e){var o=e[t];if("result"!==t&&o&&c.default.isJson(o)){u.default.allDocumentRemarkInfoMap.has("documentRemark_"+o.fileid)||u.default.allDocumentRemarkInfoMap.set("documentRemark_"+o.fileid,{});var n=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o.fileid);n&&(n[o.fileid+"_"+o.pageid]=o.remark),i.whiteBoardManagerInstance&&i.whiteBoardManagerInstance.whiteboardViewMap&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId)&&c.default.isFunction(i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate)&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate()}}i.setState({updateState:!i.state.updateState})}).catch(function(e,t){L.Logger.error("ajax request fail  error info( response, xhr ):",e,t),i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],i.setState({updateState:!i.state.updateState})}))}},{key:"render",value:function(){var e=this.state.viewState,t=e.remark,o=e.fileid,n=e.page,i=(void 0===n?{}:n).currentPage,a=void 0===i?1:i,r=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o),s=this.props.canRemark&&t&&0!=o&&r&&r[o+"_"+a],l=!this.isShow&&s;this.isShow=s,d.default.updateStyle(this.elements.remarkViewRootElement,{display:s?"block":"none"}),s&&r&&r[o+"_"+a]&&(this.elements.remarkContentElement.innerHTML=r[o+"_"+a]),l&&this.documentRemarkTalkDrag&&c.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}}]),f);function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,n));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=i,a.elements={},a.documentRemarkTalkDrag=void 0,a.ajaxRequestingList={},a.state={autoOpenRemark:!0,updateState:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateLanguage(),a.render(),a}window.TalkDocumentRemark=m,o.TalkDocumentRemark=m,o.default=m},{"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Language":341,"../../utils/TalkAjax":343,"../../utils/Utils":344,"../components/TalkcloudReact":347}],351:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentToolbar=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e};function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=c(e("../components/TalkcloudReact")),P=c(e("../../utils/DomUtils")),s=c(e("../../utils/Utils")),l=c(e("../components/Select")),I=c(e("../../utils/Language")),d=c(e("../../utils/Global"));function c(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,r.default),n(h,[{key:"componentDidUpdateState",value:function(e){if(e.viewState!==this.state.viewState){var t=e.viewState.page.currentPage===this.state.viewState.page.currentPage,o=e.viewState.page.totalPage===this.state.viewState.page.totalPage,n=e.viewState.page.skipPage&&this.state.viewState.page.skipPage?s.default.deepCompareJson(e.viewState.page.skipPage,this.state.viewState.page.skipPage):e.viewState.page.skipPage===this.state.viewState.page.skipPage;t&&o&&n||(this._isShowRemarkBtn(),this._updateSelectInfo()),e.viewState.fileid==this.state.viewState.fileid&&e.viewState.remarkText===this.state.viewState.remarkText||this._isShowRemarkBtn(),e.viewState.dynamicPptVolume!==this.state.viewState.dynamicPptVolume&&!this.pageVolumeSlidering&&this.pageVolumeSlider&&"function"==typeof this.pageVolumeSlider.setProgress&&this.pageVolumeSlider.setProgress(this.state.viewState.dynamicPptVolume)}e.tempDisabledDrag!==this.state.tempDisabledDrag&&this.documentToolbarTalkDrag&&i(this.documentToolbarTalkDrag.updateDisabled)&&this.documentToolbarTalkDrag.updateDisabled(this.state.tempDisabledDrag),e.viewState.documentType===this.state.viewState.documentType&&e.viewState.fullScreen===this.state.viewState.fullScreen&&e.viewState.remark===this.state.viewState.remark||this._updateLanguage(),e.updateState!==this.state.updateState&&this._isShowRemarkBtn()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isMobile!==this.props.isMobile&&(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.props.isMobile?P.default.addClass(this.elements.documentToolbarViewRootElement,"app-mobile"):P.default.removeClass(this.elements.documentToolbarViewRootElement,"app-mobile"),this.elementsViewClass.selectPageView&&this.elementsViewClass.selectPageView.setProps({isMobile:this.props.isMobile})),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0)),!s.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,n=void 0===o?50:o,i=t.top,a=void 0===i?100:i;this.documentToolbarTalkDrag.setPosition(n,a)}e.isLoadRemark===this.props.isLoadRemark&&e.canRemark===this.props.canRemark||!this.elements.remarkElement||this._isShowRemarkBtn(),e.isLoadFullScreen!==this.props.isLoadFullScreen&&this.elements.fullScreenElement&&P.default.updateStyle(this.elements.fullScreenElement,{display:this.props.isLoadFullScreen?"":"none"})}},{key:"resize",value:function(){this.documentToolbarTalkDrag&&s.default.isFunction(this.documentToolbarTalkDrag.resizeCallback)&&this.documentToolbarTalkDrag.resizeCallback()}},{key:"forceRender",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"changeParentNode",value:function(e){e&&(P.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.parentNode=e,P.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement))}},{key:"destroyView",value:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=Object.values(this.elementsViewClass)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a&&a.destroyView&&a.destroyView()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}for(var r in this.elementsViewClass={},P.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.elements)this.elements[r]=void 0,delete this.elements[r]}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentToolbar]receive whiteboard view action command（action,cmd）:",e,t),e){case"closeAllSelectBox":P.default.removeClass(this.elements.volumeElement,"open");break;case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"changeSelectPageOnChange",value:function(e){this.skipPage(e)}},{key:"changeSelectPageNoticeSelectExtendListShowOrHide",value:function(e){this.setState({tempDisabledDrag:e})}},{key:"prevPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevPage(this.instanceId)}return!1}},{key:"nextPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextPage(this.instanceId)}return!1}},{key:"addPage",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.addPage(this.instanceId),!1}},{key:"fullScreen",value:function(){return this.whiteBoardManagerInstance&&(this.state.viewState.fullScreen?this.whiteBoardManagerInstance.exitFullScreen(this.instanceId):this.whiteBoardManagerInstance.fullScreen(this.instanceId)),!1}},{key:"openDynamicPptVolumeOnClick",value:function(){return P.default.hasClass(this.elements.volumeElement,"open")?P.default.removeClass(this.elements.volumeElement,"open"):P.default.addClass(this.elements.volumeElement,"open"),!1}},{key:"closeDynamicPptVolumeOnMouseLeave",value:function(){return P.default.removeClass(this.elements.volumeElement,"open"),!1}},{key:"openOrCloseRemarkOnClick",value:function(){var e=this.state.viewState.remark;this.whiteBoardManagerInstance&&(e?this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId):this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId))}},{key:"changeDynamicPptVolume",value:function(e){this.whiteBoardManagerInstance&&"function"==typeof this.whiteBoardManagerInstance.changeDynamicPptVolume&&this.whiteBoardManagerInstance.changeDynamicPptVolume(e,this.instanceId)}},{key:"skipPage",value:function(e){return"number"==typeof(e=Number(e))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.skipPage(e,this.instanceId),!1}},{key:"sendActionCommand",value:function(e,t){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)){var o=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId);o&&o.sendActionCommand&&o.sendActionCommand(e,t)}}},{key:"changePageOnFocus",value:function(e){return d.default.isSkipPageing=!0,e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnClick",value:function(){return this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.elements.skipPageCurrpageElement.focus(),event&&(event.preventDefault(),event.stopPropagation()),!1}},{key:"changePageOnBlur",value:function(e){return d.default.isSkipPageing=!1,this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnKeyDown",value:function(e){switch(e.keyCode){case 13:return this.elements.skipPageCurrpageElement&&"function"==typeof this.elements.skipPageCurrpageElement.blur?(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!1),this.elements.skipPageCurrpageElement.blur()):this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}}},{key:"enlargeWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.enlargeWhiteboard(this.instanceId),!1}},{key:"narrowWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.narrowWhiteboard(this.instanceId),!1}},{key:"receiveWindowMessageEvent",value:function(t){var e={};if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)&&(e=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId)),t.data){var o=void 0,n=void 0;try{o=(n=JSON.parse(t.data)).data}catch(e){return void L.Logger.warning("document tool bar receive iframe message data can't be converted to JSON , iframe data:",t.data)}if("tk_dynamicPPT"===n.source&&e.getDynamicPptInstanceByID&&"function"==typeof e.getDynamicPptInstanceByID&&e.getDynamicPptInstanceByID().dynamicPptIframeElement&&t.source===e.getDynamicPptInstanceByID().dynamicPptIframeElement.contentWindow)switch(L.Logger.debug("[document tool bar]receive remote iframe data form "+t.origin+":",t),o.action){case"allVideoAndAudio":this.setState({dynamicPptAVSize:void 0!==o.allVideoAndAudioLength?o.allVideoAndAudioLength:0})}}}},{key:"stopEvent",value:function(e){return e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_changePage",value:function(){var e=Number(this.elements.skipPageCurrpageElement.innerHTML),t=this.state.viewState.page,o=void 0===t?{}:t,n=o.totalPage,i=void 0===n?1:n,a=o.currentPage,r=void 0===a?1:a;if("number"!=typeof e||isNaN(e)){var s={type:"pageTypeNotNumber",currentPage:r,totalPage:i,toPage:this.elements.skipPageCurrpageElement.innerHTML};this.sendActionCommand("skipPageFailureBouncedNotice",s),this.elements.skipPageCurrpageElement.innerHTML=r}else{if(e===r)return;if(e<1||i<e){var l={type:"overPageRange",currentPage:r,totalPage:i,toPage:e};this.sendActionCommand("skipPageFailureBouncedNotice",l),this.elements.skipPageCurrpageElement.innerHTML=r}else this.skipPage(e)}}},{key:"_createConnectElements",value:function(){var t=this;this.elements.documentToolbarViewRootElement=P.default.createElement("article",this.instanceId+"DocumentToolViewRoot","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-root "+(this.props.isMobile?"app-mobile ":" "),{zIndex:5}),this.elements.previousPageElement=P.default.createElement("button",this.instanceId+"TalkcloudPreviousPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn previous-page-btn",{}),this.elements.skipPageElement=P.default.createElement("div",this.instanceId+"TalkcloudSkipPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-select skip-page-select",{}),this.elements.nextPageElement=P.default.createElement("button",this.instanceId+"TalkcloudNextPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn next-page-btn",{}),this.elements.addPageElement=P.default.createElement("button",this.instanceId+"TalkcloudAddPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn add-page-btn",{display:"none"}),this.elements.fullScreenElement=P.default.createElement("button",this.instanceId+"TalkcloudFullScreen","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn full-screen-btn",{display:this.props.isLoadFullScreen?"":"none"}),this.elements.volumeElement=P.default.createElement("button",this.instanceId+"TalkcloudVolume","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn volume-btn",{display:this.props.isLoadVolume?"":"none"}),this.elements.remarkElement=P.default.createElement("button",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn remark-btn",{display:this.props.isLoadRemark&&this.props.canRemark?"":"none"}),this.elements.enlargeWhiteboardElement=P.default.createElement("button",this.instanceId+"TalkcloudZoomBig","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-big-btn",{}),this.elements.narrowWhiteboardElement=P.default.createElement("button",this.instanceId+"TalkcloudZoomSmall","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-small-btn",{}),this.elements.volumeElement.innerHTML='\n            <span class="volume-slider-container" onclick="return false;" id="'+this.instanceId+'PageVolumeSlider" ></span>\n        ',this.elements.skipPageElement.innerHTML='\n            <div class="page-info-container" > \n                <span contenteditable="'+!this.props.isMobile+'" class="curr-page">1</span><em>/</em><span class="total-page">1</span>\n            </div>\n        ',this.elements.skipPageCurrpageElement=this.elements.skipPageElement.getElementsByClassName("curr-page")[0],this.elements.skipPageTotalpageElement=this.elements.skipPageElement.getElementsByClassName("total-page")[0],this.elements.skipPageCurrpageElement.oninput=function(e){var t=e.target.innerHTML;(!Number(t)||5<t.length)&&(e.target.innerHTML=t.substr(0,5))},this.elements.skipPageCurrpageElement.onclick=this.changePageOnClick.bind(this),this.elements.skipPageCurrpageElement.onfocus=this.changePageOnFocus.bind(this),this.elements.skipPageCurrpageElement.onblur=this.changePageOnBlur.bind(this),this.elements.skipPageCurrpageElement.onkeydown=this.changePageOnKeyDown.bind(this),this.elements.previousPageElement.onclick=this.prevPage.bind(this),this.elements.nextPageElement.onclick=this.nextPage.bind(this),this.elements.addPageElement.onclick=this.addPage.bind(this),this.elements.fullScreenElement.onclick=this.fullScreen.bind(this),this.elements.volumeElement.onclick=this.openDynamicPptVolumeOnClick.bind(this),this.elements.volumeElement.getElementsByClassName("volume-slider-container")[0].onclick=this.stopEvent.bind(this),this.elements.volumeElement.onmouseleave=this.closeDynamicPptVolumeOnMouseLeave.bind(this),this.elements.remarkElement.onclick=this.openOrCloseRemarkOnClick.bind(this),this.elements.enlargeWhiteboardElement.onclick=this.enlargeWhiteboard.bind(this),this.elements.narrowWhiteboardElement.onclick=this.narrowWhiteboard.bind(this),this.elementsViewClass.selectPageView=new l.default(this.elements.skipPageElement,{parentNode:this.parentNode,isMobile:this.props.isMobile,onChange:this.changeSelectPageOnChange.bind(this),noticeSelectExtendListShowOrHide:this.changeSelectPageNoticeSelectExtendListShowOrHide.bind(this)}),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.previousPageElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.skipPageElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.nextPageElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.addPageElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.enlargeWhiteboardElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.narrowWhiteboardElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.fullScreenElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.volumeElement),P.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.remarkElement),P.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement),window.TalkSlider&&(this.pageVolumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+"PageVolumeSlider",direction:"vertikal"},onBeforeChange:function(){t.pageVolumeSlidering=!0},onAfterChange:function(e){t.pageVolumeSlidering=!1,t.changeDynamicPptVolume(e)}})),this._addTalkDrag()}},{key:"_addTalkDrag",value:function(){if(this.props.isDrag&&window.TalkDrag&&this.elements.documentToolbarViewRootElement){this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0);var e=this.props.initDragPosition||{},t=e.left,o=void 0===t?50:t,n=e.top,i=void 0===n?100:n;this.documentToolbarTalkDrag=new window.TalkDrag(this.elements.documentToolbarViewRootElement,{containerData:{left:o,top:i}})}}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e,o=this.state.viewState,n=o.remark,i=o.fullScreen,a=o.documentType;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var r=I.default.get(t).documentToolbar,s=r.prevPage,l=r.nextPage,d=r.prevStep,c=r.nextStep,u=r.addPage,h=r.enlargeWhiteboard,m=r.narrowWhiteboard,f=r.pptVolume,p=r.onRemark,g=r.offRemark,v=r.onGeneralDocumentFullScreen,y=r.offGeneralDocumentFullScreen,b=r.onDynamicPPTFullScreen,_=r.offDynamicPPTFullScreen,w=r.onH5DocumentFullScreen,k=r.offH5DocumentFullScreen,S=i?y:v;"dynamicPPT"===a?S=i?_:b:"h5Document"===a&&(S=i?k:w),this.elements.previousPageElement.title="dynamicPPT"===a?d:s,this.elements.nextPageElement.title="dynamicPPT"===a?c:l,this.elements.addPageElement.title=u,this.elements.fullScreenElement.title=S,this.elements.volumeElement.title=f,this.elements.remarkElement.title=n?g:p,this.elements.enlargeWhiteboardElement.title=h,this.elements.narrowWhiteboardElement.title=m}},{key:"_updateSelectInfo",value:function(){if(this.elementsViewClass.selectPageView){var e=this.state.viewState.page,t=void 0===e?{}:e,o=t.totalPage,n=void 0===o?1:o,i=t.currentPage,a=void 0===i?1:i,r=t.skipPage,s=void 0===r?{}:r,l=[];n<1&&(n=1),a<1&&(a=1);for(var d=1;d<=n;d++)l.push({label:d,value:d});this.elementsViewClass.selectPageView.setProps({selectOptions:l,currentValue:a,disabled:s.disabled,isMobile:this.props.isMobile}),this.elements.skipPageCurrpageElement.innerHTML=a,this.elements.skipPageTotalpageElement.innerHTML=n}}},{key:"_isShowRemarkBtn",value:function(){if(this.elements.remarkElement){var e=this.props.isLoadRemark&&this.props.canRemark&&this.state.viewState.remarkText;P.default.updateStyle(this.elements.remarkElement,{display:e?"":"none"})}}},{key:"render",value:function(){var e=this.state.viewState,t=e.page,o=void 0===t?{}:t,n=e.zoom,i=void 0===n?{}:n,a=e.documentType,r=e.fullScreen,s=e.remark,l=(e.fileid,o.prevPage),d=void 0===l?{}:l,c=o.nextPage,u=void 0===c?{}:c,h=o.prevStep,m=void 0===h?{}:h,f=o.nextStep,p=void 0===f?{}:f,g=o.addPage,v=void 0===g?{}:g,y=o.skipPage,b=void 0===y?{}:y,_=(o.currentPage,i.zoom_big),w=void 0===_?{}:_,k=i.zoom_small,S=void 0===k?{}:k;this.elements.previousPageElement.disabled="dynamicPPT"===a?m.disabled:d.disabled,this.elements.nextPageElement.disabled="dynamicPPT"===a?p.disabled:u.disabled,this.elements.addPageElement.disabled=v.disabled,this.elements.enlargeWhiteboardElement.disabled=w.disabled,this.elements.narrowWhiteboardElement.disabled=S.disabled,b.disabled?P.default.addClass(this.elements.skipPageElement,"disabled"):P.default.removeClass(this.elements.skipPageElement,"disabled"),P.default.updateStyle(this.elements.nextPageElement,{display:v.disabled?"":"none"}),P.default.updateStyle(this.elements.addPageElement,{display:v.disabled?"none":""}),r?P.default.addClass(this.elements.fullScreenElement,"yes"):P.default.removeClass(this.elements.fullScreenElement,"yes"),P.default.updateStyle(this.elements.volumeElement,{display:this.props.isLoadVolume&&"dynamicPPT"===a&&0<this.state.dynamicPptAVSize?"":"none"}),s?P.default.addClass(this.elements.remarkElement,"yes"):P.default.removeClass(this.elements.remarkElement,"yes")}}]),h);function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,n));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=i,a.elements={},a.elementsViewClass={},a.documentToolbarTalkDrag=void 0,a.state={updateState:!1,dynamicPptAVSize:0,tempDisabledDrag:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,remarkText:"",other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateSelectInfo(),a._updateLanguage(),a.render(),a}window.TalkDocumentToolbar=u,o.TalkDocumentToolbar=u,o.default=u},{"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Language":341,"../../utils/Utils":344,"../components/Select":346,"../components/TalkcloudReact":347}],352:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=d(e("../components/TalkcloudReact")),h=d(e("../../utils/DomUtils")),m=d(e("../../utils/Utils")),r=d(e("../components/VideoDumb")),l=d(e("../components/MediaPlayerController"));function d(e){return e&&e.__esModule?e:{default:e}}var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,a.default),n(f,[{key:"shouldComponentUpdateState",value:function(e){if(e.streamInfo!==this.state.streamInfo&&e.streamInfo&&this.state.streamInfo&&e.streamInfo.attributes&&this.state.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(this.state.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),d=l[0],c=l[1];if("position"!==d&&c!==e.streamInfo.attributes[d]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.state.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateState",value:function(e){if(e.streamInfo&&!this.state.streamInfo){var t=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===t.id&&m.default.exitFullscreen()}if(this.elements.closeVideoPlayerElement&&this.state.streamInfo){var o=!1,n=this.state.streamInfo||{};"file"===n.streamType&&n.userid!=this.props.myUserId&&(o=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||o?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||o}this.state.streamInfo&&this.state.streamInfo.attributes?!this.progressTimer||"media"!==this.state.streamInfo.streamType||this.state.streamInfo.userid!=this.props.myUserId&&0!=this.props.myRole&&1!=this.props.myRole?this.progressTimer&&this.state.streamInfo.attributes.pause?this._stopProgressTimer():this.progressTimer||this.state.streamInfo.attributes.pause||this._startProgressTimer():this._stopProgressTimer():this.progressTimer&&this._stopProgressTimer(),this.videoDumb&&(e.volume!==this.state.volume&&this.videoDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.videoDumb.setProps({muteVolume:this.state.muteVolume}),e.streamInfo!==this.state.streamInfo&&this.videoDumb.setProps({streamInfo:this.state.streamInfo})),this.mediaPlayerControllerDumb&&(e.streamInfo!==this.state.streamInfo&&this.mediaPlayerControllerDumb.setProps({streamInfo:this.state.streamInfo}),e.volume!==this.state.volume&&this.mediaPlayerControllerDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.mediaPlayerControllerDumb.setProps({muteVolume:this.state.muteVolume}),e.isFullScreen!==this.state.isFullScreen&&this.mediaPlayerControllerDumb.setProps({isFullScreen:this.state.isFullScreen}))}},{key:"componentDidUpdateProps",value:function(e){if(e.isLoadControl!==this.props.isLoadControl&&(!this.mediaPlayerControllerDumb&&this.props.isLoadControl?this._loadMediaPlayerController():this.mediaPlayerControllerDumb&&!this.props.isLoadControl&&(this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=void 0)),this.elements.closeVideoPlayerElement&&e.controlPermissions.hasClose!==this.props.controlPermissions.hasClose){var t=!1,o=this.state.streamInfo||{};"file"===o.streamType&&o.userid!=this.props.myUserId&&(t=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||t?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||t}this.mediaPlayerControllerDumb&&(e.myUserId!==this.props.myUserId&&this.mediaPlayerControllerDumb.setProps({myUserId:this.props.myUserId}),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?h.default.addClass(this.elements.rootElement,"tk-playback"):h.default.removeClass(this.elements.rootElement,"tk-playback"),this.mediaPlayerControllerDumb.setProps({isPlayback:this.props.isPlayback})),e.controlPermissions!==this.props.controlPermissions&&this.mediaPlayerControllerDumb.setProps({controlPermissions:this.props.controlPermissions})),this.videoDumb&&e.myUserId!==this.props.myUserId&&this.videoDumb.setProps({myUserId:this.props.myUserId})}},{key:"destroyView",value:function(){for(var e in h.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveEventFullScreenChange",value:function(){if(m.default.isFullScreenStatus()){var e=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===e.id?this._changeFullScreenState(!0):this._changeFullScreenState(!1)}else this._changeFullScreenState(!1)}},{key:"onPlayOrPauseClick",value:function(){var e=this;if("pc"===TK.SDKTYPE&&this.state.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.whiteBoardManagerInstance.getRoomDelegate();switch(this.state.streamInfo.streamType){case"media":if(this.state.streamInfo.attributes.pause){var o=this.state.streamInfo.attributes,n=o.position,i=void 0===n?0:n,a=o.duration;(void 0===a?0:a)<=i&&t.seekMedia(0),t.pauseShareMedia(!1),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:""}),this.props.controlCallback&&this.props.controlCallback.play&&m.default.isFunction(this.props.controlCallback.play)&&this.props.controlCallback.play()}else t.pauseShareMedia(!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&this.props.controlCallback.pause();break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&t.getNativeInterface()){var r=t.getNativeInterface();if(this.state.streamInfo.attributes.pause){var s=this.state.streamInfo.attributes,l=s.position,d=void 0===l?0:l,c=s.duration,u=void 0===c?0:c;this._updateLocalFileStreamInfoPlayerPosition(function(){u<=d+1e3&&r.seekMediaFile(0),r.pauseShareMediaFile(!1),e.props.controlCallback&&e.props.controlCallback.play&&m.default.isFunction(e.props.controlCallback.play)&&(e.props.controlCallback.play(),h.default.updateStyle(e.elements.closeVideoPlayerElement,{display:""}))})}else r.pauseShareMediaFile(!0),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&(this.props.controlCallback.pause(),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}))}}}}},{key:"onChangeVolume",value:function(e){var t={volume:e};0!==e||this.state.muteVolume?0!==e&&this.state.muteVolume&&(t.muteVolume=!1):t.muteVolume=!0,this.setState(t)}},{key:"onChangeProgress",value:function(e){if("mobile"!==TK.SDKTYPE&&this.state.streamInfo&&this.state.streamInfo.attributes&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.state.streamInfo.streamType){case"media":var t=e/100;t<0&&(t=0),1<t&&(t=1);var o=this.state.streamInfo.attributes.duration*t;this._updateStreamInfoAttributes("position",o),this.whiteBoardManagerInstance.getRoomDelegate().seekMedia(t);break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()){var n=e/100;n<0&&(n=0),1<n&&(n=1);var i=this.state.streamInfo.attributes.duration*n;this._updateStreamInfoAttributes("position",i),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(n)}}}},{key:"onVolumeMuteClick",value:function(){var e={muteVolume:!this.state.muteVolume};!e.muteVolume&&this.state.volume<=0&&(e.volume=100),this.setState(e)}},{key:"onCloseClick",value:function(){if(this.state.streamInfo&&this.whiteBoardManagerInstance)switch(this.state.streamInfo.streamType){case"media":this.whiteBoardManagerInstance.stopShareMedia();break;case"file":this.whiteBoardManagerInstance.stopShareLocalMedia()}}},{key:"onFullScreenClick",value:function(){if(this.state.isFullScreen)m.default.exitFullscreen();else{m.default.isFullScreenStatus()&&m.default.exitFullscreen();var e=this.elements.rootElement;m.default.launchFullscreen(e)}}},{key:"_createElements",value:function(){this.elements.rootElement=h.default.createElement("section",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-container "+(this.isVideoPlayer?"tk-video-player-container ":"tk-audio-player-container ")+(this.props.isPlayback?"tk-playback ":" "),{display:this.state.streamInfo?"":"none"}),this.elements.mediaSourceElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerSourceBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-source",{display:this.isVideoPlayer?"":"none"});var e=!1,t=this.state.streamInfo||{};"file"===t.streamType&&t.userid!=this.props.myUserId&&(e=!0),this.isVideoPlayer&&(this.elements.closeVideoPlayerElement=h.default.createElement("button",void 0,"talkcloud-sdk-whiteboard add-cursor-pointer tk-video-player-close-btn ",{display:!this.props.controlPermissions.hasClose||e?"none":""})),this.elements.mediaTotalControlElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerTotalControlBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control-box",{}),this.isVideoPlayer&&(this.elements.rootElement.onmouseover=this._videoMouseover.bind(this),this.elements.rootElement.onmouseout=this._videoMouseout.bind(this),this.elements.rootElement.onclick=this._videoClick.bind(this),this.elements.mediaTotalControlElement.onmouseover=this._videoControlMouseover.bind(this),this.elements.mediaTotalControlElement.onclick=this._videoControlClick.bind(this))}},{key:"_videoMouseover",value:function(){var e=this;h.default.addClass(this.elements.rootElement,"show-controller"),clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(e.elements.rootElement,"show-controller")},2e3)}},{key:"_videoMouseout",value:function(){h.default.removeClass(this.elements.rootElement,"show-controller")}},{key:"_videoClick",value:function(){var e=this;this.elements.rootElement.classList.toggle("show-controller")&&(clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(e.elements.rootElement,"show-controller")},2e3))}},{key:"_videoControlMouseover",value:function(e){clearTimeout(this.showControllerTimer),h.default.addClass(this.elements.rootElement,"show-controller"),e.stopPropagation()}},{key:"_videoControlClick",value:function(e){e.stopPropagation()}},{key:"_connectElements",value:function(){h.default.appendChild(this.elements.rootElement,this.elements.mediaSourceElement),h.default.appendChild(this.elements.rootElement,this.elements.mediaTotalControlElement),this.elements.closeVideoPlayerElement&&h.default.appendChild(this.elements.rootElement,this.elements.closeVideoPlayerElement),h.default.appendChild(this.parentNode,this.elements.rootElement),this.props.isLoadControl&&this._loadMediaPlayerController(),this.elements.closeVideoPlayerElement&&(this.elements.closeVideoPlayerElement.onclick=this.onCloseClick.bind(this))}},{key:"_loadMediaPlayerController",value:function(){this.props.isLoadControl?(this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=new l.default(this.elements.mediaTotalControlElement,this.instanceId,this.whiteBoardManagerInstance,{streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,isFullScreen:this.state.isFullScreen,isPlayback:this.props.isPlayback,myUserId:this.props.myUserId,controlPermissions:this.props.controlPermissions,isVideoPlayer:this.isVideoPlayer,onCloseClick:this.onCloseClick.bind(this),onPlayOrPauseClick:this.onPlayOrPauseClick.bind(this),onChangeVolume:this.onChangeVolume.bind(this),onVolumeMuteClick:this.onVolumeMuteClick.bind(this),onChangeProgress:this.onChangeProgress.bind(this),onFullScreenClick:this.onFullScreenClick.bind(this)})):this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_startProgressTimer",value:function(){var m=this;if(this.props.isPlayback)this._stopProgressTimer();else if(this._stopProgressTimer(),this.state.streamInfo){if("media"===this.state.streamInfo.streamType&&(this.state.streamInfo.userid==this.props.myUserId||0==this.props.myRole||1==this.props.myRole))return void this._stopProgressTimer();this.progressTimer=setInterval(function(){if(m.state.streamInfo){var e=m.state.streamInfo,t=e.userid,o=e.streamType,n=e.attributes,i=void 0===n?{}:n;switch(o){case"media":if("media"===m.state.streamInfo.streamType&&(m.state.streamInfo.userid==m.props.myUserId||0==m.props.myRole||1==m.props.myRole))return void m._stopProgressTimer();var a=i.position,r=void 0===a?0:a,s=i.duration,l=void 0===s?0:s;l<(r+=m.progressIntervalDuration)&&(r=l,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",r);break;case"file":if(t!==m.props.myUserId){var d=i.position,c=void 0===d?0:d,u=i.duration,h=void 0===u?0:u;h<(c+=m.progressIntervalDuration)&&(c=h,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",c)}else m._updateLocalFileStreamInfoPlayerPosition()}}else m._stopProgressTimer()},this.progressIntervalDuration)}}},{key:"_stopProgressTimer",value:function(){clearInterval(this.progressTimer),this.progressTimer=null}},{key:"_updateStreamInfoAttributes",value:function(e,t){if(this.state.streamInfo){var o={};o[e]=t,this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:o})})}}},{key:"_updateLocalFileStreamInfoPlayerPosition",value:function(a){var r=this;this.state.streamInfo&&"file"===this.state.streamInfo.streamType&&this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().getMediaFileProgress(function(e){if("object"===(void 0===e?"undefined":s(e))){var t=e.position,o=void 0===t?0:t,n=e.duration,i=void 0===n?0:n;i<o&&(o=i,r._stopProgressTimer()),r._updateStreamInfoAttributes("position",o),m.default.isFunction(a)&&a(e)}})}},{key:"_changeFullScreenState",value:function(e){this.setState({isFullScreen:e})}},{key:"getVideoDumbElementId",value:function(){if(this.videoDumb)return this.videoDumb.getElementId()}},{key:"render",value:function(){this.state.streamInfo&&!this.videoDumb?this.videoDumb=new r.default(this.elements.mediaSourceElement,this.instanceId,this.whiteBoardManagerInstance,{videoDumbElementIdPrefix:this.instanceId,streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,myUserId:this.props.myUserId}):!this.state.streamInfo&&this.videoDumb&&(this.videoDumb.destroyView(),this.videoDumb=void 0),h.default.updateStyle(this.elements.rootElement,{display:this.state.streamInfo?"":"none"})}}]),f);function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,n));return r.isVideoPlayer=a,r.parentNode=e,r.instanceId=t,r.whiteBoardManagerInstance=o,r.configration=i,r.state={streamInfo:void 0,volume:100,muteVolume:!1,isFullScreen:!1},r.progressIntervalDuration=1e3,r.elements={},r.videoDumb=void 0,r._createElements(),r._connectElements(),r.render(),r}o.default=c},{"../../utils/DomUtils":339,"../../utils/Utils":344,"../components/MediaPlayerController":345,"../components/TalkcloudReact":347,"../components/VideoDumb":348}],353:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkVideoPlayer=void 0;var n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=a(e("../../utils/Global")),c=a(e("../../utils/Utils"));function a(e){return e&&e.__esModule?e:{default:e}}var r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,a(e("./MediaPlayer")).default),n(s,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,a=void 0===i?{}:i,r=t.published;if(("media"===o||"file"===o)&&a.audio&&a.video)if(r){l.default.isPlayVideoing=!0,this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:a.audio,video:a.video,attributes:a}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e),this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand({type:"room-receiveActionCommand",message:{action:"closeDynamicPptWebPlay"}})}else l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,i=void 0===n?{}:n,a=t.updateAttributes,r=void 0===a?{}:a;("media"===o||"file"===o)&&i.audio&&i.video&&this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===n||"file"===n)&&r.audio&&r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,d={playerType:"videoPlayer",userid:i,streamType:n,audio:r.audio,video:r.video,attributes:r};d.isDynamicPptVideo="dynamicPPT"===d.attributes.source||"videoPlayer"===d.playerType&&""===d.attributes.filename,l=Object.deepAssign({type:e,fileid:d.attributes.fileid},d),s.sendActionCommand("mediaPlayerNotice",l),c.default.isFunction(s.forceViewStateUpdate)&&s.forceViewStateUpdate()}}}}]),s);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t,o,n,i,!0));return a.configration=i,a}window.TalkVideoPlayer=r,o.TalkVideoPlayer=r,o.default=r},{"../../utils/Global":340,"../../utils/Utils":344,"./MediaPlayer":352}],354:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e};function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=r(e("../../utils/DomUtils")),a=r(e("../../utils/Configuration")),b=r(e("../../utils/Constant")),Pe=r(e("../../utils/Global")),S=r(e("../../utils/Utils")),Ie=r(e("../../intermediateLayer/WhiteboardIntermediateLayer")),P=r(e("../../intermediateLayer/DynamicPptIntermediateLayer")),_=r(e("../../intermediateLayer/H5DocumentPptIntermediateLayer"));function r(e){return e&&e.__esModule?e:{default:e}}function I(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var s=(n(l,[{key:"getConfigration",value:function(){return this.configration}},{key:"saveFiledataAndLoadCurrpageWhiteboardData",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};this._saveFiledataAndLoadCurrpageWhiteboardData(t)}},{key:"noticeWhiteboardActionCommand",value:function(e,t){if("default"===this.instanceId)switch(e){case"playOrPauseDynamicPpt":"dynamicPPT"===this.fileTypeMark&&P.default.postMessage(this.instanceId,{action:t.pause?"stopDynamicPpt":"playDynamicPpt"});break;case"updateMute":"dynamicPPT"===this.fileTypeMark&&P.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:{type:"updateMute",data:{mute:t.isMute}}});break;case"ExtendedNotice":"dynamicPPT"===this.fileTypeMark&&P.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:t.extendedData});break;case"closeDynamicPptAutoVideo":"dynamicPPT"===this.fileTypeMark&&P.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"reloadCurrentDocument",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if("default"===this.instanceId||this.configration.hasExtendDocument)switch(this.fileTypeMark){case"generalDocument":var o=Ie.default.getWhiteboardFiledata(this.instanceId),n=(o.cospdfpath,o.swfpath),i=o.isContentDocument,a=o.fileid,r=o.filetype,s=o.currpage;if(n&&"whiteboard"!==r&&0!=a){var l=void 0;if(Number(i))n&&(l=n);else{var d=n.lastIndexOf("."),c=n.substring(d),u=n.replace(c,"-"+s+c);l=Pe.default.nowUseDocAddress+u}Ie.default.setWhiteboardWatermarkImage(this.instanceId,l,{resetDedaultWhiteboardMagnification:!1})}break;case"dynamicPPT":t.isAgainreconnect||(this.forceReloadTimestampFromPpt=(new Date).getTime()),this._loadCurrentDynamicPpt({},{isAgainreconnect:t.isAgainreconnect});break;case"h5Document":this._loadCurrentH5Document({forceReloadTimestamp:(new Date).getTime()})}}},{key:"changeDocumentRemarkState",value:function(e){this.remark=e&&this.configration.canRemark,this._viewStateUpdate()}},{key:"changeFullScreenState",value:function(e){this.fullScreen=e,this._viewStateUpdate(),this.resizeWhiteboardHandler()}},{key:"destroyWhiteboardView",value:function(){for(var e in Ie.default.hasWhiteboardById(this.instanceId)&&Ie.default.destroyWhiteboardInstance(this.instanceId),P.default.hasDynamicPptById(this.instanceId)&&P.default.destroyDynamicPptInstance(this.instanceId),_.default.hasH5DocumentById(this.instanceId)&&_.default.destroyH5DocumentInstance(this.instanceId),k.default.removeChild(this.elements.whiteboardViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"changeWhiteBoardConfigration",value:function(e){Object.deepAssign(this.configration,e);var t={},o={},n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var d=s.value,c=Se(d,2),u=c[0],h=c[1];"canDraw"===u?t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom:"myUserId"===u?t.myselfId=h:"myName"===u?t.nickname=h:"primaryColor"===u||"secondaryColor"===u||"primaryColor"===u?t[u.replace(/Color/g,"")]=h:"synchronization"===u?t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom:t[u]=h,"synchronization"===u?o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:o[u]=h,"synchronization"===u?n.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?n.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:n[u]=h}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}void 0!==e.isConnectedRoom&&(t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom,o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom,n.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom,o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,n.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),void 0!==e.synchronization&&(t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),Ie.default.updateWhiteboardProperty(this.instanceId,t),(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.updateDynamicPptProperty(this.instanceId,o),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.updateH5DocumentProperty(this.instanceId,n),void 0!==e.loadDynamicPptView&&this.elements.dynamicPptViewElement&&(e.loadDynamicPptView&&!document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))?(k.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),this._productionDynamicPpt()):!e.loadDynamicPptView&&document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))&&(P.default.hasDynamicPptById(this.instanceId)&&P.default.destroyDynamicPptInstance(this.instanceId),k.default.removeChild(this.elements.dynamicPptViewElement,this.elements.documentViewElement))),void 0!==e.loadH5DocumentView&&this.elements.h5DocumentViewElement&&(e.loadH5DocumentView&&!document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))?(k.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),this._productionH5Document()):!e.loadH5DocumentView&&document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))&&(_.default.hasH5DocumentById(this.instanceId)&&_.default.destroyH5DocumentInstance(this.instanceId),k.default.removeChild(this.elements.h5DocumentViewElement,this.elements.documentViewElement))),void 0!==e.rootBackgroundColor&&k.default.updateStyle(this.elements.whiteboardViewRootElement,{backgroundColor:e.rootBackgroundColor}),void 0!==e.isMobile&&(e.isMobile?k.default.addClass(this.elements.whiteboardViewRootElement,"app-mobile"):k.default.removeClass(this.elements.whiteboardViewRootElement,"app-mobile")),void 0===e.canPage&&void 0===e.addPage&&void 0===e.isConnectedRoom||this._viewStateUpdate()}},{key:"receiveEventRoomPubmsg",value:function(e){e&&"string"==typeof e&&(e=JSON.parse(e)),"object"===(void 0===e?"undefined":ke(e))&&e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),"object"===ke(e.message)&&e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"ShowPage":case"ExtendShowPage":t.source="room-pubmsg",this._handleShowPageSignalling(t,e.local);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Ie.default.activeWhiteboardTool("tool_mouse",this.instanceId):Ie.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this.volume=100*t.data.volume,this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"receiveEventRoomDelmsg",value:function(){}},{key:"receiveEventRoomMsglist",value:function(e,t){switch(e){case"ShowPage":case"ExtendShowPage":t.source="room-msglist",this._handleShowPageSignalling(t);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Ie.default.activeWhiteboardTool("tool_mouse",this.instanceId):Ie.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e,t){switch(e){case"fullScreenChangeCallback":this.changeFullScreenState(t.isFullScreen);break;case"changeDynamicPptSize":this.configration.isMobile&&"dynamicPPT"===this.fileTypeMark&&P.default.changeDynamicPptSize(this.instanceId);break;case"closeDynamicPptWebPlay":"dynamicPPT"===this.fileTypeMark&&P.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"sendActionCommand",value:function(e,t){this.receiveActionCommand&&"function"==typeof this.receiveActionCommand&&("object"!==(void 0===t?"undefined":ke(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),this.receiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.pubMsg&&this.whiteBoardManagerInstance.pubMsg(e)}},{key:"delMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.delMsg&&this.whiteBoardManagerInstance.delMsg(e)}},{key:"getWhiteboardViewState",value:function(){return this.whiteboardViewState}},{key:"forceViewStateUpdate",value:function(){this._viewStateUpdate()}},{key:"useWhiteboardTool",value:function(e){if(this.whiteboardViewState.tool[e]&&this.whiteboardViewState.tool[e].disabled)L.Logger.warning("whiteboard tool("+e+") state is disabled , cannot use "+e+" tool!");else{if(("default"===this.instanceId||this.configration.hasExtendDocument)&&this.configration.synchronization&&this.configration.isConnectedRoom&&e!==Ie.default.getActiveTool(this.instanceId)&&("tool_mouse"!==e&&"tool_mouse"===Ie.default.getActiveTool(this.instanceId)||"tool_mouse"===e&&"tool_mouse"!==Ie.default.getActiveTool(this.instanceId))){var t={name:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool",id:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,selectMouse:"tool_mouse"===e},save:!0};this.pubMsg(t)}Ie.default.activeWhiteboardTool(e,this.instanceId)}}},{key:"executeWhiteboardAction",value:function(e){this.whiteboardViewState.action[e]&&this.whiteboardViewState.action[e].disabled?L.Logger.warning("whiteboard action("+e+") state is disabled , cannot execute "+e+" action!"):Ie.default.activeWhiteboardTool(e,this.instanceId)}},{key:"executeZoomWhiteaord",value:function(e){this.whiteboardViewState.zoom[e]&&this.whiteboardViewState.zoom[e].disabled?L.Logger.warning("whiteboard zoom("+e+") state is disabled , cannot execute "+e+" zoom!"):Ie.default.activeWhiteboardTool(e,this.instanceId)}},{key:"addPage",value:function(){var e=Ie.default.getWhiteboardFiledata(this.instanceId),t=e.fileid,o=e.pagenum;if("generalDocument"===this.fileTypeMark||0!==Number(t)){if(o++,Ie.default.updateWhiteboardFiledata(this.instanceId,{pagenum:o}),this.configration.synchronization&&this.configration.isConnectedRoom){var n={name:"default"===this.instanceId?"WBPageCount":"ExtendWBPageCount",id:"default"===this.instanceId?"WBPageCount":"WBPageCount_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,totalPage:o,fileid:t},save:!0};this.pubMsg(n)}this.nextPage()}else L.Logger.warning("whiteboard addPage method can only be used in pure whiteboard.")}},{key:"nextPage",value:function(){var t=this;if(this.whiteboardViewState.page.nextPage&&this.whiteboardViewState.page.nextPage.disabled)L.Logger.warning("whiteboard nexPage state is disabled , cannot execute nextPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Ie.default.getWhiteboardFiledata(this.instanceId),o=e.currpage,n=e.pagenum;n<++o&&(o=n);var i={data:{filedata:{currpage:o}}};this._sendSignalling_ShowPage(i,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":_.default.nextPage(this.instanceId);break;case"dynamicPPT":P.default.nextSlide(this.instanceId)}}},{key:"prevPage",value:function(){var t=this;if(this.whiteboardViewState.page.prevPage&&this.whiteboardViewState.page.prevPage.disabled)L.Logger.warning("whiteboard prevPage state is disabled , cannot execute prevPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Ie.default.getWhiteboardFiledata(this.instanceId).currpage;--e<1&&(e=1);var o={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(o,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":_.default.prevPage(this.instanceId);break;case"dynamicPPT":P.default.prevSlide(this.instanceId)}}},{key:"skipPage",value:function(e){var t=this;switch(this.fileTypeMark){case"generalDocument":var o=Ie.default.getWhiteboardFiledata(this.instanceId).pagenum;o<e&&(e=o),e<1&&(e=1);var n={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(n,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":_.default.skipPage(this.instanceId,e);break;case"dynamicPPT":var i=e;P.default.jumpToAnimation(this.instanceId,i,0,!0)}}},{key:"nextStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.nextStep&&this.whiteboardViewState.page.nextStep.disabled)L.Logger.warning("whiteboard nextStep state is disabled , cannot execute nextStep method!");else switch(this.fileTypeMark){case"dynamicPPT":P.default.nextStep(this.instanceId)}else L.Logger.warning("whiteboard nextStep method can only be used in dynamic PPT files.")}},{key:"prevStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.prevStep&&this.whiteboardViewState.page.prevStep.disabled)L.Logger.warning("whiteboard prevStep state is disabled , cannot execute prevStep method!");else switch(this.fileTypeMark){case"dynamicPPT":P.default.prevStep(this.instanceId)}else L.Logger.warning("whiteboard prevStep method can only be used in dynamic PPT files.")}},{key:"resizeWhiteboardSizeCallback",value:function(e){e.loadScrollBar?k.default.addClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"):k.default.removeClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"),k.default.updateStyle(this.elements.documentViewElement,{width:e.style.width,height:e.style.height}),k.default.updateStyle(this.elements.totalDocumentViewElement,{width:e.style.width,height:e.style.height,top:"50%",left:"50%"}),k.default.updateStyle(this.elements.totalDocumentViewElement,{marginLeft:"-"+this.elements.totalDocumentViewElement.offsetWidth/2+"px",marginTop:"-"+this.elements.totalDocumentViewElement.offsetHeight/2+"px"})}},{key:"noticeUpdateToolDescCallback",value:function(){this._viewStateUpdate()}},{key:"noticeUpdateWhiteboardFiledataCallback",value:function(){this._viewStateUpdate()}},{key:"receiveActionCommandCallback",value:function(e,t){if(t.id===this.instanceId)switch(e){case"closeAllSelectBox":this.sendActionCommand("closeAllSelectBox");break;case"changeWhiteboardActiveTool":this._updateViewShowAndHide();break;case"updateWhiteboardWatermarkImageScale":Ie.default.updateWhiteboardWatermarkImageScale(this.instanceId,t.scale);break;case"dynamicPptLoadEnd":case"h5DocumentLoadEnd":case"generalDocumentLoadEnd":k.default.removeClass(this.elements.disableClickViewElement,"loading"),this.scale=t.scale,this._viewStateUpdate();var o=Ie.default.getWhiteboardFiledata(this.instanceId);o.success=t.success,o.reloadNumber=t.reloadNumber;var n={loadSuccessData:o};this.sendActionCommand("documentLoadSuccess",n);break;case"h5DocumentReloadFail":case"dynamicPptReloadFail":case"generalDocumentReloadFail":var i=Ie.default.getWhiteboardFiledata(this.instanceId);i.success=t.success,i.reloadNumber=t.reloadNumber;var a={loadFailData:i};this.sendActionCommand("documentLoadFail",a);break;case"sendSignalling_ShowPage":this._sendSignalling_ShowPage(t.updatePubmsgData);break;case"saveFiledataAndLoadCurrpageWhiteboardData":case"dynamicPptSlideChange":this._saveFiledataAndLoadCurrpageWhiteboardData(t.updateFileData);break;case"dynamicPptStepChange":Ie.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"publishDymanicPptNetworkMedia":if("default"===this.instanceId){P.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"});var r=Ie.default.getWhiteboardFiledata(this.instanceId),s=r.swfpath,l=r.isContentDocument,d=r.baseurl;console.error("Dymanic PPT fileData: ",r);var c=void 0;Number(l)?s&&(c=s.replace(/\/newppt.html/g,"")):c=d||Pe.default.nowUseDocAddress+s,t.url=c+"/"+t.url,this.whiteBoardManagerInstance&&(this.configration.clientMediaShare&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile?this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile(t.url,void 0,void 0,{IgnoreElementId:!0,toID:this.configration.mediaShareToID,attrs:t.attributes}):this.whiteBoardManagerInstance.startShareMedia(t.url,t.video,this.configration.mediaShareToID,t.attributes))}break;case"publishH5DocumentNetworkMedia":var u=t.url;if(u=(u=u.replace(/^https/,"http")).replace(/443/g,"80"),this.whiteBoardManagerInstance){var h=this.whiteBoardManagerInstance.getRoomDelegate();h.isPlayAudio&&(h.isPlayAudio(u,t.isPlay,w({},t.attributes,{status:t.status})),h.setPptVideoVolume&&h.setPptVideoVolume(100))}break;case"publishDymanicPptNetworkAudio":if(this.configration.isNativePlayAudio){var m=Ie.default.getWhiteboardFiledata(this.instanceId),f=m.swfpath,p=m.isContentDocument,g=m.baseurl;console.error("Dymanic PPT fileData: ",m);var v=void 0;Number(p)?f&&(v=f.replace(/\/newppt.html/g,"")):v=g||Pe.default.nowUseDocAddress+f,v=(v=v.replace(/^https/,"http")).replace(/443/g,"80"),t.url=v+"/"+t.url,this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio&&(this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio(t.url,t.isPlay,t.attributes),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(this.volume))}break;case"updateWhiteboardFiledata":Ie.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"getWhiteboardFiledata":t&&t.callback&&"function"==typeof t.callback&&t.callback(Ie.default.getWhiteboardFiledata(this.instanceId));break;case"reloadCurrentDocument":this.reloadCurrentDocument({isAgainreconnect:t.isAgainreconnect});break;case"reloadDynamicPptIframeSrc":if(t.iframeSrc&&"dynamicPPT"===this.fileTypeMark&&new RegExp(Ie.default.getWhiteboardFiledata(this.instanceId).swfpath+"/newppt.html","g").test(t.iframeSrc)){var y=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress;Pe.default.docAddressKey=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&S.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Pe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(I(Pe.default.docAddressList)),docAddressIndex:Pe.default.docAddressKey,oldDocAddress:y,nowDocAddress:S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress})),Pe.default.nowUseDocAddress=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload dynamic ppt]change doc address , old address is "+y+" , now address is "+Pe.default.nowUseDocAddress),void 0!==t.forceReloadNumber&&(this.forceReloadNumberFromPpt=t.forceReloadNumber),this._loadCurrentDynamicPpt(),L.Logger.info("["+t.source+"]load dynamic ppt failure , reload file , old url is "+t.iframeSrc+" , now url is "+P.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"reloadH5DocumentIframeSrc":if(t.iframeSrc&&"h5Document"===this.fileTypeMark&&new RegExp(Ie.default.getWhiteboardFiledata(this.instanceId).swfpath,"g").test(t.iframeSrc)){var b=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress;Pe.default.docAddressKey=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&S.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Pe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(I(Pe.default.docAddressList)),docAddressIndex:Pe.default.docAddressKey,oldDocAddress:b,nowDocAddress:S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress})),Pe.default.nowUseDocAddress=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload h5 document]change doc address , old address is "+b+" , now address is "+Pe.default.nowUseDocAddress);var _={};t.forceReloadNumber&&(_.forceReloadNumber=t.forceReloadNumber),this._loadCurrentH5Document(_,{forceReloadNumber:t.forceReloadNumber}),L.Logger.info("["+t.source+"]load h5 document failure , reload file , old url is "+t.iframeSrc+" , now url is "+P.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"updateWhiteboardToolsInfo":this._viewStateUpdate();break;case"h5DocumentOnJumpPage":this.whiteBoardManagerInstance.skipPage(t.toPage,this.instanceId)}}},{key:"whiteboardWatermarkImageOnFailureCallback",value:function(e){var t=Ie.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.currpage,i=t.filetype,a=t.isContentDocument;if("generalDocument"===this.fileTypeMark&&o&&e&&"whiteboard"!==i&&this.generalDocumentFileForceReloadNumber<this.maxGeneralFileForceReloadNumber){var r=void 0;if(Number(a))r=o;else{var s=o.lastIndexOf("."),l=o.substring(s);r=o.replace(l,"-"+n+l)}if(new RegExp(r,"g").test(e)){if(Number(a))this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file ,  url is "+r+" , reload number is "+this.generalDocumentFileForceReloadNumber);else{var d=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress;Pe.default.docAddressKey=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey,!0),this.whiteBoardManagerInstance&&S.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Pe.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(I(Pe.default.docAddressList)),docAddressIndex:Pe.default.docAddressKey,oldDocAddress:d,nowDocAddress:S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress})),Pe.default.nowUseDocAddress=S.default.getItem(Pe.default.docAddressList,Pe.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload general document]change doc address , old address is "+d+" , now address is "+Pe.default.nowUseDocAddress),this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file , old url is "+(d+r)+" , now url is "+(Pe.default.nowUseDocAddress+r)+" , reload number is "+this.generalDocumentFileForceReloadNumber)}var c=void 0;Number(a)?r&&(c=r):c=Pe.default.nowUseDocAddress+r,Ie.default.setWhiteboardWatermarkImage(this.instanceId,c,{resetDedaultWhiteboardMagnification:!1})}else this.generalDocumentFileForceReloadNumber=0}this.generalDocumentFileForceReloadNumber>=this.maxGeneralFileForceReloadNumber&&this.sendActionCommand("generalDocumentReloadFail",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!1})}},{key:"whiteboardWatermarkImageOnloadCallback",value:function(e){var t=e.width,o=e.height;this.scale=t/o,this.sendActionCommand("generalDocumentLoadEnd",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!0,scale:this.scale}),this._viewStateUpdate()}},{key:"resizeWhiteboardHandler",value:function(){Ie.default.resizeWhiteboardHandler(this.instanceId),"dynamicPPT"===this.fileTypeMark&&"ios"===this.configration.clientType&&P.default.changeDynamicPptSize(this.instanceId)}},{key:"isWhiteboardTextEditing",value:function(){return Ie.default.isWhiteboardTextEditing(this.instanceId)}},{key:"resetWhiteboardData",value:function(){this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},Ie.default.clearWhiteboardAllDataById(this.instanceId)}},{key:"receiveWindowMessageEvent",value:function(e){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.receiveWindowMessageEvent(this.instanceId,e),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.receiveWindowMessageEvent(this.instanceId,e)}},{key:"getWhiteboardRootElement",value:function(){return this.elements.whiteboardViewRootElement}},{key:"resetPureWhiteboardTotalPage",value:function(e){if(1<e)for(var t=2;t<=e;t++)Ie.default.clearWhiteboardDataByFileidAndCurrpage(this.instanceId,0,t);var o=Ie.default.getWhiteboardFiledata(this.instanceId);0==o.fileid&&(o.currpage=1,o.pagenum=1,this._saveFiledataAndLoadCurrpageWhiteboardData(o),this._generalDocumentFileShowPage(!1))}},{key:"getDynamicPptInstanceByID",value:function(){return P.default.getDynamicPptInstanceByID(this.instanceId)}},{key:"getH5DocumentInstanceByID",value:function(){return _.default.getH5DocumentInstanceByID(this.instanceId)}},{key:"_createElements",value:function(){this.elements.whiteboardViewRootElement=k.default.createElement("section",this.instanceId+"TalkcloudSdkWhiteboardRoot",(this.configration.isMobile?"app-mobile ":" ")+"talkcloud-sdk-whiteboard "+this.instanceId+" sdkwhiteboard-root",{width:"100%",height:"100%",position:"relative",left:0,top:0,backgroundColor:this.configration.rootBackgroundColor}),this.elements.totalDocumentViewElement=k.default.createElement("section",this.instanceId+"TalkcloudTotalDocument","talkcloud-sdk-whiteboard "+this.instanceId+" total-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,maxWidth:"100%",maxHeight:"100%"}),this.elements.documentViewElement=k.default.createElement("section",this.instanceId+"TalkcloudDocument","talkcloud-sdk-whiteboard "+this.instanceId+" document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0}),this.elements.whiteboardViewElement=k.default.createElement("article",this.instanceId+"TalkcloudWhiteboard","talkcloud-sdk-whiteboard "+this.instanceId+" whiteboard-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:2}),this.elements.dynamicPptViewElement=k.default.createElement("article",this.instanceId+"TalkcloudDynamicPpt","talkcloud-sdk-whiteboard "+this.instanceId+" dynamic-ppt-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.h5DocumentViewElement=k.default.createElement("article",this.instanceId+"TalkcloudH5Document","talkcloud-sdk-whiteboard "+this.instanceId+" h5-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.disableClickViewElement=k.default.createElement("div",void 0,"talkcloud-sdk-whiteboard "+this.instanceId+" disable-clock-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:4})}},{key:"_connectElements",value:function(){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&k.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&k.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),k.default.appendChild(this.elements.documentViewElement,this.elements.whiteboardViewElement),k.default.appendChild(this.elements.documentViewElement,this.elements.disableClickViewElement),k.default.appendChild(this.elements.totalDocumentViewElement,this.elements.documentViewElement),k.default.appendChild(this.elements.whiteboardViewRootElement,this.elements.totalDocumentViewElement),k.default.appendChild(this.parentNode,this.elements.whiteboardViewRootElement),this._productionWhiteboard(),this._productionDynamicPpt(),this._productionH5Document()}},{key:"_productionWhiteboard",value:function(){var l=this;Ie.default.hasWhiteboardById(this.instanceId)&&Ie.default.destroyWhiteboardInstance(this.instanceId);var e={whiteboardElementId:this.elements.whiteboardViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},delSignallingToServer:function(e,t,o,n){l.configration.synchronization&&l.configration.isConnectedRoom&&l.delMsg({name:e,id:t,toID:o,data:n})},resizeWhiteboardSizeCallback:this.resizeWhiteboardSizeCallback.bind(this),noticeUpdateToolDescCallback:this.noticeUpdateToolDescCallback.bind(this),noticeUpdateWhiteboardFiledataCallback:this.noticeUpdateWhiteboardFiledataCallback.bind(this),receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this),whiteboardWatermarkImageOnFailureCallback:this.whiteboardWatermarkImageOnFailureCallback.bind(this),whiteboardWatermarkImageOnloadCallback:this.whiteboardWatermarkImageOnloadCallback.bind(this)},productionOptions:Object.deepAssign({deawPermission:this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom,showShapeAuthor:this.configration.showShapeAuthor,myselfId:this.configration.myUserId,nickname:this.configration.myName,synchronizationWhiteboard:this.configration.synchronization&&this.configration.isConnectedRoom,primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily,parcelAncestorElementId:this.elements.whiteboardViewRootElement.getAttribute("id"),defaultWhiteboardScale:this.configration.defaultWhiteboardScale,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isOnlyUndoRedoClearMyselfShape:this.configration.isOnlyUndoRedoClearMyselfShape,insertPictureRule:this.configration.insertPictureRule},this.configration.initWhiteboardProductionOptions||{})};Ie.default.productionWhiteboard(e),Ie.default.registerWhiteboardTools(this.instanceId,{tool_pencil:{},tool_highlighter:{},tool_line:{},tool_arrow:{},tool_eraser:{},tool_text:{},tool_rectangle:{},tool_rectangle_empty:{},tool_ellipse:{},tool_ellipse_empty:{},tool_mouse:{},tool_laser:{},action_undo:{},action_redo:{},action_clear:{},zoom_big:{},zoom_small:{}}),Ie.default.clearRedoAndUndoStack(this.instanceId),Ie.default.loadCurrpageWhiteboard(this.instanceId),"default"!==this.instanceId&&!this.configration.hasExtendDocument||Ie.default.activeWhiteboardTool("tool_mouse",this.instanceId)}},{key:"_productionDynamicPpt",value:function(){var l=this;if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument){P.default.hasDynamicPptById(this.instanceId)&&P.default.destroyDynamicPptInstance(this.instanceId);var e={dynamicPptElementId:this.elements.dynamicPptViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationDynamicPpt:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,againreconnectElementParentNode:this.elements.documentViewElement,dynamicPptActionClick:this.configration.actionClick}};P.default.productionDynamicPpt(e)}}},{key:"_productionH5Document",value:function(){var l=this;if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){_.default.hasH5DocumentById(this.instanceId)&&_.default.destroyH5DocumentInstance(this.instanceId);var e={h5DocumentElementId:this.elements.h5DocumentViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationH5Document:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,h5DocumentActionClick:this.configration.actionClick,isH5MediaOutputDominant:this.configration.isH5MediaOutputDominant}};_.default.productionH5Document(e)}}},{key:"_handleShowPageSignalling",value:function(e,t){var o=1<arguments.length&&void 0!==t&&t,n=e.source,i=e.data,a=this.fileid!=i.filedata.fileid;if(this.fileid=i.filedata.fileid,!this.configration.isPlayback)if(o)"ShowPage"===e.name?Pe.default.showPageFromId=this.configration.myUserId:"ExtendShowPage"===e.name&&(Pe.default.extendShowPageFromId=this.configration.myUserId);else{var r=!0;if("ShowPage"===e.name?((a||!e.fromID||Pe.default.showPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(r=!1),Pe.default.showPageFromId=e.fromID):"ExtendShowPage"===e.name&&((a||!e.fromID||Pe.default.extendShowPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(r=!1),Pe.default.extendShowPageFromId=e.fromID),r)return}if(this.fileTypeMark=i.isDynamicPPT?"dynamicPPT":i.isH5Document?"h5Document":"generalDocument",(i.isDynamicPPT||i.isH5Document)&&(i.filedata.pagenum=Ie.default.getWhiteboardFiledata(this.instanceId).pagenum),i.isGeneralFile||!a&&i.isDynamicPPT&&(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.isLoadFinished(this.instanceId)||!a&&i.isH5Document&&(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.isLoadFinished(this.instanceId)){var s=i.filedata;s.currpage>s.pagenum&&(s.currpage=s.pagenum),s.currpage<1&&(s.currpage=1),i.isDynamicPPT&&(s.pptslide=s.currpage)}if(this._updateViewShowAndHide(),this._viewStateUpdate(),i.isGeneralFile){if("room-pubmsg"===n&&!a&&Number(i.filedata.currpage)===Ie.default.getWhiteboardFiledata(this.instanceId).currpage)return;this._saveFiledataAndLoadCurrpageWhiteboardData(i.filedata),this._generalDocumentFileShowPage(a)}else if(i.isDynamicPPT)Ie.default.setWhiteboardWatermarkImage(this.instanceId,""),this._dynamicPPTFileShowPage(a,e);else if(i.isH5Document){if("room-pubmsg"===n&&!a&&Number(i.filedata.currpage)===Ie.default.getWhiteboardFiledata(this.instanceId).currpage)return;Ie.default.setWhiteboardWatermarkImage(this.instanceId,""),this._saveFiledataAndLoadCurrpageWhiteboardData(i.filedata),this._h5DocumentFileShowPage(a)}}},{key:"_generalDocumentFileShowPage",value:function(e){this.generalDocumentFileForceReloadNumber=0,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.setDynamicPptIframeSrc(this.instanceId,""),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setH5DocumentIframeSrc(this.instanceId,""),Ie.default.resetDedaultWhiteboardMagnification(this.instanceId);var t=Ie.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.currpage,i=t.pagenum,a=t.filetype,r=t.isContentDocument;if(k.default.removeClass(this.elements.disableClickViewElement,"loading"),"whiteboard"===a)this.scale=this.configration.defaultWhiteboardScale,this._viewStateUpdate(),Ie.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),Ie.default.setWhiteboardWatermarkImage(this.instanceId,"",{resetDedaultWhiteboardMagnification:!1});else{var s=void 0;if(Number(r))o&&(s=o);else{var l=o.lastIndexOf("."),d=o.substring(l),c=o.replace(d,"-"+n+d);s=Pe.default.nowUseDocAddress+c}if(Ie.default.setWhiteboardWatermarkImage(this.instanceId,s,{resetDedaultWhiteboardMagnification:!1}),!Number(r)){var u=1,h=1;e?(this.cacheMaxPageNum=n,this.cacheMinPageNum=n,this.filePreLoadCurrPage=n,this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,h=this.cacheMaxPageNum,u=this.cacheMinPageNum):(this.filePreLoadCurrPage<n?(u=this.cacheMaxPageNum+1,n>this.cacheMaxPageNum&&(this.cacheMaxPageNum=n),this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),h=this.cacheMaxPageNum):this.filePreLoadCurrPage>n&&(h=this.cacheMinPageNum-1,n<this.cacheMinPageNum&&(this.cacheMinPageNum=n),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,u=this.cacheMinPageNum),this.filePreLoadCurrPage=n);for(var m=u;m<=h;m++)if(m!==n){var f=o.lastIndexOf("."),p=o.substring(f),g=o.replace(p,"-"+m+p),v=Pe.default.nowUseDocAddress+g;Ie.default.preloadWhiteboardImg(v)}}}}},{key:"_dynamicPPTFileShowPage",value:function(e,t){if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)if((this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setH5DocumentIframeSrc(this.instanceId,""),e)Ie.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),this._saveFiledataAndLoadCurrpageWhiteboardData(t.data.filedata),k.default.addClass(this.elements.disableClickViewElement,"loading"),this.forceReloadNumberFromPpt=void 0,this.forceReloadTimestampFromPpt=void 0,this._loadCurrentDynamicPpt();else{var o=t.data.filedata,n=o.currpage,i=o.pptstep;P.default.jumpToAnimation(this.instanceId,n,i)}}},{key:"_h5DocumentFileShowPage",value:function(e){if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.setDynamicPptIframeSrc(this.instanceId,"");var t=Ie.default.getWhiteboardFiledata(this.instanceId),o=(t.swfpath,t.currpage);e?(Ie.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),k.default.addClass(this.elements.disableClickViewElement,"loading"),this._loadCurrentH5Document()):_.default.jumpToPage(this.instanceId,o)}}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};Ie.default.saveWhiteboardStackToStorage(this.instanceId),Ie.default.updateWhiteboardFiledata(this.instanceId,t),Ie.default.loadCurrpageWhiteboard(this.instanceId)}},{key:"_updateViewShowAndHide",value:function(){switch(this.fileTypeMark){case"generalDocument":k.default.show(this.elements.whiteboardViewElement),k.default.hide([this.elements.h5DocumentViewElement,this.elements.dynamicPptViewElement]);break;case"h5Document":k.default.show(this.elements.h5DocumentViewElement),k.default.hide(this.elements.dynamicPptViewElement),"tool_mouse"!==Ie.default.getActiveTool(this.instanceId)?k.default.show(this.elements.whiteboardViewElement):k.default.hide(this.elements.whiteboardViewElement);break;case"dynamicPPT":k.default.show(this.elements.dynamicPptViewElement),k.default.hide(this.elements.h5DocumentViewElement),"tool_mouse"!==Ie.default.getActiveTool(this.instanceId)?k.default.show(this.elements.whiteboardViewElement):k.default.hide(this.elements.whiteboardViewElement)}k.default.removeClass(this.elements.documentViewElement,["talkcloud-filetype-generalDocument","talkcloud-filetype-h5Document","talkcloud-filetype-dynamicPPT"]),k.default.addClass(this.elements.documentViewElement,"talkcloud-filetype-"+this.fileTypeMark),this.resizeWhiteboardHandler()}},{key:"_updatedynamicPptVolume",value:function(e){e<0?e=0:100<e&&(e=100),this.dynamicPptVolume=e,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&P.default.postMessage(this.instanceId,{action:"PptVolumeControl",volumeValue:this.dynamicPptVolume/100}),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(e),this.whiteBoardManagerInstance.getRoomDelegate().setPptVideoVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptVideoVolume(e),this._viewStateUpdate()}},{key:"_viewStateUpdate",value:function(){if(Ie.default.hasWhiteboardById(this.instanceId)){var e={},t=Ie.default.getWhiteboardFiledata(this.instanceId),o=t.currpage,n=t.pagenum,i=t.pptslide,a=t.pptstep,r=t.steptotal,s=t.fileid,l=Ie.default.getRegisterWhiteboardToolsList(this.instanceId),d={nextPage:{disabled:Pe.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&o<n)},prevPage:{disabled:Pe.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&1<o)},skipPage:{disabled:Pe.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom)},addPage:{disabled:!(!(Pe.default.isPlayVideoing&&"default"===this.instanceId||"generalDocument"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.addPage&&this.configration.isConnectedRoom&&n<=o&&0===Number(s))},nextStep:{disabled:!(!(Pe.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||n<=i&&r-1<=a},prevStep:{disabled:!(!(Pe.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||i<=1&&a<=0},currentPage:o<1?1:o,totalPage:n<1?1:n},c=!0,u=!1,h=void 0;try{for(var m,f=Object.entries(l)[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var p=m.value,g=Se(p,2),v=g[0],y=g[1];if(/tool_/g.test(v)){if(this.whiteboardViewState.tool[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.tool=e.tool||{},e.tool[v]=y;else{var b=!0,_=!1,w=void 0;try{for(var k,S=Object.entries(y)[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var P=k.value,I=Se(P,2),x=I[0],C=I[1];this.whiteboardViewState.tool[v]=this.whiteboardViewState.tool[v]||{},C!==this.whiteboardViewState.tool[v][x]&&(e.tool=e.tool||{},e.tool[v]=e.tool[v]||{},e.tool[v][x]=C)}}catch(e){_=!0,w=e}finally{try{!b&&S.return&&S.return()}finally{if(_)throw w}}}}else if(/action_/g.test(v)){if(this.whiteboardViewState.action[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.action=e.action||{},e.action[v]=y;else{var T=!0,D=!1,E=void 0;try{for(var L,A=Object.entries(y)[Symbol.iterator]();!(T=(L=A.next()).done);T=!0){var M=L.value,R=Se(M,2),W=R[0],j=R[1];this.whiteboardViewState.action[v]=this.whiteboardViewState.action[v]||{},j!==this.whiteboardViewState.action[v][W]&&(e.action=e.action||{},e.action[v]=e.action[v]||{},e.action[v][W]=j)}}catch(e){D=!0,E=e}finally{try{!T&&A.return&&A.return()}finally{if(D)throw E}}}}else if(/zoom_/g.test(v)&&this.whiteboardViewState.zoom[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.zoom=e.zoom||{},e.zoom[v]=y;else{var N=!0,O=!1,V=void 0;try{for(var F,B=Object.entries(y)[Symbol.iterator]();!(N=(F=B.next()).done);N=!0){var z=F.value,U=Se(z,2),H=U[0],J=U[1];this.whiteboardViewState.zoom[v]=this.whiteboardViewState.zoom[v]||{},J!==this.whiteboardViewState.zoom[v][H]&&(e.zoom=e.zoom||{},e.zoom[v]=e.zoom[v]||{},e.zoom[v][H]=J)}}catch(e){O=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(O)throw V}}}}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}var K=!0,q=!1,G=void 0;try{for(var Y,X=Object.entries(d)[Symbol.iterator]();!(K=(Y=X.next()).done);K=!0){var Z=Y.value,$=Se(Z,2),Q=$[0],ee=$[1];if(this.whiteboardViewState.page[Q]=this.whiteboardViewState.page[Q]||{},"object"===(void 0===ee?"undefined":ke(ee))){var te=!0,oe=!1,ne=void 0;try{for(var ie,ae=Object.entries(ee)[Symbol.iterator]();!(te=(ie=ae.next()).done);te=!0){var re=ie.value,se=Se(re,2),le=se[0],de=se[1];this.whiteboardViewState.page[Q][le]!==de&&(e.page=e.page||{},e.page[Q]=e.page[Q]||{},e.page[Q][le]=de)}}catch(e){oe=!0,ne=e}finally{try{!te&&ae.return&&ae.return()}finally{if(oe)throw ne}}}else this.whiteboardViewState.page[Q]!==ee&&(e.page=e.page||{},e.page[Q]=ee)}}catch(e){q=!0,G=e}finally{try{!K&&X.return&&X.return()}finally{if(q)throw G}}this.fileTypeMark!==this.whiteboardViewState.documentType&&(e.documentType=this.fileTypeMark),this.fileid!=this.whiteboardViewState.fileid&&(e.fileid=this.fileid),this.dynamicPptVolume!==this.whiteboardViewState.dynamicPptVolume&&(e.dynamicPptVolume=this.dynamicPptVolume),this.fullScreen!==this.whiteboardViewState.fullScreen&&(e.fullScreen=this.fullScreen),this.remark!==this.whiteboardViewState.remark&&(e.remark=this.remark),this.scale!==this.whiteboardViewState.scale&&(e.scale=this.scale);var ce=Pe.default.allDocumentRemarkInfoMap.get("documentRemark_"+this.fileid);this.remarkText=0!=this.fileid&&ce&&ce[this.fileid+"_"+d.currentPage]?ce[s+"_"+d.currentPage]:"",this.remarkText!==this.whiteboardViewState.remarkText&&(e.remarkText=this.remarkText);var ue=Ie.default.getWhiteboardToolsInfo(this.instanceId);if(ue&&"object"===(void 0===ue?"undefined":ke(ue))){var he=!0,me=!1,fe=void 0;try{for(var pe,ge=Object.entries(ue)[Symbol.iterator]();!(he=(pe=ge.next()).done);he=!0){var ve=pe.value,ye=Se(ve,2),be=ye[0],_e=ye[1];void 0!==this.whiteboardViewState.other[be]&&this.whiteboardViewState.other[be]!==_e&&(e.other=e.other||{},e.other[be]=_e)}}catch(e){me=!0,fe=e}finally{try{!he&&ge.return&&ge.return()}finally{if(me)throw fe}}}if(Object.keys(e).length&&(void 0!==e.tool&&this._updateViewShowAndHide(),Object.deepAssign(this.whiteboardViewState,e),Object.keys(this.whiteboardViewState.tool).length&&Object.keys(this.whiteboardViewState.action).length&&Object.keys(this.whiteboardViewState.zoom).length&&Object.keys(this.whiteboardViewState.page).length)){var we={viewState:this.whiteboardViewState,updateViewState:e};this.sendActionCommand("viewStateUpdate",we)}}}},{key:"_sendSignalling_ShowPage",value:function(e,t){if("default"===this.instanceId||this.configration.hasExtendDocument){var o=Ie.default.getWhiteboardFiledata(this.instanceId),n={name:"default"===this.instanceId?"ShowPage":"ExtendShowPage",id:"default"===this.instanceId?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+this.instanceId,toID:"__all",data:{sourceInstanceId:this.instanceId,isGeneralFile:"generalDocument"===this.fileTypeMark,isMedia:!1,isDynamicPPT:"dynamicPPT"===this.fileTypeMark,isH5Document:"h5Document"===this.fileTypeMark,action:"",mediaType:"",filedata:o},save:!0};e&&Object.deepAssign(n,e),this.configration.synchronization&&this.configration.isConnectedRoom&&this.pubMsg(n),t&&"function"==typeof t&&t(n)}}},{key:"_loadCurrentDynamicPpt",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};if("dynamicPPT"===this.fileTypeMark){var n=Ie.default.getWhiteboardFiledata(this.instanceId),i=n.fileid,a=n.swfpath,r=n.isContentDocument,s=this.getRealBaseurl(n),l=Number(r)?a:s||Pe.default.nowUseDocAddress+a+"/newppt.html",d={versions:b.default.dynamicPptVersions,fileid:i,playback:this.configration.isPlayback,classbegin:!0,publishDynamicPptMediaPermission_video:this.configration.synchronization&&this.configration.isConnectedRoom,remoteNewpptUpdateTime:b.default.remoteDynamicPptUpdateTime,role:this.configration.myRole,dynamicPptActionClick:this.configration.actionClick&&this.configration.isConnectedRoom,newpptPagingPage:this.configration.canPage&&this.configration.isConnectedRoom,dynamicPptDebug:b.default.dynamicPptDebugLog,PptVolumeValue:this.dynamicPptVolume/100,deviceType:"phone"===this.configration.deviceType?0:void 0,isBackEvent:this.configration.isBackEvent,isClientPlayAudio:this.configration.isNativePlayAudio,isClientPlayVideo:this.configration.isNativePlayVideo};if(this.setPreloadParams(d,s),void 0!==this.forceReloadTimestampFromPpt&&(d.forceReloadTimestamp=this.forceReloadTimestampFromPpt),void 0!==this.forceReloadNumberFromPpt&&(d.forceReloadNumber=this.forceReloadNumberFromPpt,o.forceReloadNumber=this.forceReloadNumberFromPpt),e&&S.default.isJson(e)){var c=!0,u=!1,h=void 0;try{for(var m,f=Object.entries(e)[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var p=m.value,g=Se(p,2),v=g[0],y=g[1];d[v]=y}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}}o.playback=this.configration.isPlayback,P.default.setDynamicPptIframeSrc(this.instanceId,l,d,n,o)}}},{key:"_loadCurrentH5Document",value:function(e,t){var o=1<arguments.length&&void 0!==t?t:{};if("h5Document"===this.fileTypeMark){var n=Ie.default.getWhiteboardFiledata(this.instanceId),i=n.fileid,a=n.swfpath,r=n.isContentDocument,s=this.getRealBaseurl(n),l=void 0;L.Logger.info("Document swfpath：",a,"isContentDocument:",r),Number(r)?a&&(l=a):l=s||Pe.default.nowUseDocAddress+a;var d=this.configration.sendH5DocumentRoomInfo;if(d.isClientPlayAudio=this.configration.isNativePlayAudio,d.isClientPlayVideo=this.configration.isNativePlayVideo,d.fileid=i,this.setPreloadParams(d,s),d.role=this.configration.myRole,d.isH5MediaOutput=this.configration.isH5MediaOutput,e&&S.default.isJson(e)){var c=!0,u=!1,h=void 0;try{for(var m,f=Object.entries(e)[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var p=m.value,g=Se(p,2),v=g[0],y=g[1];d[v]=y}}catch(e){u=!0,h=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw h}}}_.default.setH5DocumentIframeSrc(this.instanceId,l,d,n,o)}}},{key:"setPreloadParams",value:function(e,t){if(t){var o=Pe.default.nowUseDocAddress.split(":");e.playProtocol=o[0],e.playHostname=o[1].replace(/\//g,""),e.playPort=o[2]}}},{key:"getRealBaseurl",value:function(t){var e="";if(!Pe.default.preloadFile){var o=localStorage.getItem("preloadFile");try{o=JSON.parse(o)}catch(e){o=t.baseurl?t:o}Pe.default.preloadFile=o||Pe.default.preloadFile,!Pe.default.preloadFile&&t.baseurl&&(Pe.default.preloadFile=t)}return Pe.default.preloadFile&&this.isPreloadFile(t)&&(e=Pe.default.preloadFile.baseurl),e}},{key:"isPreloadFile",value:function(e){return!!Pe.default.preloadFile&&!!e&&String(Pe.default.preloadFile.fileid)===String(e.fileid)}}]),l);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Object.deepAssign({},a.default.defaultWhiteboard,a.default.commonWhiteboard),n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.parentNode=e,this.instanceId=t,this.configration=o,this.receiveActionCommand=n,this.whiteBoardManagerInstance=i,this.elements={},this.fileid=0,this.fullScreen=!1,this.remark=!1,this.scale=this.configration.defaultWhiteboardScale,this.loadDocumentFail=void 0,this.remarkText="",this.fileTypeMark="generalDocument",this.cacheMaxPageNum=1,this.cacheMinPageNum=1,this.filePreLoadCurrPage=1,this.filePreLoadStep=2,this.dynamicPptVolume=100,this.maxGeneralFileForceReloadNumber=10,this.generalDocumentFileForceReloadNumber=0,this.volume=100,this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},this._createElements(),this._connectElements()}o.default=s},{"../../intermediateLayer/DynamicPptIntermediateLayer":334,"../../intermediateLayer/H5DocumentPptIntermediateLayer":335,"../../intermediateLayer/WhiteboardIntermediateLayer":336,"../../utils/Configuration":337,"../../utils/Constant":338,"../../utils/DomUtils":339,"../../utils/Global":340,"../../utils/Utils":344}],355:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),e("babel-polyfill"),e("./utils/Log");var n,i=e("./TKWhiteBoardManager"),a=(n=i)&&n.__esModule?n:{default:n};o.default=a.default},{"./TKWhiteBoardManager":333,"./utils/Log":342,"babel-polyfill":1}]},{},[355]);